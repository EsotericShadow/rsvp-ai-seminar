{"instruction": "Explain system architecture and technical details", "input": "What's the deployment setup?", "output": "I'll explain the technical architecture of the RSVP system:\n\n**System Architecture:**\n\n**Frontend:**\n- **Framework**: Next.js 14 with React\n- **Styling**: Tailwind CSS\n- **Animations**: Framer Motion\n- **State Management**: React hooks (useState, useEffect)\n- **Authentication**: Session-based with cookies\n\n**Backend:**\n- **Runtime**: Node.js\n- **Framework**: Next.js API routes\n- **Database**: PostgreSQL with Prisma ORM\n- **Email Service**: Resend API\n- **Vector Database**: Weaviate (for RAG)\n- **AI Integration**: Gemini 2.5 Flash\n\n**Database Models:**\n- `RSVP` - Event RSVP submissions\n- `Visit` - Website visit tracking\n- `CampaignTemplate` - Email templates\n- `Campaign` - Email campaigns\n- `AudienceGroup` - Audience segmentation\n- `AudienceMember` - Individual audience members\n- `CampaignSchedule` - Campaign scheduling\n- `CampaignSend` - Individual email sends\n\n**API Structure:**\n- `/api/rsvp` - RSVP form submission\n- `/api/admin/campaign/campaigns` - Campaign management\n- `/api/admin/campaign/schedules` - Schedule management\n- `/api/admin/campaign/templates` - Template management\n- `/api/admin/campaign/groups` - Audience group management\n- `/api/admin/campaign/send` - Email sending\n- `/api/admin/export` - Data export\n- `/api/unsubscribe` - Unsubscribe handling\n- `/api/l/[token]` - Link tracking\n- `/api/__pixel` - Email open tracking\n\n**Security Features:**\n- CSRF protection with origin/referer validation\n- Rate limiting with IP fingerprinting\n- Input validation with Zod schemas\n- Test detection to prevent spam\n- Security logging for monitoring\n- Secure headers with CSP\n\n**Environment Variables:**\n- `DATABASE_URL` - PostgreSQL connection\n- `RESEND_API_KEY` - Email service\n- `GEMINI_API_KEY` - AI service\n- `WEAVIATE_URL` - Vector database\n- `WEAVIATE_API_KEY` - Vector database auth\n- `CRON_SECRET` - Cron job authentication\n\n**File Structure:**\n```\nrsvp-app/\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 app/           # Next.js app router\n\u2502   \u2502   \u251c\u2500\u2500 api/       # API routes\n\u2502   \u2502   \u251c\u2500\u2500 admin/     # Admin panel\n\u2502   \u2502   \u2514\u2500\u2500 (public)/  # Public pages\n\u2502   \u251c\u2500\u2500 components/    # React components\n\u2502   \u251c\u2500\u2500 lib/          # Utilities and services\n\u2502   \u2514\u2500\u2500 prisma/       # Database schema\n\u251c\u2500\u2500 public/           # Static assets\n\u2514\u2500\u2500 docs/            # Documentation\n```\n\n**Deployment:**\n- **Platform**: Vercel (frontend)\n- **Database**: Neon (PostgreSQL)\n- **AI Service**: Railway (planned)\n- **Vector DB**: Weaviate Cloud\n\n**Email Delivery:**\n- Resend API for email sending\n- Throttling support (emails per minute)\n- Smart sending windows\n- Timezone support\n- Recurring campaigns\n- Link and open tracking\n\n**AI Assistant (Juniper):**\n- Conversational interface\n- Real-time execution display\n- Tool integration for database operations\n- Context awareness\n- Error handling and recovery\n- Pattern-matching system (to be replaced with fine-tuned SLM)\n\nThis architecture provides a scalable, secure, and maintainable system for RSVP management and email campaigns."}
{"instruction": "View analytics and generate reports", "input": "Generate an audience report", "output": "I'll help you analyze your email performance. Here's what I can show you:\n\n**Campaign Analytics:**\n\n**CampaignSend Status Tracking:**\n```json\n{\n  \"id\": \"send-id\",\n  \"scheduleId\": \"schedule-id\",\n  \"groupId\": \"group-id\",\n  \"templateId\": \"template-id\",\n  \"businessId\": \"business-id\",\n  \"businessName\": \"Business Name\",\n  \"email\": \"email@example.com\",\n  \"inviteToken\": \"token\",\n  \"inviteLink\": \"https://example.com/l/token\",\n  \"resendMessageId\": \"resend-message-id\",\n  \"status\": \"SENT\",\n  \"error\": null,\n  \"meta\": {},\n  \"sentAt\": \"2025-01-15T10:00:00Z\",\n  \"openedAt\": \"2025-01-15T10:05:00Z\",\n  \"visitedAt\": \"2025-01-15T10:10:00Z\"\n}\n```\n\n**CampaignSend Status Values:**\n- `PENDING` - Not yet sent\n- `SENDING` - Currently being sent\n- `SENT` - Successfully sent\n- `FAILED` - Failed to send\n- `SKIPPED` - Skipped (e.g., unsubscribed)\n\n**Key Metrics:**\n- **Sent Count**: Total emails sent\n- **Open Rate**: Percentage of emails opened (openedAt not null)\n- **Click Rate**: Percentage of emails clicked (visitedAt not null)\n- **Bounce Rate**: Percentage of failed sends\n- **Unsubscribe Rate**: Percentage of unsubscribed members\n\n**Visit Tracking:**\n```json\n{\n  \"id\": \"visit-id\",\n  \"createdAt\": \"2025-01-15T10:00:00Z\",\n  \"visitorId\": \"visitor-id\",\n  \"sessionId\": \"session-id\",\n  \"path\": \"/event-page\",\n  \"query\": \"?utm_source=email\",\n  \"referrer\": \"https://example.com\",\n  \"eid\": \"event-id\",\n  \"utmSource\": \"email\",\n  \"utmMedium\": \"newsletter\",\n  \"utmCampaign\": \"summer-event\",\n  \"userAgent\": \"Mozilla/5.0...\",\n  \"language\": \"en-US\",\n  \"country\": \"Canada\",\n  \"region\": \"BC\",\n  \"city\": \"Vancouver\",\n  \"timeOnPageMs\": 30000,\n  \"scrollDepth\": 75\n}\n```\n\n**Analytics Endpoints:**\n- `GET /api/admin/campaign/dashboard` - Dashboard overview\n- `GET /api/admin/export` - Export data\n- `GET /api/l/[token]` - Track link clicks\n- `GET /api/__pixel` - Track email opens\n\n**Export Options:**\n- CSV format for RSVP data\n- JSON format for campaign data\n- Filtered by date range\n- Filtered by campaign/group\n\n**Performance Tracking:**\n- Email delivery rates\n- Open and click tracking\n- Geographic distribution\n- Device and browser analytics\n- Time-based performance\n- A/B testing results\n\nLet me generate the appropriate analytics report for your request."}
{"instruction": "Manage email campaigns", "input": "Resume a campaign", "output": "I'll help you manage your campaigns. Here are the available actions:\n\n**List Campaigns:**\n```\nGET /api/admin/campaign/campaigns\n```\n\n**Response:**\n```json\n{\n  \"campaigns\": [\n    {\n      \"id\": \"campaign-id\",\n      \"name\": \"Campaign Name\",\n      \"description\": \"Description\",\n      \"status\": \"DRAFT\",\n      \"meta\": {},\n      \"createdAt\": \"2025-01-15T10:00:00Z\",\n      \"updatedAt\": \"2025-01-15T10:00:00Z\",\n      \"schedules\": []\n    }\n  ]\n}\n```\n\n**Get Campaign Details:**\n```\nGET /api/admin/campaign/campaigns/[id]\n```\n\n**Update Campaign:**\n```\nPUT /api/admin/campaign/campaigns\n```\n\n**Request Body:**\n```json\n{\n  \"id\": \"campaign-id\",\n  \"name\": \"Updated Name\",\n  \"description\": \"Updated description\",\n  \"status\": \"SCHEDULED\",\n  \"steps\": []\n}\n```\n\n**Delete Campaign:**\n```\nDELETE /api/admin/campaign/campaigns/[id]\n```\n\n**Campaign Status Values:**\n- `DRAFT` - Not yet ready\n- `SCHEDULED` - Scheduled to send\n- `SENDING` - Currently sending\n- `PAUSED` - Paused\n- `COMPLETED` - Finished\n- `CANCELLED` - Cancelled\n\nLet me execute the appropriate action for your request."}
{"instruction": "View and manage RSVP data", "input": "What RSVPs do I have?", "output": "I'll help you view RSVP data. Here's what I can show you:\n\n**RSVP Data Structure:**\n```json\n{\n  \"id\": \"rsvp-id\",\n  \"fullName\": \"John Doe\",\n  \"organization\": \"Company Name\",\n  \"email\": \"john@example.com\",\n  \"phone\": \"+1234567890\",\n  \"attendanceStatus\": \"CONFIRMED\",\n  \"attendeeCount\": 2,\n  \"dietaryPreference\": \"VEGETARIAN\",\n  \"dietaryOther\": \"No nuts\",\n  \"accessibilityNeeds\": \"Wheelchair access\",\n  \"referralSource\": \"WEBSITE\",\n  \"referralOther\": \"Google search\",\n  \"wantsResources\": true,\n  \"wantsAudit\": false,\n  \"learningGoal\": \"Learn about new technologies\",\n  \"createdAt\": \"2025-01-15T10:00:00Z\",\n  \"visitorId\": \"visitor-id\",\n  \"sessionId\": \"session-id\",\n  \"referrer\": \"https://example.com\",\n  \"eid\": \"event-id\",\n  \"utmSource\": \"google\",\n  \"utmMedium\": \"cpc\",\n  \"utmCampaign\": \"summer-event\",\n  \"utmTerm\": \"tech conference\",\n  \"utmContent\": \"banner-ad\",\n  \"userAgent\": \"Mozilla/5.0...\",\n  \"language\": \"en-US\",\n  \"tz\": \"America/Vancouver\",\n  \"country\": \"Canada\",\n  \"region\": \"BC\",\n  \"city\": \"Vancouver\",\n  \"ipHash\": \"hashed-ip\",\n  \"screenW\": 1920,\n  \"screenH\": 1080,\n  \"dpr\": 2.0,\n  \"platform\": \"MacIntel\",\n  \"device\": \"desktop\",\n  \"browser\": \"Chrome\",\n  \"meta\": \"additional data\"\n}\n```\n\n**Key Fields:**\n- `attendanceStatus` (string) - CONFIRMED, CANCELLED, etc.\n- `attendeeCount` (number) - Number of attendees\n- `dietaryPreference` (string) - Dietary requirements\n- `accessibilityNeeds` (string) - Accessibility requirements\n- `referralSource` (string) - How they found the event\n- `wantsResources` (boolean) - Wants additional resources\n- `wantsAudit` (boolean) - Wants audit information\n- `learningGoal` (string) - What they want to learn\n\n**Tracking Data:**\n- `visitorId` - Unique visitor identifier\n- `sessionId` - Session identifier\n- `referrer` - Referring URL\n- `utmSource`, `utmMedium`, `utmCampaign`, `utmTerm`, `utmContent` - UTM tracking\n- `userAgent` - Browser information\n- `language` - User language\n- `tz` - Timezone\n- `country`, `region`, `city` - Geographic data\n- `ipHash` - Hashed IP address\n- `screenW`, `screenH`, `dpr` - Screen information\n- `platform`, `device`, `browser` - Device information\n\n**Database Constraints:**\n- `email` field is unique\n- `id` is primary key (cuid)\n\n**API Endpoint:**\n```\nPOST /api/rsvp\n```\n\n**Security Features:**\n- CSRF protection\n- Rate limiting\n- Input validation\n- Test detection\n- Security logging\n\nLet me show you the RSVP data based on your request."}
{"instruction": "Explain system architecture and technical details", "input": "How does the AI assistant work?", "output": "I'll explain the technical architecture of the RSVP system:\n\n**System Architecture:**\n\n**Frontend:**\n- **Framework**: Next.js 14 with React\n- **Styling**: Tailwind CSS\n- **Animations**: Framer Motion\n- **State Management**: React hooks (useState, useEffect)\n- **Authentication**: Session-based with cookies\n\n**Backend:**\n- **Runtime**: Node.js\n- **Framework**: Next.js API routes\n- **Database**: PostgreSQL with Prisma ORM\n- **Email Service**: Resend API\n- **Vector Database**: Weaviate (for RAG)\n- **AI Integration**: Gemini 2.5 Flash\n\n**Database Models:**\n- `RSVP` - Event RSVP submissions\n- `Visit` - Website visit tracking\n- `CampaignTemplate` - Email templates\n- `Campaign` - Email campaigns\n- `AudienceGroup` - Audience segmentation\n- `AudienceMember` - Individual audience members\n- `CampaignSchedule` - Campaign scheduling\n- `CampaignSend` - Individual email sends\n\n**API Structure:**\n- `/api/rsvp` - RSVP form submission\n- `/api/admin/campaign/campaigns` - Campaign management\n- `/api/admin/campaign/schedules` - Schedule management\n- `/api/admin/campaign/templates` - Template management\n- `/api/admin/campaign/groups` - Audience group management\n- `/api/admin/campaign/send` - Email sending\n- `/api/admin/export` - Data export\n- `/api/unsubscribe` - Unsubscribe handling\n- `/api/l/[token]` - Link tracking\n- `/api/__pixel` - Email open tracking\n\n**Security Features:**\n- CSRF protection with origin/referer validation\n- Rate limiting with IP fingerprinting\n- Input validation with Zod schemas\n- Test detection to prevent spam\n- Security logging for monitoring\n- Secure headers with CSP\n\n**Environment Variables:**\n- `DATABASE_URL` - PostgreSQL connection\n- `RESEND_API_KEY` - Email service\n- `GEMINI_API_KEY` - AI service\n- `WEAVIATE_URL` - Vector database\n- `WEAVIATE_API_KEY` - Vector database auth\n- `CRON_SECRET` - Cron job authentication\n\n**File Structure:**\n```\nrsvp-app/\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 app/           # Next.js app router\n\u2502   \u2502   \u251c\u2500\u2500 api/       # API routes\n\u2502   \u2502   \u251c\u2500\u2500 admin/     # Admin panel\n\u2502   \u2502   \u2514\u2500\u2500 (public)/  # Public pages\n\u2502   \u251c\u2500\u2500 components/    # React components\n\u2502   \u251c\u2500\u2500 lib/          # Utilities and services\n\u2502   \u2514\u2500\u2500 prisma/       # Database schema\n\u251c\u2500\u2500 public/           # Static assets\n\u2514\u2500\u2500 docs/            # Documentation\n```\n\n**Deployment:**\n- **Platform**: Vercel (frontend)\n- **Database**: Neon (PostgreSQL)\n- **AI Service**: Railway (planned)\n- **Vector DB**: Weaviate Cloud\n\n**Email Delivery:**\n- Resend API for email sending\n- Throttling support (emails per minute)\n- Smart sending windows\n- Timezone support\n- Recurring campaigns\n- Link and open tracking\n\n**AI Assistant (Juniper):**\n- Conversational interface\n- Real-time execution display\n- Tool integration for database operations\n- Context awareness\n- Error handling and recovery\n- Pattern-matching system (to be replaced with fine-tuned SLM)\n\nThis architecture provides a scalable, secure, and maintainable system for RSVP management and email campaigns."}
{"instruction": "Create a new email campaign", "input": "Set up a campaign for the holiday promotion", "output": "I'll help you create a new campaign. Based on your request, here's what I need:\n\n**Required Information:**\n1. **Campaign Name**: What should we call this campaign?\n2. **Steps**: Campaign steps with templateId, groupId, and scheduling\n\n**API Endpoint:**\n```\nPOST /api/admin/campaign/campaigns\n```\n\n**Request Body:**\n```json\n{\n  \"name\": \"Campaign Name\",\n  \"description\": \"Optional description\",\n  \"status\": \"DRAFT\",\n  \"steps\": [\n    {\n      \"templateId\": \"template-id\",\n      \"groupId\": \"audience-group-id\",\n      \"sendAt\": \"2025-01-15T10:00:00Z\",\n      \"stepOrder\": 1\n    }\n  ]\n}\n```\n\n**Campaign Status Options:**\n- `DRAFT` - Not yet ready to send\n- `SCHEDULED` - Scheduled for future send\n- `SENDING` - Currently being sent\n- `PAUSED` - Temporarily paused\n- `COMPLETED` - Finished sending\n- `CANCELLED` - Cancelled\n\n**Required Fields:**\n- `name` (string) - Campaign name\n- `steps` (array) - Array of campaign steps\n\n**Step Object Required Fields:**\n- `templateId` (string) - Email template ID\n- `groupId` (string) - Audience group ID\n- `stepOrder` (number) - Order of execution\n\n**Optional Step Fields:**\n- `sendAt` (ISO date string) - When to send\n- `throttlePerMinute` (number) - Email sending rate\n- `timeZone` (string) - Timezone for scheduling\n\nWould you like me to help you set up the campaign steps?"}
{"instruction": "Create and manage email templates", "input": "I need a template for RSVP confirmations", "output": "I'll help you create a new email template. Here's what I need:\n\n**Required Information:**\n1. **Template Name**: What should we call this template?\n2. **Subject**: Email subject line\n3. **HTML Body**: Rich HTML content\n4. **Text Body**: Plain text version (optional)\n\n**API Endpoint:**\n```\nPOST /api/admin/campaign/templates\n```\n\n**Request Body:**\n```json\n{\n  \"name\": \"Template Name\",\n  \"subject\": \"Email Subject\",\n  \"htmlBody\": \"<h1>Hello {name}</h1><p>Content here</p>\",\n  \"textBody\": \"Hello {name}\\n\\nContent here\",\n  \"meta\": {},\n  \"greeting_title\": \"Welcome!\",\n  \"greeting_message\": \"Thank you for joining us\",\n  \"signature_name\": \"Your Name\",\n  \"signature_title\": \"Your Title\",\n  \"signature_company\": \"Your Company\",\n  \"signature_location\": \"Your Location\",\n  \"main_content_title\": \"Main Title\",\n  \"main_content_body\": \"Main content here\",\n  \"button_text\": \"Click Here\",\n  \"additional_info_title\": \"Additional Info\",\n  \"additional_info_body\": \"Additional details\",\n  \"closing_title\": \"Thank You\",\n  \"closing_message\": \"Best regards\"\n}\n```\n\n**Required Fields:**\n- `name` (string) - Template name\n- `subject` (string) - Email subject\n- `htmlBody` (string) - HTML content\n- `meta` (object) - Template metadata\n\n**Optional Fields:**\n- `textBody` (string) - Plain text version\n- `greeting_title` (string) - Greeting title\n- `greeting_message` (string) - Greeting message\n- `signature_name` (string) - Signature name\n- `signature_title` (string) - Signature title\n- `signature_company` (string) - Signature company\n- `signature_location` (string) - Signature location\n- `main_content_title` (string) - Main content title\n- `main_content_body` (string) - Main content body\n- `button_text` (string) - Button text\n- `additional_info_title` (string) - Additional info title\n- `additional_info_body` (string) - Additional info body\n- `closing_title` (string) - Closing title\n- `closing_message` (string) - Closing message\n\n**Template Variables:**\n- `{name}` - Recipient's name\n- `{email}` - Recipient's email\n- `{firstName}` - First name\n- `{lastName}` - Last name\n- `{unsubscribeUrl}` - Unsubscribe link\n\n**Response:**\n```json\n{\n  \"template\": {\n    \"id\": \"template-id\",\n    \"name\": \"Template Name\",\n    \"subject\": \"Email Subject\",\n    \"htmlBody\": \"<h1>Hello {name}</h1>\",\n    \"textBody\": \"Hello {name}\",\n    \"meta\": {},\n    \"createdAt\": \"2025-01-15T10:00:00Z\",\n    \"updatedAt\": \"2025-01-15T10:00:00Z\"\n  }\n}\n```\n\nWould you like me to help you create this template with some default content?"}
{"instruction": "Create and manage campaign schedules", "input": "Schedule for tomorrow", "output": "I'll help you create a campaign schedule. Here's what I need:\n\n**Required Information:**\n1. **Schedule Name**: What should we call this schedule?\n2. **Template ID**: Which email template to use?\n3. **Group ID**: Which audience group to target?\n\n**API Endpoint:**\n```\nPOST /api/admin/campaign/schedules\n```\n\n**Request Body:**\n```json\n{\n  \"name\": \"Schedule Name\",\n  \"templateId\": \"template-id\",\n  \"groupId\": \"audience-group-id\",\n  \"campaignId\": \"campaign-id\",\n  \"sendAt\": \"2025-01-15T10:00:00Z\",\n  \"throttlePerMinute\": 60,\n  \"repeatIntervalMins\": null,\n  \"stepOrder\": 1,\n  \"smartWindowStart\": \"2025-01-15T09:00:00Z\",\n  \"smartWindowEnd\": \"2025-01-15T17:00:00Z\",\n  \"timeZone\": \"America/Vancouver\",\n  \"status\": \"DRAFT\"\n}\n```\n\n**Required Fields:**\n- `name` (string) - Schedule name\n- `templateId` (string) - Email template ID\n- `groupId` (string) - Audience group ID\n\n**Optional Fields:**\n- `campaignId` (string) - Associated campaign ID\n- `sendAt` (ISO date string) - When to send (null for immediate)\n- `throttlePerMinute` (number) - Email sending rate (default: 60)\n- `repeatIntervalMins` (number) - Recurring interval in minutes\n- `stepOrder` (number) - Order in multi-step campaign (default: 1)\n- `smartWindowStart` (ISO date string) - Smart sending window start\n- `smartWindowEnd` (ISO date string) - Smart sending window end\n- `timeZone` (string) - Timezone (default: \"America/Vancouver\")\n- `status` (string) - Schedule status\n\n**Schedule Status Options:**\n- `DRAFT` - Not yet ready\n- `SCHEDULED` - Scheduled to send\n- `SENDING` - Currently sending\n- `PAUSED` - Paused\n- `COMPLETED` - Finished\n- `CANCELLED` - Cancelled\n\n**Response:**\n```json\n{\n  \"schedule\": {\n    \"id\": \"schedule-id\",\n    \"name\": \"Schedule Name\",\n    \"templateId\": \"template-id\",\n    \"groupId\": \"audience-group-id\",\n    \"status\": \"DRAFT\",\n    \"sendAt\": \"2025-01-15T10:00:00Z\",\n    \"timeZone\": \"America/Vancouver\",\n    \"throttlePerMinute\": 60,\n    \"createdAt\": \"2025-01-15T10:00:00Z\",\n    \"updatedAt\": \"2025-01-15T10:00:00Z\"\n  }\n}\n```\n\nWould you like me to help you set up the schedule details?"}
{"instruction": "Create a new email campaign", "input": "Create a new campaign", "output": "I'll help you create a new campaign. Based on your request, here's what I need:\n\n**Required Information:**\n1. **Campaign Name**: What should we call this campaign?\n2. **Steps**: Campaign steps with templateId, groupId, and scheduling\n\n**API Endpoint:**\n```\nPOST /api/admin/campaign/campaigns\n```\n\n**Request Body:**\n```json\n{\n  \"name\": \"Campaign Name\",\n  \"description\": \"Optional description\",\n  \"status\": \"DRAFT\",\n  \"steps\": [\n    {\n      \"templateId\": \"template-id\",\n      \"groupId\": \"audience-group-id\",\n      \"sendAt\": \"2025-01-15T10:00:00Z\",\n      \"stepOrder\": 1\n    }\n  ]\n}\n```\n\n**Campaign Status Options:**\n- `DRAFT` - Not yet ready to send\n- `SCHEDULED` - Scheduled for future send\n- `SENDING` - Currently being sent\n- `PAUSED` - Temporarily paused\n- `COMPLETED` - Finished sending\n- `CANCELLED` - Cancelled\n\n**Required Fields:**\n- `name` (string) - Campaign name\n- `steps` (array) - Array of campaign steps\n\n**Step Object Required Fields:**\n- `templateId` (string) - Email template ID\n- `groupId` (string) - Audience group ID\n- `stepOrder` (number) - Order of execution\n\n**Optional Step Fields:**\n- `sendAt` (ISO date string) - When to send\n- `throttlePerMinute` (number) - Email sending rate\n- `timeZone` (string) - Timezone for scheduling\n\nWould you like me to help you set up the campaign steps?"}
{"instruction": "View analytics and generate reports", "input": "What's the unsubscribe rate?", "output": "I'll help you analyze your email performance. Here's what I can show you:\n\n**Campaign Analytics:**\n\n**CampaignSend Status Tracking:**\n```json\n{\n  \"id\": \"send-id\",\n  \"scheduleId\": \"schedule-id\",\n  \"groupId\": \"group-id\",\n  \"templateId\": \"template-id\",\n  \"businessId\": \"business-id\",\n  \"businessName\": \"Business Name\",\n  \"email\": \"email@example.com\",\n  \"inviteToken\": \"token\",\n  \"inviteLink\": \"https://example.com/l/token\",\n  \"resendMessageId\": \"resend-message-id\",\n  \"status\": \"SENT\",\n  \"error\": null,\n  \"meta\": {},\n  \"sentAt\": \"2025-01-15T10:00:00Z\",\n  \"openedAt\": \"2025-01-15T10:05:00Z\",\n  \"visitedAt\": \"2025-01-15T10:10:00Z\"\n}\n```\n\n**CampaignSend Status Values:**\n- `PENDING` - Not yet sent\n- `SENDING` - Currently being sent\n- `SENT` - Successfully sent\n- `FAILED` - Failed to send\n- `SKIPPED` - Skipped (e.g., unsubscribed)\n\n**Key Metrics:**\n- **Sent Count**: Total emails sent\n- **Open Rate**: Percentage of emails opened (openedAt not null)\n- **Click Rate**: Percentage of emails clicked (visitedAt not null)\n- **Bounce Rate**: Percentage of failed sends\n- **Unsubscribe Rate**: Percentage of unsubscribed members\n\n**Visit Tracking:**\n```json\n{\n  \"id\": \"visit-id\",\n  \"createdAt\": \"2025-01-15T10:00:00Z\",\n  \"visitorId\": \"visitor-id\",\n  \"sessionId\": \"session-id\",\n  \"path\": \"/event-page\",\n  \"query\": \"?utm_source=email\",\n  \"referrer\": \"https://example.com\",\n  \"eid\": \"event-id\",\n  \"utmSource\": \"email\",\n  \"utmMedium\": \"newsletter\",\n  \"utmCampaign\": \"summer-event\",\n  \"userAgent\": \"Mozilla/5.0...\",\n  \"language\": \"en-US\",\n  \"country\": \"Canada\",\n  \"region\": \"BC\",\n  \"city\": \"Vancouver\",\n  \"timeOnPageMs\": 30000,\n  \"scrollDepth\": 75\n}\n```\n\n**Analytics Endpoints:**\n- `GET /api/admin/campaign/dashboard` - Dashboard overview\n- `GET /api/admin/export` - Export data\n- `GET /api/l/[token]` - Track link clicks\n- `GET /api/__pixel` - Track email opens\n\n**Export Options:**\n- CSV format for RSVP data\n- JSON format for campaign data\n- Filtered by date range\n- Filtered by campaign/group\n\n**Performance Tracking:**\n- Email delivery rates\n- Open and click tracking\n- Geographic distribution\n- Device and browser analytics\n- Time-based performance\n- A/B testing results\n\nLet me generate the appropriate analytics report for your request."}
{"instruction": "Manage email campaigns", "input": "Show campaign status", "output": "I'll help you manage your campaigns. Here are the available actions:\n\n**List Campaigns:**\n```\nGET /api/admin/campaign/campaigns\n```\n\n**Response:**\n```json\n{\n  \"campaigns\": [\n    {\n      \"id\": \"campaign-id\",\n      \"name\": \"Campaign Name\",\n      \"description\": \"Description\",\n      \"status\": \"DRAFT\",\n      \"meta\": {},\n      \"createdAt\": \"2025-01-15T10:00:00Z\",\n      \"updatedAt\": \"2025-01-15T10:00:00Z\",\n      \"schedules\": []\n    }\n  ]\n}\n```\n\n**Get Campaign Details:**\n```\nGET /api/admin/campaign/campaigns/[id]\n```\n\n**Update Campaign:**\n```\nPUT /api/admin/campaign/campaigns\n```\n\n**Request Body:**\n```json\n{\n  \"id\": \"campaign-id\",\n  \"name\": \"Updated Name\",\n  \"description\": \"Updated description\",\n  \"status\": \"SCHEDULED\",\n  \"steps\": []\n}\n```\n\n**Delete Campaign:**\n```\nDELETE /api/admin/campaign/campaigns/[id]\n```\n\n**Campaign Status Values:**\n- `DRAFT` - Not yet ready\n- `SCHEDULED` - Scheduled to send\n- `SENDING` - Currently sending\n- `PAUSED` - Paused\n- `COMPLETED` - Finished\n- `CANCELLED` - Cancelled\n\nLet me execute the appropriate action for your request."}
{"instruction": "View analytics and generate reports", "input": "What's the click-through rate?", "output": "I'll help you analyze your email performance. Here's what I can show you:\n\n**Campaign Analytics:**\n\n**CampaignSend Status Tracking:**\n```json\n{\n  \"id\": \"send-id\",\n  \"scheduleId\": \"schedule-id\",\n  \"groupId\": \"group-id\",\n  \"templateId\": \"template-id\",\n  \"businessId\": \"business-id\",\n  \"businessName\": \"Business Name\",\n  \"email\": \"email@example.com\",\n  \"inviteToken\": \"token\",\n  \"inviteLink\": \"https://example.com/l/token\",\n  \"resendMessageId\": \"resend-message-id\",\n  \"status\": \"SENT\",\n  \"error\": null,\n  \"meta\": {},\n  \"sentAt\": \"2025-01-15T10:00:00Z\",\n  \"openedAt\": \"2025-01-15T10:05:00Z\",\n  \"visitedAt\": \"2025-01-15T10:10:00Z\"\n}\n```\n\n**CampaignSend Status Values:**\n- `PENDING` - Not yet sent\n- `SENDING` - Currently being sent\n- `SENT` - Successfully sent\n- `FAILED` - Failed to send\n- `SKIPPED` - Skipped (e.g., unsubscribed)\n\n**Key Metrics:**\n- **Sent Count**: Total emails sent\n- **Open Rate**: Percentage of emails opened (openedAt not null)\n- **Click Rate**: Percentage of emails clicked (visitedAt not null)\n- **Bounce Rate**: Percentage of failed sends\n- **Unsubscribe Rate**: Percentage of unsubscribed members\n\n**Visit Tracking:**\n```json\n{\n  \"id\": \"visit-id\",\n  \"createdAt\": \"2025-01-15T10:00:00Z\",\n  \"visitorId\": \"visitor-id\",\n  \"sessionId\": \"session-id\",\n  \"path\": \"/event-page\",\n  \"query\": \"?utm_source=email\",\n  \"referrer\": \"https://example.com\",\n  \"eid\": \"event-id\",\n  \"utmSource\": \"email\",\n  \"utmMedium\": \"newsletter\",\n  \"utmCampaign\": \"summer-event\",\n  \"userAgent\": \"Mozilla/5.0...\",\n  \"language\": \"en-US\",\n  \"country\": \"Canada\",\n  \"region\": \"BC\",\n  \"city\": \"Vancouver\",\n  \"timeOnPageMs\": 30000,\n  \"scrollDepth\": 75\n}\n```\n\n**Analytics Endpoints:**\n- `GET /api/admin/campaign/dashboard` - Dashboard overview\n- `GET /api/admin/export` - Export data\n- `GET /api/l/[token]` - Track link clicks\n- `GET /api/__pixel` - Track email opens\n\n**Export Options:**\n- CSV format for RSVP data\n- JSON format for campaign data\n- Filtered by date range\n- Filtered by campaign/group\n\n**Performance Tracking:**\n- Email delivery rates\n- Open and click tracking\n- Geographic distribution\n- Device and browser analytics\n- Time-based performance\n- A/B testing results\n\nLet me generate the appropriate analytics report for your request."}
{"instruction": "View and manage RSVP data", "input": "Show referral sources", "output": "I'll help you view RSVP data. Here's what I can show you:\n\n**RSVP Data Structure:**\n```json\n{\n  \"id\": \"rsvp-id\",\n  \"fullName\": \"John Doe\",\n  \"organization\": \"Company Name\",\n  \"email\": \"john@example.com\",\n  \"phone\": \"+1234567890\",\n  \"attendanceStatus\": \"CONFIRMED\",\n  \"attendeeCount\": 2,\n  \"dietaryPreference\": \"VEGETARIAN\",\n  \"dietaryOther\": \"No nuts\",\n  \"accessibilityNeeds\": \"Wheelchair access\",\n  \"referralSource\": \"WEBSITE\",\n  \"referralOther\": \"Google search\",\n  \"wantsResources\": true,\n  \"wantsAudit\": false,\n  \"learningGoal\": \"Learn about new technologies\",\n  \"createdAt\": \"2025-01-15T10:00:00Z\",\n  \"visitorId\": \"visitor-id\",\n  \"sessionId\": \"session-id\",\n  \"referrer\": \"https://example.com\",\n  \"eid\": \"event-id\",\n  \"utmSource\": \"google\",\n  \"utmMedium\": \"cpc\",\n  \"utmCampaign\": \"summer-event\",\n  \"utmTerm\": \"tech conference\",\n  \"utmContent\": \"banner-ad\",\n  \"userAgent\": \"Mozilla/5.0...\",\n  \"language\": \"en-US\",\n  \"tz\": \"America/Vancouver\",\n  \"country\": \"Canada\",\n  \"region\": \"BC\",\n  \"city\": \"Vancouver\",\n  \"ipHash\": \"hashed-ip\",\n  \"screenW\": 1920,\n  \"screenH\": 1080,\n  \"dpr\": 2.0,\n  \"platform\": \"MacIntel\",\n  \"device\": \"desktop\",\n  \"browser\": \"Chrome\",\n  \"meta\": \"additional data\"\n}\n```\n\n**Key Fields:**\n- `attendanceStatus` (string) - CONFIRMED, CANCELLED, etc.\n- `attendeeCount` (number) - Number of attendees\n- `dietaryPreference` (string) - Dietary requirements\n- `accessibilityNeeds` (string) - Accessibility requirements\n- `referralSource` (string) - How they found the event\n- `wantsResources` (boolean) - Wants additional resources\n- `wantsAudit` (boolean) - Wants audit information\n- `learningGoal` (string) - What they want to learn\n\n**Tracking Data:**\n- `visitorId` - Unique visitor identifier\n- `sessionId` - Session identifier\n- `referrer` - Referring URL\n- `utmSource`, `utmMedium`, `utmCampaign`, `utmTerm`, `utmContent` - UTM tracking\n- `userAgent` - Browser information\n- `language` - User language\n- `tz` - Timezone\n- `country`, `region`, `city` - Geographic data\n- `ipHash` - Hashed IP address\n- `screenW`, `screenH`, `dpr` - Screen information\n- `platform`, `device`, `browser` - Device information\n\n**Database Constraints:**\n- `email` field is unique\n- `id` is primary key (cuid)\n\n**API Endpoint:**\n```\nPOST /api/rsvp\n```\n\n**Security Features:**\n- CSRF protection\n- Rate limiting\n- Input validation\n- Test detection\n- Security logging\n\nLet me show you the RSVP data based on your request."}
{"instruction": "Manage email campaigns", "input": "Delete a campaign", "output": "I'll help you manage your campaigns. Here are the available actions:\n\n**List Campaigns:**\n```\nGET /api/admin/campaign/campaigns\n```\n\n**Response:**\n```json\n{\n  \"campaigns\": [\n    {\n      \"id\": \"campaign-id\",\n      \"name\": \"Campaign Name\",\n      \"description\": \"Description\",\n      \"status\": \"DRAFT\",\n      \"meta\": {},\n      \"createdAt\": \"2025-01-15T10:00:00Z\",\n      \"updatedAt\": \"2025-01-15T10:00:00Z\",\n      \"schedules\": []\n    }\n  ]\n}\n```\n\n**Get Campaign Details:**\n```\nGET /api/admin/campaign/campaigns/[id]\n```\n\n**Update Campaign:**\n```\nPUT /api/admin/campaign/campaigns\n```\n\n**Request Body:**\n```json\n{\n  \"id\": \"campaign-id\",\n  \"name\": \"Updated Name\",\n  \"description\": \"Updated description\",\n  \"status\": \"SCHEDULED\",\n  \"steps\": []\n}\n```\n\n**Delete Campaign:**\n```\nDELETE /api/admin/campaign/campaigns/[id]\n```\n\n**Campaign Status Values:**\n- `DRAFT` - Not yet ready\n- `SCHEDULED` - Scheduled to send\n- `SENDING` - Currently sending\n- `PAUSED` - Paused\n- `COMPLETED` - Finished\n- `CANCELLED` - Cancelled\n\nLet me execute the appropriate action for your request."}
{"instruction": "Explain system architecture and technical details", "input": "How does authentication work?", "output": "I'll explain the technical architecture of the RSVP system:\n\n**System Architecture:**\n\n**Frontend:**\n- **Framework**: Next.js 14 with React\n- **Styling**: Tailwind CSS\n- **Animations**: Framer Motion\n- **State Management**: React hooks (useState, useEffect)\n- **Authentication**: Session-based with cookies\n\n**Backend:**\n- **Runtime**: Node.js\n- **Framework**: Next.js API routes\n- **Database**: PostgreSQL with Prisma ORM\n- **Email Service**: Resend API\n- **Vector Database**: Weaviate (for RAG)\n- **AI Integration**: Gemini 2.5 Flash\n\n**Database Models:**\n- `RSVP` - Event RSVP submissions\n- `Visit` - Website visit tracking\n- `CampaignTemplate` - Email templates\n- `Campaign` - Email campaigns\n- `AudienceGroup` - Audience segmentation\n- `AudienceMember` - Individual audience members\n- `CampaignSchedule` - Campaign scheduling\n- `CampaignSend` - Individual email sends\n\n**API Structure:**\n- `/api/rsvp` - RSVP form submission\n- `/api/admin/campaign/campaigns` - Campaign management\n- `/api/admin/campaign/schedules` - Schedule management\n- `/api/admin/campaign/templates` - Template management\n- `/api/admin/campaign/groups` - Audience group management\n- `/api/admin/campaign/send` - Email sending\n- `/api/admin/export` - Data export\n- `/api/unsubscribe` - Unsubscribe handling\n- `/api/l/[token]` - Link tracking\n- `/api/__pixel` - Email open tracking\n\n**Security Features:**\n- CSRF protection with origin/referer validation\n- Rate limiting with IP fingerprinting\n- Input validation with Zod schemas\n- Test detection to prevent spam\n- Security logging for monitoring\n- Secure headers with CSP\n\n**Environment Variables:**\n- `DATABASE_URL` - PostgreSQL connection\n- `RESEND_API_KEY` - Email service\n- `GEMINI_API_KEY` - AI service\n- `WEAVIATE_URL` - Vector database\n- `WEAVIATE_API_KEY` - Vector database auth\n- `CRON_SECRET` - Cron job authentication\n\n**File Structure:**\n```\nrsvp-app/\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 app/           # Next.js app router\n\u2502   \u2502   \u251c\u2500\u2500 api/       # API routes\n\u2502   \u2502   \u251c\u2500\u2500 admin/     # Admin panel\n\u2502   \u2502   \u2514\u2500\u2500 (public)/  # Public pages\n\u2502   \u251c\u2500\u2500 components/    # React components\n\u2502   \u251c\u2500\u2500 lib/          # Utilities and services\n\u2502   \u2514\u2500\u2500 prisma/       # Database schema\n\u251c\u2500\u2500 public/           # Static assets\n\u2514\u2500\u2500 docs/            # Documentation\n```\n\n**Deployment:**\n- **Platform**: Vercel (frontend)\n- **Database**: Neon (PostgreSQL)\n- **AI Service**: Railway (planned)\n- **Vector DB**: Weaviate Cloud\n\n**Email Delivery:**\n- Resend API for email sending\n- Throttling support (emails per minute)\n- Smart sending windows\n- Timezone support\n- Recurring campaigns\n- Link and open tracking\n\n**AI Assistant (Juniper):**\n- Conversational interface\n- Real-time execution display\n- Tool integration for database operations\n- Context awareness\n- Error handling and recovery\n- Pattern-matching system (to be replaced with fine-tuned SLM)\n\nThis architecture provides a scalable, secure, and maintainable system for RSVP management and email campaigns."}
{"instruction": "Explain system architecture and technical details", "input": "Explain the API structure", "output": "I'll explain the technical architecture of the RSVP system:\n\n**System Architecture:**\n\n**Frontend:**\n- **Framework**: Next.js 14 with React\n- **Styling**: Tailwind CSS\n- **Animations**: Framer Motion\n- **State Management**: React hooks (useState, useEffect)\n- **Authentication**: Session-based with cookies\n\n**Backend:**\n- **Runtime**: Node.js\n- **Framework**: Next.js API routes\n- **Database**: PostgreSQL with Prisma ORM\n- **Email Service**: Resend API\n- **Vector Database**: Weaviate (for RAG)\n- **AI Integration**: Gemini 2.5 Flash\n\n**Database Models:**\n- `RSVP` - Event RSVP submissions\n- `Visit` - Website visit tracking\n- `CampaignTemplate` - Email templates\n- `Campaign` - Email campaigns\n- `AudienceGroup` - Audience segmentation\n- `AudienceMember` - Individual audience members\n- `CampaignSchedule` - Campaign scheduling\n- `CampaignSend` - Individual email sends\n\n**API Structure:**\n- `/api/rsvp` - RSVP form submission\n- `/api/admin/campaign/campaigns` - Campaign management\n- `/api/admin/campaign/schedules` - Schedule management\n- `/api/admin/campaign/templates` - Template management\n- `/api/admin/campaign/groups` - Audience group management\n- `/api/admin/campaign/send` - Email sending\n- `/api/admin/export` - Data export\n- `/api/unsubscribe` - Unsubscribe handling\n- `/api/l/[token]` - Link tracking\n- `/api/__pixel` - Email open tracking\n\n**Security Features:**\n- CSRF protection with origin/referer validation\n- Rate limiting with IP fingerprinting\n- Input validation with Zod schemas\n- Test detection to prevent spam\n- Security logging for monitoring\n- Secure headers with CSP\n\n**Environment Variables:**\n- `DATABASE_URL` - PostgreSQL connection\n- `RESEND_API_KEY` - Email service\n- `GEMINI_API_KEY` - AI service\n- `WEAVIATE_URL` - Vector database\n- `WEAVIATE_API_KEY` - Vector database auth\n- `CRON_SECRET` - Cron job authentication\n\n**File Structure:**\n```\nrsvp-app/\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 app/           # Next.js app router\n\u2502   \u2502   \u251c\u2500\u2500 api/       # API routes\n\u2502   \u2502   \u251c\u2500\u2500 admin/     # Admin panel\n\u2502   \u2502   \u2514\u2500\u2500 (public)/  # Public pages\n\u2502   \u251c\u2500\u2500 components/    # React components\n\u2502   \u251c\u2500\u2500 lib/          # Utilities and services\n\u2502   \u2514\u2500\u2500 prisma/       # Database schema\n\u251c\u2500\u2500 public/           # Static assets\n\u2514\u2500\u2500 docs/            # Documentation\n```\n\n**Deployment:**\n- **Platform**: Vercel (frontend)\n- **Database**: Neon (PostgreSQL)\n- **AI Service**: Railway (planned)\n- **Vector DB**: Weaviate Cloud\n\n**Email Delivery:**\n- Resend API for email sending\n- Throttling support (emails per minute)\n- Smart sending windows\n- Timezone support\n- Recurring campaigns\n- Link and open tracking\n\n**AI Assistant (Juniper):**\n- Conversational interface\n- Real-time execution display\n- Tool integration for database operations\n- Context awareness\n- Error handling and recovery\n- Pattern-matching system (to be replaced with fine-tuned SLM)\n\nThis architecture provides a scalable, secure, and maintainable system for RSVP management and email campaigns."}
{"instruction": "Create and manage email templates", "input": "Create a template for event invitations", "output": "I'll help you create a new email template. Here's what I need:\n\n**Required Information:**\n1. **Template Name**: What should we call this template?\n2. **Subject**: Email subject line\n3. **HTML Body**: Rich HTML content\n4. **Text Body**: Plain text version (optional)\n\n**API Endpoint:**\n```\nPOST /api/admin/campaign/templates\n```\n\n**Request Body:**\n```json\n{\n  \"name\": \"Template Name\",\n  \"subject\": \"Email Subject\",\n  \"htmlBody\": \"<h1>Hello {name}</h1><p>Content here</p>\",\n  \"textBody\": \"Hello {name}\\n\\nContent here\",\n  \"meta\": {},\n  \"greeting_title\": \"Welcome!\",\n  \"greeting_message\": \"Thank you for joining us\",\n  \"signature_name\": \"Your Name\",\n  \"signature_title\": \"Your Title\",\n  \"signature_company\": \"Your Company\",\n  \"signature_location\": \"Your Location\",\n  \"main_content_title\": \"Main Title\",\n  \"main_content_body\": \"Main content here\",\n  \"button_text\": \"Click Here\",\n  \"additional_info_title\": \"Additional Info\",\n  \"additional_info_body\": \"Additional details\",\n  \"closing_title\": \"Thank You\",\n  \"closing_message\": \"Best regards\"\n}\n```\n\n**Required Fields:**\n- `name` (string) - Template name\n- `subject` (string) - Email subject\n- `htmlBody` (string) - HTML content\n- `meta` (object) - Template metadata\n\n**Optional Fields:**\n- `textBody` (string) - Plain text version\n- `greeting_title` (string) - Greeting title\n- `greeting_message` (string) - Greeting message\n- `signature_name` (string) - Signature name\n- `signature_title` (string) - Signature title\n- `signature_company` (string) - Signature company\n- `signature_location` (string) - Signature location\n- `main_content_title` (string) - Main content title\n- `main_content_body` (string) - Main content body\n- `button_text` (string) - Button text\n- `additional_info_title` (string) - Additional info title\n- `additional_info_body` (string) - Additional info body\n- `closing_title` (string) - Closing title\n- `closing_message` (string) - Closing message\n\n**Template Variables:**\n- `{name}` - Recipient's name\n- `{email}` - Recipient's email\n- `{firstName}` - First name\n- `{lastName}` - Last name\n- `{unsubscribeUrl}` - Unsubscribe link\n\n**Response:**\n```json\n{\n  \"template\": {\n    \"id\": \"template-id\",\n    \"name\": \"Template Name\",\n    \"subject\": \"Email Subject\",\n    \"htmlBody\": \"<h1>Hello {name}</h1>\",\n    \"textBody\": \"Hello {name}\",\n    \"meta\": {},\n    \"createdAt\": \"2025-01-15T10:00:00Z\",\n    \"updatedAt\": \"2025-01-15T10:00:00Z\"\n  }\n}\n```\n\nWould you like me to help you create this template with some default content?"}
{"instruction": "Create and manage email templates", "input": "Create a new email template", "output": "I'll help you create a new email template. Here's what I need:\n\n**Required Information:**\n1. **Template Name**: What should we call this template?\n2. **Subject**: Email subject line\n3. **HTML Body**: Rich HTML content\n4. **Text Body**: Plain text version (optional)\n\n**API Endpoint:**\n```\nPOST /api/admin/campaign/templates\n```\n\n**Request Body:**\n```json\n{\n  \"name\": \"Template Name\",\n  \"subject\": \"Email Subject\",\n  \"htmlBody\": \"<h1>Hello {name}</h1><p>Content here</p>\",\n  \"textBody\": \"Hello {name}\\n\\nContent here\",\n  \"meta\": {},\n  \"greeting_title\": \"Welcome!\",\n  \"greeting_message\": \"Thank you for joining us\",\n  \"signature_name\": \"Your Name\",\n  \"signature_title\": \"Your Title\",\n  \"signature_company\": \"Your Company\",\n  \"signature_location\": \"Your Location\",\n  \"main_content_title\": \"Main Title\",\n  \"main_content_body\": \"Main content here\",\n  \"button_text\": \"Click Here\",\n  \"additional_info_title\": \"Additional Info\",\n  \"additional_info_body\": \"Additional details\",\n  \"closing_title\": \"Thank You\",\n  \"closing_message\": \"Best regards\"\n}\n```\n\n**Required Fields:**\n- `name` (string) - Template name\n- `subject` (string) - Email subject\n- `htmlBody` (string) - HTML content\n- `meta` (object) - Template metadata\n\n**Optional Fields:**\n- `textBody` (string) - Plain text version\n- `greeting_title` (string) - Greeting title\n- `greeting_message` (string) - Greeting message\n- `signature_name` (string) - Signature name\n- `signature_title` (string) - Signature title\n- `signature_company` (string) - Signature company\n- `signature_location` (string) - Signature location\n- `main_content_title` (string) - Main content title\n- `main_content_body` (string) - Main content body\n- `button_text` (string) - Button text\n- `additional_info_title` (string) - Additional info title\n- `additional_info_body` (string) - Additional info body\n- `closing_title` (string) - Closing title\n- `closing_message` (string) - Closing message\n\n**Template Variables:**\n- `{name}` - Recipient's name\n- `{email}` - Recipient's email\n- `{firstName}` - First name\n- `{lastName}` - Last name\n- `{unsubscribeUrl}` - Unsubscribe link\n\n**Response:**\n```json\n{\n  \"template\": {\n    \"id\": \"template-id\",\n    \"name\": \"Template Name\",\n    \"subject\": \"Email Subject\",\n    \"htmlBody\": \"<h1>Hello {name}</h1>\",\n    \"textBody\": \"Hello {name}\",\n    \"meta\": {},\n    \"createdAt\": \"2025-01-15T10:00:00Z\",\n    \"updatedAt\": \"2025-01-15T10:00:00Z\"\n  }\n}\n```\n\nWould you like me to help you create this template with some default content?"}
{"instruction": "Create and manage campaign schedules", "input": "Set up multi-step campaign", "output": "I'll help you create a campaign schedule. Here's what I need:\n\n**Required Information:**\n1. **Schedule Name**: What should we call this schedule?\n2. **Template ID**: Which email template to use?\n3. **Group ID**: Which audience group to target?\n\n**API Endpoint:**\n```\nPOST /api/admin/campaign/schedules\n```\n\n**Request Body:**\n```json\n{\n  \"name\": \"Schedule Name\",\n  \"templateId\": \"template-id\",\n  \"groupId\": \"audience-group-id\",\n  \"campaignId\": \"campaign-id\",\n  \"sendAt\": \"2025-01-15T10:00:00Z\",\n  \"throttlePerMinute\": 60,\n  \"repeatIntervalMins\": null,\n  \"stepOrder\": 1,\n  \"smartWindowStart\": \"2025-01-15T09:00:00Z\",\n  \"smartWindowEnd\": \"2025-01-15T17:00:00Z\",\n  \"timeZone\": \"America/Vancouver\",\n  \"status\": \"DRAFT\"\n}\n```\n\n**Required Fields:**\n- `name` (string) - Schedule name\n- `templateId` (string) - Email template ID\n- `groupId` (string) - Audience group ID\n\n**Optional Fields:**\n- `campaignId` (string) - Associated campaign ID\n- `sendAt` (ISO date string) - When to send (null for immediate)\n- `throttlePerMinute` (number) - Email sending rate (default: 60)\n- `repeatIntervalMins` (number) - Recurring interval in minutes\n- `stepOrder` (number) - Order in multi-step campaign (default: 1)\n- `smartWindowStart` (ISO date string) - Smart sending window start\n- `smartWindowEnd` (ISO date string) - Smart sending window end\n- `timeZone` (string) - Timezone (default: \"America/Vancouver\")\n- `status` (string) - Schedule status\n\n**Schedule Status Options:**\n- `DRAFT` - Not yet ready\n- `SCHEDULED` - Scheduled to send\n- `SENDING` - Currently sending\n- `PAUSED` - Paused\n- `COMPLETED` - Finished\n- `CANCELLED` - Cancelled\n\n**Response:**\n```json\n{\n  \"schedule\": {\n    \"id\": \"schedule-id\",\n    \"name\": \"Schedule Name\",\n    \"templateId\": \"template-id\",\n    \"groupId\": \"audience-group-id\",\n    \"status\": \"DRAFT\",\n    \"sendAt\": \"2025-01-15T10:00:00Z\",\n    \"timeZone\": \"America/Vancouver\",\n    \"throttlePerMinute\": 60,\n    \"createdAt\": \"2025-01-15T10:00:00Z\",\n    \"updatedAt\": \"2025-01-15T10:00:00Z\"\n  }\n}\n```\n\nWould you like me to help you set up the schedule details?"}
{"instruction": "Create and manage email templates", "input": "I want a template for newsletters", "output": "I'll help you create a new email template. Here's what I need:\n\n**Required Information:**\n1. **Template Name**: What should we call this template?\n2. **Subject**: Email subject line\n3. **HTML Body**: Rich HTML content\n4. **Text Body**: Plain text version (optional)\n\n**API Endpoint:**\n```\nPOST /api/admin/campaign/templates\n```\n\n**Request Body:**\n```json\n{\n  \"name\": \"Template Name\",\n  \"subject\": \"Email Subject\",\n  \"htmlBody\": \"<h1>Hello {name}</h1><p>Content here</p>\",\n  \"textBody\": \"Hello {name}\\n\\nContent here\",\n  \"meta\": {},\n  \"greeting_title\": \"Welcome!\",\n  \"greeting_message\": \"Thank you for joining us\",\n  \"signature_name\": \"Your Name\",\n  \"signature_title\": \"Your Title\",\n  \"signature_company\": \"Your Company\",\n  \"signature_location\": \"Your Location\",\n  \"main_content_title\": \"Main Title\",\n  \"main_content_body\": \"Main content here\",\n  \"button_text\": \"Click Here\",\n  \"additional_info_title\": \"Additional Info\",\n  \"additional_info_body\": \"Additional details\",\n  \"closing_title\": \"Thank You\",\n  \"closing_message\": \"Best regards\"\n}\n```\n\n**Required Fields:**\n- `name` (string) - Template name\n- `subject` (string) - Email subject\n- `htmlBody` (string) - HTML content\n- `meta` (object) - Template metadata\n\n**Optional Fields:**\n- `textBody` (string) - Plain text version\n- `greeting_title` (string) - Greeting title\n- `greeting_message` (string) - Greeting message\n- `signature_name` (string) - Signature name\n- `signature_title` (string) - Signature title\n- `signature_company` (string) - Signature company\n- `signature_location` (string) - Signature location\n- `main_content_title` (string) - Main content title\n- `main_content_body` (string) - Main content body\n- `button_text` (string) - Button text\n- `additional_info_title` (string) - Additional info title\n- `additional_info_body` (string) - Additional info body\n- `closing_title` (string) - Closing title\n- `closing_message` (string) - Closing message\n\n**Template Variables:**\n- `{name}` - Recipient's name\n- `{email}` - Recipient's email\n- `{firstName}` - First name\n- `{lastName}` - Last name\n- `{unsubscribeUrl}` - Unsubscribe link\n\n**Response:**\n```json\n{\n  \"template\": {\n    \"id\": \"template-id\",\n    \"name\": \"Template Name\",\n    \"subject\": \"Email Subject\",\n    \"htmlBody\": \"<h1>Hello {name}</h1>\",\n    \"textBody\": \"Hello {name}\",\n    \"meta\": {},\n    \"createdAt\": \"2025-01-15T10:00:00Z\",\n    \"updatedAt\": \"2025-01-15T10:00:00Z\"\n  }\n}\n```\n\nWould you like me to help you create this template with some default content?"}
{"instruction": "Create and manage audience groups", "input": "I need a group for tech professionals", "output": "I'll help you create a new audience group. Here's what I need:\n\n**Required Information:**\n1. **Group Name**: What should we call this group?\n2. **Description**: What does this group represent?\n\n**API Endpoint:**\n```\nPOST /api/admin/campaign/groups\n```\n\n**Request Body:**\n```json\n{\n  \"name\": \"Group Name\",\n  \"description\": \"Description of the group\",\n  \"color\": \"#10b981\",\n  \"criteria\": {\n    \"industry\": \"technology\",\n    \"engagement\": \"high\",\n    \"tags\": [\"vip\", \"premium\"]\n  },\n  \"meta\": {}\n}\n```\n\n**Required Fields:**\n- `name` (string) - Group name\n- `description` (string) - Group description\n- `criteria` (object) - Group criteria\n- `meta` (object) - Group metadata\n\n**Optional Fields:**\n- `color` (string) - Group color (default: \"#10b981\")\n\n**Response:**\n```json\n{\n  \"group\": {\n    \"id\": \"group-id\",\n    \"name\": \"Group Name\",\n    \"description\": \"Description\",\n    \"color\": \"#10b981\",\n    \"criteria\": {},\n    \"meta\": {},\n    \"createdAt\": \"2025-01-15T10:00:00Z\",\n    \"updatedAt\": \"2025-01-15T10:00:00Z\",\n    \"members\": []\n  }\n}\n```\n\n**Audience Member Structure:**\n```json\n{\n  \"id\": \"member-id\",\n  \"groupId\": \"group-id\",\n  \"businessId\": \"business-id\",\n  \"businessName\": \"Business Name\",\n  \"primaryEmail\": \"email@example.com\",\n  \"secondaryEmail\": \"secondary@example.com\",\n  \"tagsSnapshot\": [\"tag1\", \"tag2\"],\n  \"inviteToken\": \"token\",\n  \"meta\": {},\n  \"createdAt\": \"2025-01-15T10:00:00Z\",\n  \"unsubscribed\": false\n}\n```\n\n**Member Status:**\n- `unsubscribed` (boolean) - Whether member has unsubscribed\n\n**Database Constraints:**\n- Unique constraint on `[groupId, businessId]`\n- Indexes on `groupId` and `businessId`\n\nWould you like me to help you set up the group criteria?"}
{"instruction": "View and manage RSVP data", "input": "Show dietary preferences", "output": "I'll help you view RSVP data. Here's what I can show you:\n\n**RSVP Data Structure:**\n```json\n{\n  \"id\": \"rsvp-id\",\n  \"fullName\": \"John Doe\",\n  \"organization\": \"Company Name\",\n  \"email\": \"john@example.com\",\n  \"phone\": \"+1234567890\",\n  \"attendanceStatus\": \"CONFIRMED\",\n  \"attendeeCount\": 2,\n  \"dietaryPreference\": \"VEGETARIAN\",\n  \"dietaryOther\": \"No nuts\",\n  \"accessibilityNeeds\": \"Wheelchair access\",\n  \"referralSource\": \"WEBSITE\",\n  \"referralOther\": \"Google search\",\n  \"wantsResources\": true,\n  \"wantsAudit\": false,\n  \"learningGoal\": \"Learn about new technologies\",\n  \"createdAt\": \"2025-01-15T10:00:00Z\",\n  \"visitorId\": \"visitor-id\",\n  \"sessionId\": \"session-id\",\n  \"referrer\": \"https://example.com\",\n  \"eid\": \"event-id\",\n  \"utmSource\": \"google\",\n  \"utmMedium\": \"cpc\",\n  \"utmCampaign\": \"summer-event\",\n  \"utmTerm\": \"tech conference\",\n  \"utmContent\": \"banner-ad\",\n  \"userAgent\": \"Mozilla/5.0...\",\n  \"language\": \"en-US\",\n  \"tz\": \"America/Vancouver\",\n  \"country\": \"Canada\",\n  \"region\": \"BC\",\n  \"city\": \"Vancouver\",\n  \"ipHash\": \"hashed-ip\",\n  \"screenW\": 1920,\n  \"screenH\": 1080,\n  \"dpr\": 2.0,\n  \"platform\": \"MacIntel\",\n  \"device\": \"desktop\",\n  \"browser\": \"Chrome\",\n  \"meta\": \"additional data\"\n}\n```\n\n**Key Fields:**\n- `attendanceStatus` (string) - CONFIRMED, CANCELLED, etc.\n- `attendeeCount` (number) - Number of attendees\n- `dietaryPreference` (string) - Dietary requirements\n- `accessibilityNeeds` (string) - Accessibility requirements\n- `referralSource` (string) - How they found the event\n- `wantsResources` (boolean) - Wants additional resources\n- `wantsAudit` (boolean) - Wants audit information\n- `learningGoal` (string) - What they want to learn\n\n**Tracking Data:**\n- `visitorId` - Unique visitor identifier\n- `sessionId` - Session identifier\n- `referrer` - Referring URL\n- `utmSource`, `utmMedium`, `utmCampaign`, `utmTerm`, `utmContent` - UTM tracking\n- `userAgent` - Browser information\n- `language` - User language\n- `tz` - Timezone\n- `country`, `region`, `city` - Geographic data\n- `ipHash` - Hashed IP address\n- `screenW`, `screenH`, `dpr` - Screen information\n- `platform`, `device`, `browser` - Device information\n\n**Database Constraints:**\n- `email` field is unique\n- `id` is primary key (cuid)\n\n**API Endpoint:**\n```\nPOST /api/rsvp\n```\n\n**Security Features:**\n- CSRF protection\n- Rate limiting\n- Input validation\n- Test detection\n- Security logging\n\nLet me show you the RSVP data based on your request."}
{"instruction": "Create a new email campaign", "input": "I need to create a campaign for our summer sale", "output": "I'll help you create a new campaign. Based on your request, here's what I need:\n\n**Required Information:**\n1. **Campaign Name**: What should we call this campaign?\n2. **Steps**: Campaign steps with templateId, groupId, and scheduling\n\n**API Endpoint:**\n```\nPOST /api/admin/campaign/campaigns\n```\n\n**Request Body:**\n```json\n{\n  \"name\": \"Campaign Name\",\n  \"description\": \"Optional description\",\n  \"status\": \"DRAFT\",\n  \"steps\": [\n    {\n      \"templateId\": \"template-id\",\n      \"groupId\": \"audience-group-id\",\n      \"sendAt\": \"2025-01-15T10:00:00Z\",\n      \"stepOrder\": 1\n    }\n  ]\n}\n```\n\n**Campaign Status Options:**\n- `DRAFT` - Not yet ready to send\n- `SCHEDULED` - Scheduled for future send\n- `SENDING` - Currently being sent\n- `PAUSED` - Temporarily paused\n- `COMPLETED` - Finished sending\n- `CANCELLED` - Cancelled\n\n**Required Fields:**\n- `name` (string) - Campaign name\n- `steps` (array) - Array of campaign steps\n\n**Step Object Required Fields:**\n- `templateId` (string) - Email template ID\n- `groupId` (string) - Audience group ID\n- `stepOrder` (number) - Order of execution\n\n**Optional Step Fields:**\n- `sendAt` (ISO date string) - When to send\n- `throttlePerMinute` (number) - Email sending rate\n- `timeZone` (string) - Timezone for scheduling\n\nWould you like me to help you set up the campaign steps?"}
{"instruction": "Create and manage campaign schedules", "input": "Create immediate send schedule", "output": "I'll help you create a campaign schedule. Here's what I need:\n\n**Required Information:**\n1. **Schedule Name**: What should we call this schedule?\n2. **Template ID**: Which email template to use?\n3. **Group ID**: Which audience group to target?\n\n**API Endpoint:**\n```\nPOST /api/admin/campaign/schedules\n```\n\n**Request Body:**\n```json\n{\n  \"name\": \"Schedule Name\",\n  \"templateId\": \"template-id\",\n  \"groupId\": \"audience-group-id\",\n  \"campaignId\": \"campaign-id\",\n  \"sendAt\": \"2025-01-15T10:00:00Z\",\n  \"throttlePerMinute\": 60,\n  \"repeatIntervalMins\": null,\n  \"stepOrder\": 1,\n  \"smartWindowStart\": \"2025-01-15T09:00:00Z\",\n  \"smartWindowEnd\": \"2025-01-15T17:00:00Z\",\n  \"timeZone\": \"America/Vancouver\",\n  \"status\": \"DRAFT\"\n}\n```\n\n**Required Fields:**\n- `name` (string) - Schedule name\n- `templateId` (string) - Email template ID\n- `groupId` (string) - Audience group ID\n\n**Optional Fields:**\n- `campaignId` (string) - Associated campaign ID\n- `sendAt` (ISO date string) - When to send (null for immediate)\n- `throttlePerMinute` (number) - Email sending rate (default: 60)\n- `repeatIntervalMins` (number) - Recurring interval in minutes\n- `stepOrder` (number) - Order in multi-step campaign (default: 1)\n- `smartWindowStart` (ISO date string) - Smart sending window start\n- `smartWindowEnd` (ISO date string) - Smart sending window end\n- `timeZone` (string) - Timezone (default: \"America/Vancouver\")\n- `status` (string) - Schedule status\n\n**Schedule Status Options:**\n- `DRAFT` - Not yet ready\n- `SCHEDULED` - Scheduled to send\n- `SENDING` - Currently sending\n- `PAUSED` - Paused\n- `COMPLETED` - Finished\n- `CANCELLED` - Cancelled\n\n**Response:**\n```json\n{\n  \"schedule\": {\n    \"id\": \"schedule-id\",\n    \"name\": \"Schedule Name\",\n    \"templateId\": \"template-id\",\n    \"groupId\": \"audience-group-id\",\n    \"status\": \"DRAFT\",\n    \"sendAt\": \"2025-01-15T10:00:00Z\",\n    \"timeZone\": \"America/Vancouver\",\n    \"throttlePerMinute\": 60,\n    \"createdAt\": \"2025-01-15T10:00:00Z\",\n    \"updatedAt\": \"2025-01-15T10:00:00Z\"\n  }\n}\n```\n\nWould you like me to help you set up the schedule details?"}
{"instruction": "View analytics and generate reports", "input": "What's my email open rate?", "output": "I'll help you analyze your email performance. Here's what I can show you:\n\n**Campaign Analytics:**\n\n**CampaignSend Status Tracking:**\n```json\n{\n  \"id\": \"send-id\",\n  \"scheduleId\": \"schedule-id\",\n  \"groupId\": \"group-id\",\n  \"templateId\": \"template-id\",\n  \"businessId\": \"business-id\",\n  \"businessName\": \"Business Name\",\n  \"email\": \"email@example.com\",\n  \"inviteToken\": \"token\",\n  \"inviteLink\": \"https://example.com/l/token\",\n  \"resendMessageId\": \"resend-message-id\",\n  \"status\": \"SENT\",\n  \"error\": null,\n  \"meta\": {},\n  \"sentAt\": \"2025-01-15T10:00:00Z\",\n  \"openedAt\": \"2025-01-15T10:05:00Z\",\n  \"visitedAt\": \"2025-01-15T10:10:00Z\"\n}\n```\n\n**CampaignSend Status Values:**\n- `PENDING` - Not yet sent\n- `SENDING` - Currently being sent\n- `SENT` - Successfully sent\n- `FAILED` - Failed to send\n- `SKIPPED` - Skipped (e.g., unsubscribed)\n\n**Key Metrics:**\n- **Sent Count**: Total emails sent\n- **Open Rate**: Percentage of emails opened (openedAt not null)\n- **Click Rate**: Percentage of emails clicked (visitedAt not null)\n- **Bounce Rate**: Percentage of failed sends\n- **Unsubscribe Rate**: Percentage of unsubscribed members\n\n**Visit Tracking:**\n```json\n{\n  \"id\": \"visit-id\",\n  \"createdAt\": \"2025-01-15T10:00:00Z\",\n  \"visitorId\": \"visitor-id\",\n  \"sessionId\": \"session-id\",\n  \"path\": \"/event-page\",\n  \"query\": \"?utm_source=email\",\n  \"referrer\": \"https://example.com\",\n  \"eid\": \"event-id\",\n  \"utmSource\": \"email\",\n  \"utmMedium\": \"newsletter\",\n  \"utmCampaign\": \"summer-event\",\n  \"userAgent\": \"Mozilla/5.0...\",\n  \"language\": \"en-US\",\n  \"country\": \"Canada\",\n  \"region\": \"BC\",\n  \"city\": \"Vancouver\",\n  \"timeOnPageMs\": 30000,\n  \"scrollDepth\": 75\n}\n```\n\n**Analytics Endpoints:**\n- `GET /api/admin/campaign/dashboard` - Dashboard overview\n- `GET /api/admin/export` - Export data\n- `GET /api/l/[token]` - Track link clicks\n- `GET /api/__pixel` - Track email opens\n\n**Export Options:**\n- CSV format for RSVP data\n- JSON format for campaign data\n- Filtered by date range\n- Filtered by campaign/group\n\n**Performance Tracking:**\n- Email delivery rates\n- Open and click tracking\n- Geographic distribution\n- Device and browser analytics\n- Time-based performance\n- A/B testing results\n\nLet me generate the appropriate analytics report for your request."}
{"instruction": "Create and manage email templates", "input": "Make a template for thank you emails", "output": "I'll help you create a new email template. Here's what I need:\n\n**Required Information:**\n1. **Template Name**: What should we call this template?\n2. **Subject**: Email subject line\n3. **HTML Body**: Rich HTML content\n4. **Text Body**: Plain text version (optional)\n\n**API Endpoint:**\n```\nPOST /api/admin/campaign/templates\n```\n\n**Request Body:**\n```json\n{\n  \"name\": \"Template Name\",\n  \"subject\": \"Email Subject\",\n  \"htmlBody\": \"<h1>Hello {name}</h1><p>Content here</p>\",\n  \"textBody\": \"Hello {name}\\n\\nContent here\",\n  \"meta\": {},\n  \"greeting_title\": \"Welcome!\",\n  \"greeting_message\": \"Thank you for joining us\",\n  \"signature_name\": \"Your Name\",\n  \"signature_title\": \"Your Title\",\n  \"signature_company\": \"Your Company\",\n  \"signature_location\": \"Your Location\",\n  \"main_content_title\": \"Main Title\",\n  \"main_content_body\": \"Main content here\",\n  \"button_text\": \"Click Here\",\n  \"additional_info_title\": \"Additional Info\",\n  \"additional_info_body\": \"Additional details\",\n  \"closing_title\": \"Thank You\",\n  \"closing_message\": \"Best regards\"\n}\n```\n\n**Required Fields:**\n- `name` (string) - Template name\n- `subject` (string) - Email subject\n- `htmlBody` (string) - HTML content\n- `meta` (object) - Template metadata\n\n**Optional Fields:**\n- `textBody` (string) - Plain text version\n- `greeting_title` (string) - Greeting title\n- `greeting_message` (string) - Greeting message\n- `signature_name` (string) - Signature name\n- `signature_title` (string) - Signature title\n- `signature_company` (string) - Signature company\n- `signature_location` (string) - Signature location\n- `main_content_title` (string) - Main content title\n- `main_content_body` (string) - Main content body\n- `button_text` (string) - Button text\n- `additional_info_title` (string) - Additional info title\n- `additional_info_body` (string) - Additional info body\n- `closing_title` (string) - Closing title\n- `closing_message` (string) - Closing message\n\n**Template Variables:**\n- `{name}` - Recipient's name\n- `{email}` - Recipient's email\n- `{firstName}` - First name\n- `{lastName}` - Last name\n- `{unsubscribeUrl}` - Unsubscribe link\n\n**Response:**\n```json\n{\n  \"template\": {\n    \"id\": \"template-id\",\n    \"name\": \"Template Name\",\n    \"subject\": \"Email Subject\",\n    \"htmlBody\": \"<h1>Hello {name}</h1>\",\n    \"textBody\": \"Hello {name}\",\n    \"meta\": {},\n    \"createdAt\": \"2025-01-15T10:00:00Z\",\n    \"updatedAt\": \"2025-01-15T10:00:00Z\"\n  }\n}\n```\n\nWould you like me to help you create this template with some default content?"}
{"instruction": "View and manage RSVP data", "input": "Export RSVP to CSV", "output": "I'll help you view RSVP data. Here's what I can show you:\n\n**RSVP Data Structure:**\n```json\n{\n  \"id\": \"rsvp-id\",\n  \"fullName\": \"John Doe\",\n  \"organization\": \"Company Name\",\n  \"email\": \"john@example.com\",\n  \"phone\": \"+1234567890\",\n  \"attendanceStatus\": \"CONFIRMED\",\n  \"attendeeCount\": 2,\n  \"dietaryPreference\": \"VEGETARIAN\",\n  \"dietaryOther\": \"No nuts\",\n  \"accessibilityNeeds\": \"Wheelchair access\",\n  \"referralSource\": \"WEBSITE\",\n  \"referralOther\": \"Google search\",\n  \"wantsResources\": true,\n  \"wantsAudit\": false,\n  \"learningGoal\": \"Learn about new technologies\",\n  \"createdAt\": \"2025-01-15T10:00:00Z\",\n  \"visitorId\": \"visitor-id\",\n  \"sessionId\": \"session-id\",\n  \"referrer\": \"https://example.com\",\n  \"eid\": \"event-id\",\n  \"utmSource\": \"google\",\n  \"utmMedium\": \"cpc\",\n  \"utmCampaign\": \"summer-event\",\n  \"utmTerm\": \"tech conference\",\n  \"utmContent\": \"banner-ad\",\n  \"userAgent\": \"Mozilla/5.0...\",\n  \"language\": \"en-US\",\n  \"tz\": \"America/Vancouver\",\n  \"country\": \"Canada\",\n  \"region\": \"BC\",\n  \"city\": \"Vancouver\",\n  \"ipHash\": \"hashed-ip\",\n  \"screenW\": 1920,\n  \"screenH\": 1080,\n  \"dpr\": 2.0,\n  \"platform\": \"MacIntel\",\n  \"device\": \"desktop\",\n  \"browser\": \"Chrome\",\n  \"meta\": \"additional data\"\n}\n```\n\n**Key Fields:**\n- `attendanceStatus` (string) - CONFIRMED, CANCELLED, etc.\n- `attendeeCount` (number) - Number of attendees\n- `dietaryPreference` (string) - Dietary requirements\n- `accessibilityNeeds` (string) - Accessibility requirements\n- `referralSource` (string) - How they found the event\n- `wantsResources` (boolean) - Wants additional resources\n- `wantsAudit` (boolean) - Wants audit information\n- `learningGoal` (string) - What they want to learn\n\n**Tracking Data:**\n- `visitorId` - Unique visitor identifier\n- `sessionId` - Session identifier\n- `referrer` - Referring URL\n- `utmSource`, `utmMedium`, `utmCampaign`, `utmTerm`, `utmContent` - UTM tracking\n- `userAgent` - Browser information\n- `language` - User language\n- `tz` - Timezone\n- `country`, `region`, `city` - Geographic data\n- `ipHash` - Hashed IP address\n- `screenW`, `screenH`, `dpr` - Screen information\n- `platform`, `device`, `browser` - Device information\n\n**Database Constraints:**\n- `email` field is unique\n- `id` is primary key (cuid)\n\n**API Endpoint:**\n```\nPOST /api/rsvp\n```\n\n**Security Features:**\n- CSRF protection\n- Rate limiting\n- Input validation\n- Test detection\n- Security logging\n\nLet me show you the RSVP data based on your request."}
{"instruction": "View analytics and generate reports", "input": "Show me performance trends", "output": "I'll help you analyze your email performance. Here's what I can show you:\n\n**Campaign Analytics:**\n\n**CampaignSend Status Tracking:**\n```json\n{\n  \"id\": \"send-id\",\n  \"scheduleId\": \"schedule-id\",\n  \"groupId\": \"group-id\",\n  \"templateId\": \"template-id\",\n  \"businessId\": \"business-id\",\n  \"businessName\": \"Business Name\",\n  \"email\": \"email@example.com\",\n  \"inviteToken\": \"token\",\n  \"inviteLink\": \"https://example.com/l/token\",\n  \"resendMessageId\": \"resend-message-id\",\n  \"status\": \"SENT\",\n  \"error\": null,\n  \"meta\": {},\n  \"sentAt\": \"2025-01-15T10:00:00Z\",\n  \"openedAt\": \"2025-01-15T10:05:00Z\",\n  \"visitedAt\": \"2025-01-15T10:10:00Z\"\n}\n```\n\n**CampaignSend Status Values:**\n- `PENDING` - Not yet sent\n- `SENDING` - Currently being sent\n- `SENT` - Successfully sent\n- `FAILED` - Failed to send\n- `SKIPPED` - Skipped (e.g., unsubscribed)\n\n**Key Metrics:**\n- **Sent Count**: Total emails sent\n- **Open Rate**: Percentage of emails opened (openedAt not null)\n- **Click Rate**: Percentage of emails clicked (visitedAt not null)\n- **Bounce Rate**: Percentage of failed sends\n- **Unsubscribe Rate**: Percentage of unsubscribed members\n\n**Visit Tracking:**\n```json\n{\n  \"id\": \"visit-id\",\n  \"createdAt\": \"2025-01-15T10:00:00Z\",\n  \"visitorId\": \"visitor-id\",\n  \"sessionId\": \"session-id\",\n  \"path\": \"/event-page\",\n  \"query\": \"?utm_source=email\",\n  \"referrer\": \"https://example.com\",\n  \"eid\": \"event-id\",\n  \"utmSource\": \"email\",\n  \"utmMedium\": \"newsletter\",\n  \"utmCampaign\": \"summer-event\",\n  \"userAgent\": \"Mozilla/5.0...\",\n  \"language\": \"en-US\",\n  \"country\": \"Canada\",\n  \"region\": \"BC\",\n  \"city\": \"Vancouver\",\n  \"timeOnPageMs\": 30000,\n  \"scrollDepth\": 75\n}\n```\n\n**Analytics Endpoints:**\n- `GET /api/admin/campaign/dashboard` - Dashboard overview\n- `GET /api/admin/export` - Export data\n- `GET /api/l/[token]` - Track link clicks\n- `GET /api/__pixel` - Track email opens\n\n**Export Options:**\n- CSV format for RSVP data\n- JSON format for campaign data\n- Filtered by date range\n- Filtered by campaign/group\n\n**Performance Tracking:**\n- Email delivery rates\n- Open and click tracking\n- Geographic distribution\n- Device and browser analytics\n- Time-based performance\n- A/B testing results\n\nLet me generate the appropriate analytics report for your request."}
{"instruction": "Create and manage audience groups", "input": "Make a group for newsletter subscribers", "output": "I'll help you create a new audience group. Here's what I need:\n\n**Required Information:**\n1. **Group Name**: What should we call this group?\n2. **Description**: What does this group represent?\n\n**API Endpoint:**\n```\nPOST /api/admin/campaign/groups\n```\n\n**Request Body:**\n```json\n{\n  \"name\": \"Group Name\",\n  \"description\": \"Description of the group\",\n  \"color\": \"#10b981\",\n  \"criteria\": {\n    \"industry\": \"technology\",\n    \"engagement\": \"high\",\n    \"tags\": [\"vip\", \"premium\"]\n  },\n  \"meta\": {}\n}\n```\n\n**Required Fields:**\n- `name` (string) - Group name\n- `description` (string) - Group description\n- `criteria` (object) - Group criteria\n- `meta` (object) - Group metadata\n\n**Optional Fields:**\n- `color` (string) - Group color (default: \"#10b981\")\n\n**Response:**\n```json\n{\n  \"group\": {\n    \"id\": \"group-id\",\n    \"name\": \"Group Name\",\n    \"description\": \"Description\",\n    \"color\": \"#10b981\",\n    \"criteria\": {},\n    \"meta\": {},\n    \"createdAt\": \"2025-01-15T10:00:00Z\",\n    \"updatedAt\": \"2025-01-15T10:00:00Z\",\n    \"members\": []\n  }\n}\n```\n\n**Audience Member Structure:**\n```json\n{\n  \"id\": \"member-id\",\n  \"groupId\": \"group-id\",\n  \"businessId\": \"business-id\",\n  \"businessName\": \"Business Name\",\n  \"primaryEmail\": \"email@example.com\",\n  \"secondaryEmail\": \"secondary@example.com\",\n  \"tagsSnapshot\": [\"tag1\", \"tag2\"],\n  \"inviteToken\": \"token\",\n  \"meta\": {},\n  \"createdAt\": \"2025-01-15T10:00:00Z\",\n  \"unsubscribed\": false\n}\n```\n\n**Member Status:**\n- `unsubscribed` (boolean) - Whether member has unsubscribed\n\n**Database Constraints:**\n- Unique constraint on `[groupId, businessId]`\n- Indexes on `groupId` and `businessId`\n\nWould you like me to help you set up the group criteria?"}
{"instruction": "View and manage RSVP data", "input": "Show me RSVP data", "output": "I'll help you view RSVP data. Here's what I can show you:\n\n**RSVP Data Structure:**\n```json\n{\n  \"id\": \"rsvp-id\",\n  \"fullName\": \"John Doe\",\n  \"organization\": \"Company Name\",\n  \"email\": \"john@example.com\",\n  \"phone\": \"+1234567890\",\n  \"attendanceStatus\": \"CONFIRMED\",\n  \"attendeeCount\": 2,\n  \"dietaryPreference\": \"VEGETARIAN\",\n  \"dietaryOther\": \"No nuts\",\n  \"accessibilityNeeds\": \"Wheelchair access\",\n  \"referralSource\": \"WEBSITE\",\n  \"referralOther\": \"Google search\",\n  \"wantsResources\": true,\n  \"wantsAudit\": false,\n  \"learningGoal\": \"Learn about new technologies\",\n  \"createdAt\": \"2025-01-15T10:00:00Z\",\n  \"visitorId\": \"visitor-id\",\n  \"sessionId\": \"session-id\",\n  \"referrer\": \"https://example.com\",\n  \"eid\": \"event-id\",\n  \"utmSource\": \"google\",\n  \"utmMedium\": \"cpc\",\n  \"utmCampaign\": \"summer-event\",\n  \"utmTerm\": \"tech conference\",\n  \"utmContent\": \"banner-ad\",\n  \"userAgent\": \"Mozilla/5.0...\",\n  \"language\": \"en-US\",\n  \"tz\": \"America/Vancouver\",\n  \"country\": \"Canada\",\n  \"region\": \"BC\",\n  \"city\": \"Vancouver\",\n  \"ipHash\": \"hashed-ip\",\n  \"screenW\": 1920,\n  \"screenH\": 1080,\n  \"dpr\": 2.0,\n  \"platform\": \"MacIntel\",\n  \"device\": \"desktop\",\n  \"browser\": \"Chrome\",\n  \"meta\": \"additional data\"\n}\n```\n\n**Key Fields:**\n- `attendanceStatus` (string) - CONFIRMED, CANCELLED, etc.\n- `attendeeCount` (number) - Number of attendees\n- `dietaryPreference` (string) - Dietary requirements\n- `accessibilityNeeds` (string) - Accessibility requirements\n- `referralSource` (string) - How they found the event\n- `wantsResources` (boolean) - Wants additional resources\n- `wantsAudit` (boolean) - Wants audit information\n- `learningGoal` (string) - What they want to learn\n\n**Tracking Data:**\n- `visitorId` - Unique visitor identifier\n- `sessionId` - Session identifier\n- `referrer` - Referring URL\n- `utmSource`, `utmMedium`, `utmCampaign`, `utmTerm`, `utmContent` - UTM tracking\n- `userAgent` - Browser information\n- `language` - User language\n- `tz` - Timezone\n- `country`, `region`, `city` - Geographic data\n- `ipHash` - Hashed IP address\n- `screenW`, `screenH`, `dpr` - Screen information\n- `platform`, `device`, `browser` - Device information\n\n**Database Constraints:**\n- `email` field is unique\n- `id` is primary key (cuid)\n\n**API Endpoint:**\n```\nPOST /api/rsvp\n```\n\n**Security Features:**\n- CSRF protection\n- Rate limiting\n- Input validation\n- Test detection\n- Security logging\n\nLet me show you the RSVP data based on your request."}
{"instruction": "Create and manage audience groups", "input": "I need a group for inactive users", "output": "I'll help you create a new audience group. Here's what I need:\n\n**Required Information:**\n1. **Group Name**: What should we call this group?\n2. **Description**: What does this group represent?\n\n**API Endpoint:**\n```\nPOST /api/admin/campaign/groups\n```\n\n**Request Body:**\n```json\n{\n  \"name\": \"Group Name\",\n  \"description\": \"Description of the group\",\n  \"color\": \"#10b981\",\n  \"criteria\": {\n    \"industry\": \"technology\",\n    \"engagement\": \"high\",\n    \"tags\": [\"vip\", \"premium\"]\n  },\n  \"meta\": {}\n}\n```\n\n**Required Fields:**\n- `name` (string) - Group name\n- `description` (string) - Group description\n- `criteria` (object) - Group criteria\n- `meta` (object) - Group metadata\n\n**Optional Fields:**\n- `color` (string) - Group color (default: \"#10b981\")\n\n**Response:**\n```json\n{\n  \"group\": {\n    \"id\": \"group-id\",\n    \"name\": \"Group Name\",\n    \"description\": \"Description\",\n    \"color\": \"#10b981\",\n    \"criteria\": {},\n    \"meta\": {},\n    \"createdAt\": \"2025-01-15T10:00:00Z\",\n    \"updatedAt\": \"2025-01-15T10:00:00Z\",\n    \"members\": []\n  }\n}\n```\n\n**Audience Member Structure:**\n```json\n{\n  \"id\": \"member-id\",\n  \"groupId\": \"group-id\",\n  \"businessId\": \"business-id\",\n  \"businessName\": \"Business Name\",\n  \"primaryEmail\": \"email@example.com\",\n  \"secondaryEmail\": \"secondary@example.com\",\n  \"tagsSnapshot\": [\"tag1\", \"tag2\"],\n  \"inviteToken\": \"token\",\n  \"meta\": {},\n  \"createdAt\": \"2025-01-15T10:00:00Z\",\n  \"unsubscribed\": false\n}\n```\n\n**Member Status:**\n- `unsubscribed` (boolean) - Whether member has unsubscribed\n\n**Database Constraints:**\n- Unique constraint on `[groupId, businessId]`\n- Indexes on `groupId` and `businessId`\n\nWould you like me to help you set up the group criteria?"}
{"instruction": "View analytics and generate reports", "input": "Show me bounce rates", "output": "I'll help you analyze your email performance. Here's what I can show you:\n\n**Campaign Analytics:**\n\n**CampaignSend Status Tracking:**\n```json\n{\n  \"id\": \"send-id\",\n  \"scheduleId\": \"schedule-id\",\n  \"groupId\": \"group-id\",\n  \"templateId\": \"template-id\",\n  \"businessId\": \"business-id\",\n  \"businessName\": \"Business Name\",\n  \"email\": \"email@example.com\",\n  \"inviteToken\": \"token\",\n  \"inviteLink\": \"https://example.com/l/token\",\n  \"resendMessageId\": \"resend-message-id\",\n  \"status\": \"SENT\",\n  \"error\": null,\n  \"meta\": {},\n  \"sentAt\": \"2025-01-15T10:00:00Z\",\n  \"openedAt\": \"2025-01-15T10:05:00Z\",\n  \"visitedAt\": \"2025-01-15T10:10:00Z\"\n}\n```\n\n**CampaignSend Status Values:**\n- `PENDING` - Not yet sent\n- `SENDING` - Currently being sent\n- `SENT` - Successfully sent\n- `FAILED` - Failed to send\n- `SKIPPED` - Skipped (e.g., unsubscribed)\n\n**Key Metrics:**\n- **Sent Count**: Total emails sent\n- **Open Rate**: Percentage of emails opened (openedAt not null)\n- **Click Rate**: Percentage of emails clicked (visitedAt not null)\n- **Bounce Rate**: Percentage of failed sends\n- **Unsubscribe Rate**: Percentage of unsubscribed members\n\n**Visit Tracking:**\n```json\n{\n  \"id\": \"visit-id\",\n  \"createdAt\": \"2025-01-15T10:00:00Z\",\n  \"visitorId\": \"visitor-id\",\n  \"sessionId\": \"session-id\",\n  \"path\": \"/event-page\",\n  \"query\": \"?utm_source=email\",\n  \"referrer\": \"https://example.com\",\n  \"eid\": \"event-id\",\n  \"utmSource\": \"email\",\n  \"utmMedium\": \"newsletter\",\n  \"utmCampaign\": \"summer-event\",\n  \"userAgent\": \"Mozilla/5.0...\",\n  \"language\": \"en-US\",\n  \"country\": \"Canada\",\n  \"region\": \"BC\",\n  \"city\": \"Vancouver\",\n  \"timeOnPageMs\": 30000,\n  \"scrollDepth\": 75\n}\n```\n\n**Analytics Endpoints:**\n- `GET /api/admin/campaign/dashboard` - Dashboard overview\n- `GET /api/admin/export` - Export data\n- `GET /api/l/[token]` - Track link clicks\n- `GET /api/__pixel` - Track email opens\n\n**Export Options:**\n- CSV format for RSVP data\n- JSON format for campaign data\n- Filtered by date range\n- Filtered by campaign/group\n\n**Performance Tracking:**\n- Email delivery rates\n- Open and click tracking\n- Geographic distribution\n- Device and browser analytics\n- Time-based performance\n- A/B testing results\n\nLet me generate the appropriate analytics report for your request."}
{"instruction": "View and manage RSVP data", "input": "What's the attendance status?", "output": "I'll help you view RSVP data. Here's what I can show you:\n\n**RSVP Data Structure:**\n```json\n{\n  \"id\": \"rsvp-id\",\n  \"fullName\": \"John Doe\",\n  \"organization\": \"Company Name\",\n  \"email\": \"john@example.com\",\n  \"phone\": \"+1234567890\",\n  \"attendanceStatus\": \"CONFIRMED\",\n  \"attendeeCount\": 2,\n  \"dietaryPreference\": \"VEGETARIAN\",\n  \"dietaryOther\": \"No nuts\",\n  \"accessibilityNeeds\": \"Wheelchair access\",\n  \"referralSource\": \"WEBSITE\",\n  \"referralOther\": \"Google search\",\n  \"wantsResources\": true,\n  \"wantsAudit\": false,\n  \"learningGoal\": \"Learn about new technologies\",\n  \"createdAt\": \"2025-01-15T10:00:00Z\",\n  \"visitorId\": \"visitor-id\",\n  \"sessionId\": \"session-id\",\n  \"referrer\": \"https://example.com\",\n  \"eid\": \"event-id\",\n  \"utmSource\": \"google\",\n  \"utmMedium\": \"cpc\",\n  \"utmCampaign\": \"summer-event\",\n  \"utmTerm\": \"tech conference\",\n  \"utmContent\": \"banner-ad\",\n  \"userAgent\": \"Mozilla/5.0...\",\n  \"language\": \"en-US\",\n  \"tz\": \"America/Vancouver\",\n  \"country\": \"Canada\",\n  \"region\": \"BC\",\n  \"city\": \"Vancouver\",\n  \"ipHash\": \"hashed-ip\",\n  \"screenW\": 1920,\n  \"screenH\": 1080,\n  \"dpr\": 2.0,\n  \"platform\": \"MacIntel\",\n  \"device\": \"desktop\",\n  \"browser\": \"Chrome\",\n  \"meta\": \"additional data\"\n}\n```\n\n**Key Fields:**\n- `attendanceStatus` (string) - CONFIRMED, CANCELLED, etc.\n- `attendeeCount` (number) - Number of attendees\n- `dietaryPreference` (string) - Dietary requirements\n- `accessibilityNeeds` (string) - Accessibility requirements\n- `referralSource` (string) - How they found the event\n- `wantsResources` (boolean) - Wants additional resources\n- `wantsAudit` (boolean) - Wants audit information\n- `learningGoal` (string) - What they want to learn\n\n**Tracking Data:**\n- `visitorId` - Unique visitor identifier\n- `sessionId` - Session identifier\n- `referrer` - Referring URL\n- `utmSource`, `utmMedium`, `utmCampaign`, `utmTerm`, `utmContent` - UTM tracking\n- `userAgent` - Browser information\n- `language` - User language\n- `tz` - Timezone\n- `country`, `region`, `city` - Geographic data\n- `ipHash` - Hashed IP address\n- `screenW`, `screenH`, `dpr` - Screen information\n- `platform`, `device`, `browser` - Device information\n\n**Database Constraints:**\n- `email` field is unique\n- `id` is primary key (cuid)\n\n**API Endpoint:**\n```\nPOST /api/rsvp\n```\n\n**Security Features:**\n- CSRF protection\n- Rate limiting\n- Input validation\n- Test detection\n- Security logging\n\nLet me show you the RSVP data based on your request."}
{"instruction": "Create a new email campaign", "input": "Create a campaign for the webinar announcement", "output": "I'll help you create a new campaign. Based on your request, here's what I need:\n\n**Required Information:**\n1. **Campaign Name**: What should we call this campaign?\n2. **Steps**: Campaign steps with templateId, groupId, and scheduling\n\n**API Endpoint:**\n```\nPOST /api/admin/campaign/campaigns\n```\n\n**Request Body:**\n```json\n{\n  \"name\": \"Campaign Name\",\n  \"description\": \"Optional description\",\n  \"status\": \"DRAFT\",\n  \"steps\": [\n    {\n      \"templateId\": \"template-id\",\n      \"groupId\": \"audience-group-id\",\n      \"sendAt\": \"2025-01-15T10:00:00Z\",\n      \"stepOrder\": 1\n    }\n  ]\n}\n```\n\n**Campaign Status Options:**\n- `DRAFT` - Not yet ready to send\n- `SCHEDULED` - Scheduled for future send\n- `SENDING` - Currently being sent\n- `PAUSED` - Temporarily paused\n- `COMPLETED` - Finished sending\n- `CANCELLED` - Cancelled\n\n**Required Fields:**\n- `name` (string) - Campaign name\n- `steps` (array) - Array of campaign steps\n\n**Step Object Required Fields:**\n- `templateId` (string) - Email template ID\n- `groupId` (string) - Audience group ID\n- `stepOrder` (number) - Order of execution\n\n**Optional Step Fields:**\n- `sendAt` (ISO date string) - When to send\n- `throttlePerMinute` (number) - Email sending rate\n- `timeZone` (string) - Timezone for scheduling\n\nWould you like me to help you set up the campaign steps?"}
{"instruction": "View and manage RSVP data", "input": "Show RSVP analytics", "output": "I'll help you view RSVP data. Here's what I can show you:\n\n**RSVP Data Structure:**\n```json\n{\n  \"id\": \"rsvp-id\",\n  \"fullName\": \"John Doe\",\n  \"organization\": \"Company Name\",\n  \"email\": \"john@example.com\",\n  \"phone\": \"+1234567890\",\n  \"attendanceStatus\": \"CONFIRMED\",\n  \"attendeeCount\": 2,\n  \"dietaryPreference\": \"VEGETARIAN\",\n  \"dietaryOther\": \"No nuts\",\n  \"accessibilityNeeds\": \"Wheelchair access\",\n  \"referralSource\": \"WEBSITE\",\n  \"referralOther\": \"Google search\",\n  \"wantsResources\": true,\n  \"wantsAudit\": false,\n  \"learningGoal\": \"Learn about new technologies\",\n  \"createdAt\": \"2025-01-15T10:00:00Z\",\n  \"visitorId\": \"visitor-id\",\n  \"sessionId\": \"session-id\",\n  \"referrer\": \"https://example.com\",\n  \"eid\": \"event-id\",\n  \"utmSource\": \"google\",\n  \"utmMedium\": \"cpc\",\n  \"utmCampaign\": \"summer-event\",\n  \"utmTerm\": \"tech conference\",\n  \"utmContent\": \"banner-ad\",\n  \"userAgent\": \"Mozilla/5.0...\",\n  \"language\": \"en-US\",\n  \"tz\": \"America/Vancouver\",\n  \"country\": \"Canada\",\n  \"region\": \"BC\",\n  \"city\": \"Vancouver\",\n  \"ipHash\": \"hashed-ip\",\n  \"screenW\": 1920,\n  \"screenH\": 1080,\n  \"dpr\": 2.0,\n  \"platform\": \"MacIntel\",\n  \"device\": \"desktop\",\n  \"browser\": \"Chrome\",\n  \"meta\": \"additional data\"\n}\n```\n\n**Key Fields:**\n- `attendanceStatus` (string) - CONFIRMED, CANCELLED, etc.\n- `attendeeCount` (number) - Number of attendees\n- `dietaryPreference` (string) - Dietary requirements\n- `accessibilityNeeds` (string) - Accessibility requirements\n- `referralSource` (string) - How they found the event\n- `wantsResources` (boolean) - Wants additional resources\n- `wantsAudit` (boolean) - Wants audit information\n- `learningGoal` (string) - What they want to learn\n\n**Tracking Data:**\n- `visitorId` - Unique visitor identifier\n- `sessionId` - Session identifier\n- `referrer` - Referring URL\n- `utmSource`, `utmMedium`, `utmCampaign`, `utmTerm`, `utmContent` - UTM tracking\n- `userAgent` - Browser information\n- `language` - User language\n- `tz` - Timezone\n- `country`, `region`, `city` - Geographic data\n- `ipHash` - Hashed IP address\n- `screenW`, `screenH`, `dpr` - Screen information\n- `platform`, `device`, `browser` - Device information\n\n**Database Constraints:**\n- `email` field is unique\n- `id` is primary key (cuid)\n\n**API Endpoint:**\n```\nPOST /api/rsvp\n```\n\n**Security Features:**\n- CSRF protection\n- Rate limiting\n- Input validation\n- Test detection\n- Security logging\n\nLet me show you the RSVP data based on your request."}
{"instruction": "View analytics and generate reports", "input": "Generate a campaign report", "output": "I'll help you analyze your email performance. Here's what I can show you:\n\n**Campaign Analytics:**\n\n**CampaignSend Status Tracking:**\n```json\n{\n  \"id\": \"send-id\",\n  \"scheduleId\": \"schedule-id\",\n  \"groupId\": \"group-id\",\n  \"templateId\": \"template-id\",\n  \"businessId\": \"business-id\",\n  \"businessName\": \"Business Name\",\n  \"email\": \"email@example.com\",\n  \"inviteToken\": \"token\",\n  \"inviteLink\": \"https://example.com/l/token\",\n  \"resendMessageId\": \"resend-message-id\",\n  \"status\": \"SENT\",\n  \"error\": null,\n  \"meta\": {},\n  \"sentAt\": \"2025-01-15T10:00:00Z\",\n  \"openedAt\": \"2025-01-15T10:05:00Z\",\n  \"visitedAt\": \"2025-01-15T10:10:00Z\"\n}\n```\n\n**CampaignSend Status Values:**\n- `PENDING` - Not yet sent\n- `SENDING` - Currently being sent\n- `SENT` - Successfully sent\n- `FAILED` - Failed to send\n- `SKIPPED` - Skipped (e.g., unsubscribed)\n\n**Key Metrics:**\n- **Sent Count**: Total emails sent\n- **Open Rate**: Percentage of emails opened (openedAt not null)\n- **Click Rate**: Percentage of emails clicked (visitedAt not null)\n- **Bounce Rate**: Percentage of failed sends\n- **Unsubscribe Rate**: Percentage of unsubscribed members\n\n**Visit Tracking:**\n```json\n{\n  \"id\": \"visit-id\",\n  \"createdAt\": \"2025-01-15T10:00:00Z\",\n  \"visitorId\": \"visitor-id\",\n  \"sessionId\": \"session-id\",\n  \"path\": \"/event-page\",\n  \"query\": \"?utm_source=email\",\n  \"referrer\": \"https://example.com\",\n  \"eid\": \"event-id\",\n  \"utmSource\": \"email\",\n  \"utmMedium\": \"newsletter\",\n  \"utmCampaign\": \"summer-event\",\n  \"userAgent\": \"Mozilla/5.0...\",\n  \"language\": \"en-US\",\n  \"country\": \"Canada\",\n  \"region\": \"BC\",\n  \"city\": \"Vancouver\",\n  \"timeOnPageMs\": 30000,\n  \"scrollDepth\": 75\n}\n```\n\n**Analytics Endpoints:**\n- `GET /api/admin/campaign/dashboard` - Dashboard overview\n- `GET /api/admin/export` - Export data\n- `GET /api/l/[token]` - Track link clicks\n- `GET /api/__pixel` - Track email opens\n\n**Export Options:**\n- CSV format for RSVP data\n- JSON format for campaign data\n- Filtered by date range\n- Filtered by campaign/group\n\n**Performance Tracking:**\n- Email delivery rates\n- Open and click tracking\n- Geographic distribution\n- Device and browser analytics\n- Time-based performance\n- A/B testing results\n\nLet me generate the appropriate analytics report for your request."}
{"instruction": "Manage email campaigns", "input": "Get campaign details", "output": "I'll help you manage your campaigns. Here are the available actions:\n\n**List Campaigns:**\n```\nGET /api/admin/campaign/campaigns\n```\n\n**Response:**\n```json\n{\n  \"campaigns\": [\n    {\n      \"id\": \"campaign-id\",\n      \"name\": \"Campaign Name\",\n      \"description\": \"Description\",\n      \"status\": \"DRAFT\",\n      \"meta\": {},\n      \"createdAt\": \"2025-01-15T10:00:00Z\",\n      \"updatedAt\": \"2025-01-15T10:00:00Z\",\n      \"schedules\": []\n    }\n  ]\n}\n```\n\n**Get Campaign Details:**\n```\nGET /api/admin/campaign/campaigns/[id]\n```\n\n**Update Campaign:**\n```\nPUT /api/admin/campaign/campaigns\n```\n\n**Request Body:**\n```json\n{\n  \"id\": \"campaign-id\",\n  \"name\": \"Updated Name\",\n  \"description\": \"Updated description\",\n  \"status\": \"SCHEDULED\",\n  \"steps\": []\n}\n```\n\n**Delete Campaign:**\n```\nDELETE /api/admin/campaign/campaigns/[id]\n```\n\n**Campaign Status Values:**\n- `DRAFT` - Not yet ready\n- `SCHEDULED` - Scheduled to send\n- `SENDING` - Currently sending\n- `PAUSED` - Paused\n- `COMPLETED` - Finished\n- `CANCELLED` - Cancelled\n\nLet me execute the appropriate action for your request."}
{"instruction": "Create and manage campaign schedules", "input": "Schedule with timezone", "output": "I'll help you create a campaign schedule. Here's what I need:\n\n**Required Information:**\n1. **Schedule Name**: What should we call this schedule?\n2. **Template ID**: Which email template to use?\n3. **Group ID**: Which audience group to target?\n\n**API Endpoint:**\n```\nPOST /api/admin/campaign/schedules\n```\n\n**Request Body:**\n```json\n{\n  \"name\": \"Schedule Name\",\n  \"templateId\": \"template-id\",\n  \"groupId\": \"audience-group-id\",\n  \"campaignId\": \"campaign-id\",\n  \"sendAt\": \"2025-01-15T10:00:00Z\",\n  \"throttlePerMinute\": 60,\n  \"repeatIntervalMins\": null,\n  \"stepOrder\": 1,\n  \"smartWindowStart\": \"2025-01-15T09:00:00Z\",\n  \"smartWindowEnd\": \"2025-01-15T17:00:00Z\",\n  \"timeZone\": \"America/Vancouver\",\n  \"status\": \"DRAFT\"\n}\n```\n\n**Required Fields:**\n- `name` (string) - Schedule name\n- `templateId` (string) - Email template ID\n- `groupId` (string) - Audience group ID\n\n**Optional Fields:**\n- `campaignId` (string) - Associated campaign ID\n- `sendAt` (ISO date string) - When to send (null for immediate)\n- `throttlePerMinute` (number) - Email sending rate (default: 60)\n- `repeatIntervalMins` (number) - Recurring interval in minutes\n- `stepOrder` (number) - Order in multi-step campaign (default: 1)\n- `smartWindowStart` (ISO date string) - Smart sending window start\n- `smartWindowEnd` (ISO date string) - Smart sending window end\n- `timeZone` (string) - Timezone (default: \"America/Vancouver\")\n- `status` (string) - Schedule status\n\n**Schedule Status Options:**\n- `DRAFT` - Not yet ready\n- `SCHEDULED` - Scheduled to send\n- `SENDING` - Currently sending\n- `PAUSED` - Paused\n- `COMPLETED` - Finished\n- `CANCELLED` - Cancelled\n\n**Response:**\n```json\n{\n  \"schedule\": {\n    \"id\": \"schedule-id\",\n    \"name\": \"Schedule Name\",\n    \"templateId\": \"template-id\",\n    \"groupId\": \"audience-group-id\",\n    \"status\": \"DRAFT\",\n    \"sendAt\": \"2025-01-15T10:00:00Z\",\n    \"timeZone\": \"America/Vancouver\",\n    \"throttlePerMinute\": 60,\n    \"createdAt\": \"2025-01-15T10:00:00Z\",\n    \"updatedAt\": \"2025-01-15T10:00:00Z\"\n  }\n}\n```\n\nWould you like me to help you set up the schedule details?"}
{"instruction": "View analytics and generate reports", "input": "Generate a monthly report", "output": "I'll help you analyze your email performance. Here's what I can show you:\n\n**Campaign Analytics:**\n\n**CampaignSend Status Tracking:**\n```json\n{\n  \"id\": \"send-id\",\n  \"scheduleId\": \"schedule-id\",\n  \"groupId\": \"group-id\",\n  \"templateId\": \"template-id\",\n  \"businessId\": \"business-id\",\n  \"businessName\": \"Business Name\",\n  \"email\": \"email@example.com\",\n  \"inviteToken\": \"token\",\n  \"inviteLink\": \"https://example.com/l/token\",\n  \"resendMessageId\": \"resend-message-id\",\n  \"status\": \"SENT\",\n  \"error\": null,\n  \"meta\": {},\n  \"sentAt\": \"2025-01-15T10:00:00Z\",\n  \"openedAt\": \"2025-01-15T10:05:00Z\",\n  \"visitedAt\": \"2025-01-15T10:10:00Z\"\n}\n```\n\n**CampaignSend Status Values:**\n- `PENDING` - Not yet sent\n- `SENDING` - Currently being sent\n- `SENT` - Successfully sent\n- `FAILED` - Failed to send\n- `SKIPPED` - Skipped (e.g., unsubscribed)\n\n**Key Metrics:**\n- **Sent Count**: Total emails sent\n- **Open Rate**: Percentage of emails opened (openedAt not null)\n- **Click Rate**: Percentage of emails clicked (visitedAt not null)\n- **Bounce Rate**: Percentage of failed sends\n- **Unsubscribe Rate**: Percentage of unsubscribed members\n\n**Visit Tracking:**\n```json\n{\n  \"id\": \"visit-id\",\n  \"createdAt\": \"2025-01-15T10:00:00Z\",\n  \"visitorId\": \"visitor-id\",\n  \"sessionId\": \"session-id\",\n  \"path\": \"/event-page\",\n  \"query\": \"?utm_source=email\",\n  \"referrer\": \"https://example.com\",\n  \"eid\": \"event-id\",\n  \"utmSource\": \"email\",\n  \"utmMedium\": \"newsletter\",\n  \"utmCampaign\": \"summer-event\",\n  \"userAgent\": \"Mozilla/5.0...\",\n  \"language\": \"en-US\",\n  \"country\": \"Canada\",\n  \"region\": \"BC\",\n  \"city\": \"Vancouver\",\n  \"timeOnPageMs\": 30000,\n  \"scrollDepth\": 75\n}\n```\n\n**Analytics Endpoints:**\n- `GET /api/admin/campaign/dashboard` - Dashboard overview\n- `GET /api/admin/export` - Export data\n- `GET /api/l/[token]` - Track link clicks\n- `GET /api/__pixel` - Track email opens\n\n**Export Options:**\n- CSV format for RSVP data\n- JSON format for campaign data\n- Filtered by date range\n- Filtered by campaign/group\n\n**Performance Tracking:**\n- Email delivery rates\n- Open and click tracking\n- Geographic distribution\n- Device and browser analytics\n- Time-based performance\n- A/B testing results\n\nLet me generate the appropriate analytics report for your request."}
{"instruction": "Explain system architecture and technical details", "input": "What's the file structure?", "output": "I'll explain the technical architecture of the RSVP system:\n\n**System Architecture:**\n\n**Frontend:**\n- **Framework**: Next.js 14 with React\n- **Styling**: Tailwind CSS\n- **Animations**: Framer Motion\n- **State Management**: React hooks (useState, useEffect)\n- **Authentication**: Session-based with cookies\n\n**Backend:**\n- **Runtime**: Node.js\n- **Framework**: Next.js API routes\n- **Database**: PostgreSQL with Prisma ORM\n- **Email Service**: Resend API\n- **Vector Database**: Weaviate (for RAG)\n- **AI Integration**: Gemini 2.5 Flash\n\n**Database Models:**\n- `RSVP` - Event RSVP submissions\n- `Visit` - Website visit tracking\n- `CampaignTemplate` - Email templates\n- `Campaign` - Email campaigns\n- `AudienceGroup` - Audience segmentation\n- `AudienceMember` - Individual audience members\n- `CampaignSchedule` - Campaign scheduling\n- `CampaignSend` - Individual email sends\n\n**API Structure:**\n- `/api/rsvp` - RSVP form submission\n- `/api/admin/campaign/campaigns` - Campaign management\n- `/api/admin/campaign/schedules` - Schedule management\n- `/api/admin/campaign/templates` - Template management\n- `/api/admin/campaign/groups` - Audience group management\n- `/api/admin/campaign/send` - Email sending\n- `/api/admin/export` - Data export\n- `/api/unsubscribe` - Unsubscribe handling\n- `/api/l/[token]` - Link tracking\n- `/api/__pixel` - Email open tracking\n\n**Security Features:**\n- CSRF protection with origin/referer validation\n- Rate limiting with IP fingerprinting\n- Input validation with Zod schemas\n- Test detection to prevent spam\n- Security logging for monitoring\n- Secure headers with CSP\n\n**Environment Variables:**\n- `DATABASE_URL` - PostgreSQL connection\n- `RESEND_API_KEY` - Email service\n- `GEMINI_API_KEY` - AI service\n- `WEAVIATE_URL` - Vector database\n- `WEAVIATE_API_KEY` - Vector database auth\n- `CRON_SECRET` - Cron job authentication\n\n**File Structure:**\n```\nrsvp-app/\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 app/           # Next.js app router\n\u2502   \u2502   \u251c\u2500\u2500 api/       # API routes\n\u2502   \u2502   \u251c\u2500\u2500 admin/     # Admin panel\n\u2502   \u2502   \u2514\u2500\u2500 (public)/  # Public pages\n\u2502   \u251c\u2500\u2500 components/    # React components\n\u2502   \u251c\u2500\u2500 lib/          # Utilities and services\n\u2502   \u2514\u2500\u2500 prisma/       # Database schema\n\u251c\u2500\u2500 public/           # Static assets\n\u2514\u2500\u2500 docs/            # Documentation\n```\n\n**Deployment:**\n- **Platform**: Vercel (frontend)\n- **Database**: Neon (PostgreSQL)\n- **AI Service**: Railway (planned)\n- **Vector DB**: Weaviate Cloud\n\n**Email Delivery:**\n- Resend API for email sending\n- Throttling support (emails per minute)\n- Smart sending windows\n- Timezone support\n- Recurring campaigns\n- Link and open tracking\n\n**AI Assistant (Juniper):**\n- Conversational interface\n- Real-time execution display\n- Tool integration for database operations\n- Context awareness\n- Error handling and recovery\n- Pattern-matching system (to be replaced with fine-tuned SLM)\n\nThis architecture provides a scalable, secure, and maintainable system for RSVP management and email campaigns."}
{"instruction": "Create and manage campaign schedules", "input": "Create a throttled schedule", "output": "I'll help you create a campaign schedule. Here's what I need:\n\n**Required Information:**\n1. **Schedule Name**: What should we call this schedule?\n2. **Template ID**: Which email template to use?\n3. **Group ID**: Which audience group to target?\n\n**API Endpoint:**\n```\nPOST /api/admin/campaign/schedules\n```\n\n**Request Body:**\n```json\n{\n  \"name\": \"Schedule Name\",\n  \"templateId\": \"template-id\",\n  \"groupId\": \"audience-group-id\",\n  \"campaignId\": \"campaign-id\",\n  \"sendAt\": \"2025-01-15T10:00:00Z\",\n  \"throttlePerMinute\": 60,\n  \"repeatIntervalMins\": null,\n  \"stepOrder\": 1,\n  \"smartWindowStart\": \"2025-01-15T09:00:00Z\",\n  \"smartWindowEnd\": \"2025-01-15T17:00:00Z\",\n  \"timeZone\": \"America/Vancouver\",\n  \"status\": \"DRAFT\"\n}\n```\n\n**Required Fields:**\n- `name` (string) - Schedule name\n- `templateId` (string) - Email template ID\n- `groupId` (string) - Audience group ID\n\n**Optional Fields:**\n- `campaignId` (string) - Associated campaign ID\n- `sendAt` (ISO date string) - When to send (null for immediate)\n- `throttlePerMinute` (number) - Email sending rate (default: 60)\n- `repeatIntervalMins` (number) - Recurring interval in minutes\n- `stepOrder` (number) - Order in multi-step campaign (default: 1)\n- `smartWindowStart` (ISO date string) - Smart sending window start\n- `smartWindowEnd` (ISO date string) - Smart sending window end\n- `timeZone` (string) - Timezone (default: \"America/Vancouver\")\n- `status` (string) - Schedule status\n\n**Schedule Status Options:**\n- `DRAFT` - Not yet ready\n- `SCHEDULED` - Scheduled to send\n- `SENDING` - Currently sending\n- `PAUSED` - Paused\n- `COMPLETED` - Finished\n- `CANCELLED` - Cancelled\n\n**Response:**\n```json\n{\n  \"schedule\": {\n    \"id\": \"schedule-id\",\n    \"name\": \"Schedule Name\",\n    \"templateId\": \"template-id\",\n    \"groupId\": \"audience-group-id\",\n    \"status\": \"DRAFT\",\n    \"sendAt\": \"2025-01-15T10:00:00Z\",\n    \"timeZone\": \"America/Vancouver\",\n    \"throttlePerMinute\": 60,\n    \"createdAt\": \"2025-01-15T10:00:00Z\",\n    \"updatedAt\": \"2025-01-15T10:00:00Z\"\n  }\n}\n```\n\nWould you like me to help you set up the schedule details?"}
{"instruction": "Create and manage audience groups", "input": "Make a group for event attendees", "output": "I'll help you create a new audience group. Here's what I need:\n\n**Required Information:**\n1. **Group Name**: What should we call this group?\n2. **Description**: What does this group represent?\n\n**API Endpoint:**\n```\nPOST /api/admin/campaign/groups\n```\n\n**Request Body:**\n```json\n{\n  \"name\": \"Group Name\",\n  \"description\": \"Description of the group\",\n  \"color\": \"#10b981\",\n  \"criteria\": {\n    \"industry\": \"technology\",\n    \"engagement\": \"high\",\n    \"tags\": [\"vip\", \"premium\"]\n  },\n  \"meta\": {}\n}\n```\n\n**Required Fields:**\n- `name` (string) - Group name\n- `description` (string) - Group description\n- `criteria` (object) - Group criteria\n- `meta` (object) - Group metadata\n\n**Optional Fields:**\n- `color` (string) - Group color (default: \"#10b981\")\n\n**Response:**\n```json\n{\n  \"group\": {\n    \"id\": \"group-id\",\n    \"name\": \"Group Name\",\n    \"description\": \"Description\",\n    \"color\": \"#10b981\",\n    \"criteria\": {},\n    \"meta\": {},\n    \"createdAt\": \"2025-01-15T10:00:00Z\",\n    \"updatedAt\": \"2025-01-15T10:00:00Z\",\n    \"members\": []\n  }\n}\n```\n\n**Audience Member Structure:**\n```json\n{\n  \"id\": \"member-id\",\n  \"groupId\": \"group-id\",\n  \"businessId\": \"business-id\",\n  \"businessName\": \"Business Name\",\n  \"primaryEmail\": \"email@example.com\",\n  \"secondaryEmail\": \"secondary@example.com\",\n  \"tagsSnapshot\": [\"tag1\", \"tag2\"],\n  \"inviteToken\": \"token\",\n  \"meta\": {},\n  \"createdAt\": \"2025-01-15T10:00:00Z\",\n  \"unsubscribed\": false\n}\n```\n\n**Member Status:**\n- `unsubscribed` (boolean) - Whether member has unsubscribed\n\n**Database Constraints:**\n- Unique constraint on `[groupId, businessId]`\n- Indexes on `groupId` and `businessId`\n\nWould you like me to help you set up the group criteria?"}
{"instruction": "View and manage RSVP data", "input": "List accessibility needs", "output": "I'll help you view RSVP data. Here's what I can show you:\n\n**RSVP Data Structure:**\n```json\n{\n  \"id\": \"rsvp-id\",\n  \"fullName\": \"John Doe\",\n  \"organization\": \"Company Name\",\n  \"email\": \"john@example.com\",\n  \"phone\": \"+1234567890\",\n  \"attendanceStatus\": \"CONFIRMED\",\n  \"attendeeCount\": 2,\n  \"dietaryPreference\": \"VEGETARIAN\",\n  \"dietaryOther\": \"No nuts\",\n  \"accessibilityNeeds\": \"Wheelchair access\",\n  \"referralSource\": \"WEBSITE\",\n  \"referralOther\": \"Google search\",\n  \"wantsResources\": true,\n  \"wantsAudit\": false,\n  \"learningGoal\": \"Learn about new technologies\",\n  \"createdAt\": \"2025-01-15T10:00:00Z\",\n  \"visitorId\": \"visitor-id\",\n  \"sessionId\": \"session-id\",\n  \"referrer\": \"https://example.com\",\n  \"eid\": \"event-id\",\n  \"utmSource\": \"google\",\n  \"utmMedium\": \"cpc\",\n  \"utmCampaign\": \"summer-event\",\n  \"utmTerm\": \"tech conference\",\n  \"utmContent\": \"banner-ad\",\n  \"userAgent\": \"Mozilla/5.0...\",\n  \"language\": \"en-US\",\n  \"tz\": \"America/Vancouver\",\n  \"country\": \"Canada\",\n  \"region\": \"BC\",\n  \"city\": \"Vancouver\",\n  \"ipHash\": \"hashed-ip\",\n  \"screenW\": 1920,\n  \"screenH\": 1080,\n  \"dpr\": 2.0,\n  \"platform\": \"MacIntel\",\n  \"device\": \"desktop\",\n  \"browser\": \"Chrome\",\n  \"meta\": \"additional data\"\n}\n```\n\n**Key Fields:**\n- `attendanceStatus` (string) - CONFIRMED, CANCELLED, etc.\n- `attendeeCount` (number) - Number of attendees\n- `dietaryPreference` (string) - Dietary requirements\n- `accessibilityNeeds` (string) - Accessibility requirements\n- `referralSource` (string) - How they found the event\n- `wantsResources` (boolean) - Wants additional resources\n- `wantsAudit` (boolean) - Wants audit information\n- `learningGoal` (string) - What they want to learn\n\n**Tracking Data:**\n- `visitorId` - Unique visitor identifier\n- `sessionId` - Session identifier\n- `referrer` - Referring URL\n- `utmSource`, `utmMedium`, `utmCampaign`, `utmTerm`, `utmContent` - UTM tracking\n- `userAgent` - Browser information\n- `language` - User language\n- `tz` - Timezone\n- `country`, `region`, `city` - Geographic data\n- `ipHash` - Hashed IP address\n- `screenW`, `screenH`, `dpr` - Screen information\n- `platform`, `device`, `browser` - Device information\n\n**Database Constraints:**\n- `email` field is unique\n- `id` is primary key (cuid)\n\n**API Endpoint:**\n```\nPOST /api/rsvp\n```\n\n**Security Features:**\n- CSRF protection\n- Rate limiting\n- Input validation\n- Test detection\n- Security logging\n\nLet me show you the RSVP data based on your request."}
{"instruction": "Create and manage campaign schedules", "input": "Set up email scheduling", "output": "I'll help you create a campaign schedule. Here's what I need:\n\n**Required Information:**\n1. **Schedule Name**: What should we call this schedule?\n2. **Template ID**: Which email template to use?\n3. **Group ID**: Which audience group to target?\n\n**API Endpoint:**\n```\nPOST /api/admin/campaign/schedules\n```\n\n**Request Body:**\n```json\n{\n  \"name\": \"Schedule Name\",\n  \"templateId\": \"template-id\",\n  \"groupId\": \"audience-group-id\",\n  \"campaignId\": \"campaign-id\",\n  \"sendAt\": \"2025-01-15T10:00:00Z\",\n  \"throttlePerMinute\": 60,\n  \"repeatIntervalMins\": null,\n  \"stepOrder\": 1,\n  \"smartWindowStart\": \"2025-01-15T09:00:00Z\",\n  \"smartWindowEnd\": \"2025-01-15T17:00:00Z\",\n  \"timeZone\": \"America/Vancouver\",\n  \"status\": \"DRAFT\"\n}\n```\n\n**Required Fields:**\n- `name` (string) - Schedule name\n- `templateId` (string) - Email template ID\n- `groupId` (string) - Audience group ID\n\n**Optional Fields:**\n- `campaignId` (string) - Associated campaign ID\n- `sendAt` (ISO date string) - When to send (null for immediate)\n- `throttlePerMinute` (number) - Email sending rate (default: 60)\n- `repeatIntervalMins` (number) - Recurring interval in minutes\n- `stepOrder` (number) - Order in multi-step campaign (default: 1)\n- `smartWindowStart` (ISO date string) - Smart sending window start\n- `smartWindowEnd` (ISO date string) - Smart sending window end\n- `timeZone` (string) - Timezone (default: \"America/Vancouver\")\n- `status` (string) - Schedule status\n\n**Schedule Status Options:**\n- `DRAFT` - Not yet ready\n- `SCHEDULED` - Scheduled to send\n- `SENDING` - Currently sending\n- `PAUSED` - Paused\n- `COMPLETED` - Finished\n- `CANCELLED` - Cancelled\n\n**Response:**\n```json\n{\n  \"schedule\": {\n    \"id\": \"schedule-id\",\n    \"name\": \"Schedule Name\",\n    \"templateId\": \"template-id\",\n    \"groupId\": \"audience-group-id\",\n    \"status\": \"DRAFT\",\n    \"sendAt\": \"2025-01-15T10:00:00Z\",\n    \"timeZone\": \"America/Vancouver\",\n    \"throttlePerMinute\": 60,\n    \"createdAt\": \"2025-01-15T10:00:00Z\",\n    \"updatedAt\": \"2025-01-15T10:00:00Z\"\n  }\n}\n```\n\nWould you like me to help you set up the schedule details?"}
{"instruction": "Create and manage email templates", "input": "I need a template for welcome emails", "output": "I'll help you create a new email template. Here's what I need:\n\n**Required Information:**\n1. **Template Name**: What should we call this template?\n2. **Subject**: Email subject line\n3. **HTML Body**: Rich HTML content\n4. **Text Body**: Plain text version (optional)\n\n**API Endpoint:**\n```\nPOST /api/admin/campaign/templates\n```\n\n**Request Body:**\n```json\n{\n  \"name\": \"Template Name\",\n  \"subject\": \"Email Subject\",\n  \"htmlBody\": \"<h1>Hello {name}</h1><p>Content here</p>\",\n  \"textBody\": \"Hello {name}\\n\\nContent here\",\n  \"meta\": {},\n  \"greeting_title\": \"Welcome!\",\n  \"greeting_message\": \"Thank you for joining us\",\n  \"signature_name\": \"Your Name\",\n  \"signature_title\": \"Your Title\",\n  \"signature_company\": \"Your Company\",\n  \"signature_location\": \"Your Location\",\n  \"main_content_title\": \"Main Title\",\n  \"main_content_body\": \"Main content here\",\n  \"button_text\": \"Click Here\",\n  \"additional_info_title\": \"Additional Info\",\n  \"additional_info_body\": \"Additional details\",\n  \"closing_title\": \"Thank You\",\n  \"closing_message\": \"Best regards\"\n}\n```\n\n**Required Fields:**\n- `name` (string) - Template name\n- `subject` (string) - Email subject\n- `htmlBody` (string) - HTML content\n- `meta` (object) - Template metadata\n\n**Optional Fields:**\n- `textBody` (string) - Plain text version\n- `greeting_title` (string) - Greeting title\n- `greeting_message` (string) - Greeting message\n- `signature_name` (string) - Signature name\n- `signature_title` (string) - Signature title\n- `signature_company` (string) - Signature company\n- `signature_location` (string) - Signature location\n- `main_content_title` (string) - Main content title\n- `main_content_body` (string) - Main content body\n- `button_text` (string) - Button text\n- `additional_info_title` (string) - Additional info title\n- `additional_info_body` (string) - Additional info body\n- `closing_title` (string) - Closing title\n- `closing_message` (string) - Closing message\n\n**Template Variables:**\n- `{name}` - Recipient's name\n- `{email}` - Recipient's email\n- `{firstName}` - First name\n- `{lastName}` - Last name\n- `{unsubscribeUrl}` - Unsubscribe link\n\n**Response:**\n```json\n{\n  \"template\": {\n    \"id\": \"template-id\",\n    \"name\": \"Template Name\",\n    \"subject\": \"Email Subject\",\n    \"htmlBody\": \"<h1>Hello {name}</h1>\",\n    \"textBody\": \"Hello {name}\",\n    \"meta\": {},\n    \"createdAt\": \"2025-01-15T10:00:00Z\",\n    \"updatedAt\": \"2025-01-15T10:00:00Z\"\n  }\n}\n```\n\nWould you like me to help you create this template with some default content?"}
{"instruction": "Manage email campaigns", "input": "What campaigns do I have?", "output": "I'll help you manage your campaigns. Here are the available actions:\n\n**List Campaigns:**\n```\nGET /api/admin/campaign/campaigns\n```\n\n**Response:**\n```json\n{\n  \"campaigns\": [\n    {\n      \"id\": \"campaign-id\",\n      \"name\": \"Campaign Name\",\n      \"description\": \"Description\",\n      \"status\": \"DRAFT\",\n      \"meta\": {},\n      \"createdAt\": \"2025-01-15T10:00:00Z\",\n      \"updatedAt\": \"2025-01-15T10:00:00Z\",\n      \"schedules\": []\n    }\n  ]\n}\n```\n\n**Get Campaign Details:**\n```\nGET /api/admin/campaign/campaigns/[id]\n```\n\n**Update Campaign:**\n```\nPUT /api/admin/campaign/campaigns\n```\n\n**Request Body:**\n```json\n{\n  \"id\": \"campaign-id\",\n  \"name\": \"Updated Name\",\n  \"description\": \"Updated description\",\n  \"status\": \"SCHEDULED\",\n  \"steps\": []\n}\n```\n\n**Delete Campaign:**\n```\nDELETE /api/admin/campaign/campaigns/[id]\n```\n\n**Campaign Status Values:**\n- `DRAFT` - Not yet ready\n- `SCHEDULED` - Scheduled to send\n- `SENDING` - Currently sending\n- `PAUSED` - Paused\n- `COMPLETED` - Finished\n- `CANCELLED` - Cancelled\n\nLet me execute the appropriate action for your request."}
{"instruction": "Create a new email campaign", "input": "Create a campaign for newsletter subscribers", "output": "I'll help you create a new campaign. Based on your request, here's what I need:\n\n**Required Information:**\n1. **Campaign Name**: What should we call this campaign?\n2. **Steps**: Campaign steps with templateId, groupId, and scheduling\n\n**API Endpoint:**\n```\nPOST /api/admin/campaign/campaigns\n```\n\n**Request Body:**\n```json\n{\n  \"name\": \"Campaign Name\",\n  \"description\": \"Optional description\",\n  \"status\": \"DRAFT\",\n  \"steps\": [\n    {\n      \"templateId\": \"template-id\",\n      \"groupId\": \"audience-group-id\",\n      \"sendAt\": \"2025-01-15T10:00:00Z\",\n      \"stepOrder\": 1\n    }\n  ]\n}\n```\n\n**Campaign Status Options:**\n- `DRAFT` - Not yet ready to send\n- `SCHEDULED` - Scheduled for future send\n- `SENDING` - Currently being sent\n- `PAUSED` - Temporarily paused\n- `COMPLETED` - Finished sending\n- `CANCELLED` - Cancelled\n\n**Required Fields:**\n- `name` (string) - Campaign name\n- `steps` (array) - Array of campaign steps\n\n**Step Object Required Fields:**\n- `templateId` (string) - Email template ID\n- `groupId` (string) - Audience group ID\n- `stepOrder` (number) - Order of execution\n\n**Optional Step Fields:**\n- `sendAt` (ISO date string) - When to send\n- `throttlePerMinute` (number) - Email sending rate\n- `timeZone` (string) - Timezone for scheduling\n\nWould you like me to help you set up the campaign steps?"}
{"instruction": "Manage email campaigns", "input": "Show me all campaigns", "output": "I'll help you manage your campaigns. Here are the available actions:\n\n**List Campaigns:**\n```\nGET /api/admin/campaign/campaigns\n```\n\n**Response:**\n```json\n{\n  \"campaigns\": [\n    {\n      \"id\": \"campaign-id\",\n      \"name\": \"Campaign Name\",\n      \"description\": \"Description\",\n      \"status\": \"DRAFT\",\n      \"meta\": {},\n      \"createdAt\": \"2025-01-15T10:00:00Z\",\n      \"updatedAt\": \"2025-01-15T10:00:00Z\",\n      \"schedules\": []\n    }\n  ]\n}\n```\n\n**Get Campaign Details:**\n```\nGET /api/admin/campaign/campaigns/[id]\n```\n\n**Update Campaign:**\n```\nPUT /api/admin/campaign/campaigns\n```\n\n**Request Body:**\n```json\n{\n  \"id\": \"campaign-id\",\n  \"name\": \"Updated Name\",\n  \"description\": \"Updated description\",\n  \"status\": \"SCHEDULED\",\n  \"steps\": []\n}\n```\n\n**Delete Campaign:**\n```\nDELETE /api/admin/campaign/campaigns/[id]\n```\n\n**Campaign Status Values:**\n- `DRAFT` - Not yet ready\n- `SCHEDULED` - Scheduled to send\n- `SENDING` - Currently sending\n- `PAUSED` - Paused\n- `COMPLETED` - Finished\n- `CANCELLED` - Cancelled\n\nLet me execute the appropriate action for your request."}
{"instruction": "Create and manage campaign schedules", "input": "Create a new schedule", "output": "I'll help you create a campaign schedule. Here's what I need:\n\n**Required Information:**\n1. **Schedule Name**: What should we call this schedule?\n2. **Template ID**: Which email template to use?\n3. **Group ID**: Which audience group to target?\n\n**API Endpoint:**\n```\nPOST /api/admin/campaign/schedules\n```\n\n**Request Body:**\n```json\n{\n  \"name\": \"Schedule Name\",\n  \"templateId\": \"template-id\",\n  \"groupId\": \"audience-group-id\",\n  \"campaignId\": \"campaign-id\",\n  \"sendAt\": \"2025-01-15T10:00:00Z\",\n  \"throttlePerMinute\": 60,\n  \"repeatIntervalMins\": null,\n  \"stepOrder\": 1,\n  \"smartWindowStart\": \"2025-01-15T09:00:00Z\",\n  \"smartWindowEnd\": \"2025-01-15T17:00:00Z\",\n  \"timeZone\": \"America/Vancouver\",\n  \"status\": \"DRAFT\"\n}\n```\n\n**Required Fields:**\n- `name` (string) - Schedule name\n- `templateId` (string) - Email template ID\n- `groupId` (string) - Audience group ID\n\n**Optional Fields:**\n- `campaignId` (string) - Associated campaign ID\n- `sendAt` (ISO date string) - When to send (null for immediate)\n- `throttlePerMinute` (number) - Email sending rate (default: 60)\n- `repeatIntervalMins` (number) - Recurring interval in minutes\n- `stepOrder` (number) - Order in multi-step campaign (default: 1)\n- `smartWindowStart` (ISO date string) - Smart sending window start\n- `smartWindowEnd` (ISO date string) - Smart sending window end\n- `timeZone` (string) - Timezone (default: \"America/Vancouver\")\n- `status` (string) - Schedule status\n\n**Schedule Status Options:**\n- `DRAFT` - Not yet ready\n- `SCHEDULED` - Scheduled to send\n- `SENDING` - Currently sending\n- `PAUSED` - Paused\n- `COMPLETED` - Finished\n- `CANCELLED` - Cancelled\n\n**Response:**\n```json\n{\n  \"schedule\": {\n    \"id\": \"schedule-id\",\n    \"name\": \"Schedule Name\",\n    \"templateId\": \"template-id\",\n    \"groupId\": \"audience-group-id\",\n    \"status\": \"DRAFT\",\n    \"sendAt\": \"2025-01-15T10:00:00Z\",\n    \"timeZone\": \"America/Vancouver\",\n    \"throttlePerMinute\": 60,\n    \"createdAt\": \"2025-01-15T10:00:00Z\",\n    \"updatedAt\": \"2025-01-15T10:00:00Z\"\n  }\n}\n```\n\nWould you like me to help you set up the schedule details?"}
{"instruction": "View analytics and generate reports", "input": "Show me audience engagement", "output": "I'll help you analyze your email performance. Here's what I can show you:\n\n**Campaign Analytics:**\n\n**CampaignSend Status Tracking:**\n```json\n{\n  \"id\": \"send-id\",\n  \"scheduleId\": \"schedule-id\",\n  \"groupId\": \"group-id\",\n  \"templateId\": \"template-id\",\n  \"businessId\": \"business-id\",\n  \"businessName\": \"Business Name\",\n  \"email\": \"email@example.com\",\n  \"inviteToken\": \"token\",\n  \"inviteLink\": \"https://example.com/l/token\",\n  \"resendMessageId\": \"resend-message-id\",\n  \"status\": \"SENT\",\n  \"error\": null,\n  \"meta\": {},\n  \"sentAt\": \"2025-01-15T10:00:00Z\",\n  \"openedAt\": \"2025-01-15T10:05:00Z\",\n  \"visitedAt\": \"2025-01-15T10:10:00Z\"\n}\n```\n\n**CampaignSend Status Values:**\n- `PENDING` - Not yet sent\n- `SENDING` - Currently being sent\n- `SENT` - Successfully sent\n- `FAILED` - Failed to send\n- `SKIPPED` - Skipped (e.g., unsubscribed)\n\n**Key Metrics:**\n- **Sent Count**: Total emails sent\n- **Open Rate**: Percentage of emails opened (openedAt not null)\n- **Click Rate**: Percentage of emails clicked (visitedAt not null)\n- **Bounce Rate**: Percentage of failed sends\n- **Unsubscribe Rate**: Percentage of unsubscribed members\n\n**Visit Tracking:**\n```json\n{\n  \"id\": \"visit-id\",\n  \"createdAt\": \"2025-01-15T10:00:00Z\",\n  \"visitorId\": \"visitor-id\",\n  \"sessionId\": \"session-id\",\n  \"path\": \"/event-page\",\n  \"query\": \"?utm_source=email\",\n  \"referrer\": \"https://example.com\",\n  \"eid\": \"event-id\",\n  \"utmSource\": \"email\",\n  \"utmMedium\": \"newsletter\",\n  \"utmCampaign\": \"summer-event\",\n  \"userAgent\": \"Mozilla/5.0...\",\n  \"language\": \"en-US\",\n  \"country\": \"Canada\",\n  \"region\": \"BC\",\n  \"city\": \"Vancouver\",\n  \"timeOnPageMs\": 30000,\n  \"scrollDepth\": 75\n}\n```\n\n**Analytics Endpoints:**\n- `GET /api/admin/campaign/dashboard` - Dashboard overview\n- `GET /api/admin/export` - Export data\n- `GET /api/l/[token]` - Track link clicks\n- `GET /api/__pixel` - Track email opens\n\n**Export Options:**\n- CSV format for RSVP data\n- JSON format for campaign data\n- Filtered by date range\n- Filtered by campaign/group\n\n**Performance Tracking:**\n- Email delivery rates\n- Open and click tracking\n- Geographic distribution\n- Device and browser analytics\n- Time-based performance\n- A/B testing results\n\nLet me generate the appropriate analytics report for your request."}
{"instruction": "Explain system architecture and technical details", "input": "What's the system architecture?", "output": "I'll explain the technical architecture of the RSVP system:\n\n**System Architecture:**\n\n**Frontend:**\n- **Framework**: Next.js 14 with React\n- **Styling**: Tailwind CSS\n- **Animations**: Framer Motion\n- **State Management**: React hooks (useState, useEffect)\n- **Authentication**: Session-based with cookies\n\n**Backend:**\n- **Runtime**: Node.js\n- **Framework**: Next.js API routes\n- **Database**: PostgreSQL with Prisma ORM\n- **Email Service**: Resend API\n- **Vector Database**: Weaviate (for RAG)\n- **AI Integration**: Gemini 2.5 Flash\n\n**Database Models:**\n- `RSVP` - Event RSVP submissions\n- `Visit` - Website visit tracking\n- `CampaignTemplate` - Email templates\n- `Campaign` - Email campaigns\n- `AudienceGroup` - Audience segmentation\n- `AudienceMember` - Individual audience members\n- `CampaignSchedule` - Campaign scheduling\n- `CampaignSend` - Individual email sends\n\n**API Structure:**\n- `/api/rsvp` - RSVP form submission\n- `/api/admin/campaign/campaigns` - Campaign management\n- `/api/admin/campaign/schedules` - Schedule management\n- `/api/admin/campaign/templates` - Template management\n- `/api/admin/campaign/groups` - Audience group management\n- `/api/admin/campaign/send` - Email sending\n- `/api/admin/export` - Data export\n- `/api/unsubscribe` - Unsubscribe handling\n- `/api/l/[token]` - Link tracking\n- `/api/__pixel` - Email open tracking\n\n**Security Features:**\n- CSRF protection with origin/referer validation\n- Rate limiting with IP fingerprinting\n- Input validation with Zod schemas\n- Test detection to prevent spam\n- Security logging for monitoring\n- Secure headers with CSP\n\n**Environment Variables:**\n- `DATABASE_URL` - PostgreSQL connection\n- `RESEND_API_KEY` - Email service\n- `GEMINI_API_KEY` - AI service\n- `WEAVIATE_URL` - Vector database\n- `WEAVIATE_API_KEY` - Vector database auth\n- `CRON_SECRET` - Cron job authentication\n\n**File Structure:**\n```\nrsvp-app/\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 app/           # Next.js app router\n\u2502   \u2502   \u251c\u2500\u2500 api/       # API routes\n\u2502   \u2502   \u251c\u2500\u2500 admin/     # Admin panel\n\u2502   \u2502   \u2514\u2500\u2500 (public)/  # Public pages\n\u2502   \u251c\u2500\u2500 components/    # React components\n\u2502   \u251c\u2500\u2500 lib/          # Utilities and services\n\u2502   \u2514\u2500\u2500 prisma/       # Database schema\n\u251c\u2500\u2500 public/           # Static assets\n\u2514\u2500\u2500 docs/            # Documentation\n```\n\n**Deployment:**\n- **Platform**: Vercel (frontend)\n- **Database**: Neon (PostgreSQL)\n- **AI Service**: Railway (planned)\n- **Vector DB**: Weaviate Cloud\n\n**Email Delivery:**\n- Resend API for email sending\n- Throttling support (emails per minute)\n- Smart sending windows\n- Timezone support\n- Recurring campaigns\n- Link and open tracking\n\n**AI Assistant (Juniper):**\n- Conversational interface\n- Real-time execution display\n- Tool integration for database operations\n- Context awareness\n- Error handling and recovery\n- Pattern-matching system (to be replaced with fine-tuned SLM)\n\nThis architecture provides a scalable, secure, and maintainable system for RSVP management and email campaigns."}
{"instruction": "Create and manage audience groups", "input": "Create a new audience group", "output": "I'll help you create a new audience group. Here's what I need:\n\n**Required Information:**\n1. **Group Name**: What should we call this group?\n2. **Description**: What does this group represent?\n\n**API Endpoint:**\n```\nPOST /api/admin/campaign/groups\n```\n\n**Request Body:**\n```json\n{\n  \"name\": \"Group Name\",\n  \"description\": \"Description of the group\",\n  \"color\": \"#10b981\",\n  \"criteria\": {\n    \"industry\": \"technology\",\n    \"engagement\": \"high\",\n    \"tags\": [\"vip\", \"premium\"]\n  },\n  \"meta\": {}\n}\n```\n\n**Required Fields:**\n- `name` (string) - Group name\n- `description` (string) - Group description\n- `criteria` (object) - Group criteria\n- `meta` (object) - Group metadata\n\n**Optional Fields:**\n- `color` (string) - Group color (default: \"#10b981\")\n\n**Response:**\n```json\n{\n  \"group\": {\n    \"id\": \"group-id\",\n    \"name\": \"Group Name\",\n    \"description\": \"Description\",\n    \"color\": \"#10b981\",\n    \"criteria\": {},\n    \"meta\": {},\n    \"createdAt\": \"2025-01-15T10:00:00Z\",\n    \"updatedAt\": \"2025-01-15T10:00:00Z\",\n    \"members\": []\n  }\n}\n```\n\n**Audience Member Structure:**\n```json\n{\n  \"id\": \"member-id\",\n  \"groupId\": \"group-id\",\n  \"businessId\": \"business-id\",\n  \"businessName\": \"Business Name\",\n  \"primaryEmail\": \"email@example.com\",\n  \"secondaryEmail\": \"secondary@example.com\",\n  \"tagsSnapshot\": [\"tag1\", \"tag2\"],\n  \"inviteToken\": \"token\",\n  \"meta\": {},\n  \"createdAt\": \"2025-01-15T10:00:00Z\",\n  \"unsubscribed\": false\n}\n```\n\n**Member Status:**\n- `unsubscribed` (boolean) - Whether member has unsubscribed\n\n**Database Constraints:**\n- Unique constraint on `[groupId, businessId]`\n- Indexes on `groupId` and `businessId`\n\nWould you like me to help you set up the group criteria?"}
{"instruction": "Explain system architecture and technical details", "input": "How does the database work?", "output": "I'll explain the technical architecture of the RSVP system:\n\n**System Architecture:**\n\n**Frontend:**\n- **Framework**: Next.js 14 with React\n- **Styling**: Tailwind CSS\n- **Animations**: Framer Motion\n- **State Management**: React hooks (useState, useEffect)\n- **Authentication**: Session-based with cookies\n\n**Backend:**\n- **Runtime**: Node.js\n- **Framework**: Next.js API routes\n- **Database**: PostgreSQL with Prisma ORM\n- **Email Service**: Resend API\n- **Vector Database**: Weaviate (for RAG)\n- **AI Integration**: Gemini 2.5 Flash\n\n**Database Models:**\n- `RSVP` - Event RSVP submissions\n- `Visit` - Website visit tracking\n- `CampaignTemplate` - Email templates\n- `Campaign` - Email campaigns\n- `AudienceGroup` - Audience segmentation\n- `AudienceMember` - Individual audience members\n- `CampaignSchedule` - Campaign scheduling\n- `CampaignSend` - Individual email sends\n\n**API Structure:**\n- `/api/rsvp` - RSVP form submission\n- `/api/admin/campaign/campaigns` - Campaign management\n- `/api/admin/campaign/schedules` - Schedule management\n- `/api/admin/campaign/templates` - Template management\n- `/api/admin/campaign/groups` - Audience group management\n- `/api/admin/campaign/send` - Email sending\n- `/api/admin/export` - Data export\n- `/api/unsubscribe` - Unsubscribe handling\n- `/api/l/[token]` - Link tracking\n- `/api/__pixel` - Email open tracking\n\n**Security Features:**\n- CSRF protection with origin/referer validation\n- Rate limiting with IP fingerprinting\n- Input validation with Zod schemas\n- Test detection to prevent spam\n- Security logging for monitoring\n- Secure headers with CSP\n\n**Environment Variables:**\n- `DATABASE_URL` - PostgreSQL connection\n- `RESEND_API_KEY` - Email service\n- `GEMINI_API_KEY` - AI service\n- `WEAVIATE_URL` - Vector database\n- `WEAVIATE_API_KEY` - Vector database auth\n- `CRON_SECRET` - Cron job authentication\n\n**File Structure:**\n```\nrsvp-app/\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 app/           # Next.js app router\n\u2502   \u2502   \u251c\u2500\u2500 api/       # API routes\n\u2502   \u2502   \u251c\u2500\u2500 admin/     # Admin panel\n\u2502   \u2502   \u2514\u2500\u2500 (public)/  # Public pages\n\u2502   \u251c\u2500\u2500 components/    # React components\n\u2502   \u251c\u2500\u2500 lib/          # Utilities and services\n\u2502   \u2514\u2500\u2500 prisma/       # Database schema\n\u251c\u2500\u2500 public/           # Static assets\n\u2514\u2500\u2500 docs/            # Documentation\n```\n\n**Deployment:**\n- **Platform**: Vercel (frontend)\n- **Database**: Neon (PostgreSQL)\n- **AI Service**: Railway (planned)\n- **Vector DB**: Weaviate Cloud\n\n**Email Delivery:**\n- Resend API for email sending\n- Throttling support (emails per minute)\n- Smart sending windows\n- Timezone support\n- Recurring campaigns\n- Link and open tracking\n\n**AI Assistant (Juniper):**\n- Conversational interface\n- Real-time execution display\n- Tool integration for database operations\n- Context awareness\n- Error handling and recovery\n- Pattern-matching system (to be replaced with fine-tuned SLM)\n\nThis architecture provides a scalable, secure, and maintainable system for RSVP management and email campaigns."}
{"instruction": "Create and manage email templates", "input": "Make a template for promotional emails", "output": "I'll help you create a new email template. Here's what I need:\n\n**Required Information:**\n1. **Template Name**: What should we call this template?\n2. **Subject**: Email subject line\n3. **HTML Body**: Rich HTML content\n4. **Text Body**: Plain text version (optional)\n\n**API Endpoint:**\n```\nPOST /api/admin/campaign/templates\n```\n\n**Request Body:**\n```json\n{\n  \"name\": \"Template Name\",\n  \"subject\": \"Email Subject\",\n  \"htmlBody\": \"<h1>Hello {name}</h1><p>Content here</p>\",\n  \"textBody\": \"Hello {name}\\n\\nContent here\",\n  \"meta\": {},\n  \"greeting_title\": \"Welcome!\",\n  \"greeting_message\": \"Thank you for joining us\",\n  \"signature_name\": \"Your Name\",\n  \"signature_title\": \"Your Title\",\n  \"signature_company\": \"Your Company\",\n  \"signature_location\": \"Your Location\",\n  \"main_content_title\": \"Main Title\",\n  \"main_content_body\": \"Main content here\",\n  \"button_text\": \"Click Here\",\n  \"additional_info_title\": \"Additional Info\",\n  \"additional_info_body\": \"Additional details\",\n  \"closing_title\": \"Thank You\",\n  \"closing_message\": \"Best regards\"\n}\n```\n\n**Required Fields:**\n- `name` (string) - Template name\n- `subject` (string) - Email subject\n- `htmlBody` (string) - HTML content\n- `meta` (object) - Template metadata\n\n**Optional Fields:**\n- `textBody` (string) - Plain text version\n- `greeting_title` (string) - Greeting title\n- `greeting_message` (string) - Greeting message\n- `signature_name` (string) - Signature name\n- `signature_title` (string) - Signature title\n- `signature_company` (string) - Signature company\n- `signature_location` (string) - Signature location\n- `main_content_title` (string) - Main content title\n- `main_content_body` (string) - Main content body\n- `button_text` (string) - Button text\n- `additional_info_title` (string) - Additional info title\n- `additional_info_body` (string) - Additional info body\n- `closing_title` (string) - Closing title\n- `closing_message` (string) - Closing message\n\n**Template Variables:**\n- `{name}` - Recipient's name\n- `{email}` - Recipient's email\n- `{firstName}` - First name\n- `{lastName}` - Last name\n- `{unsubscribeUrl}` - Unsubscribe link\n\n**Response:**\n```json\n{\n  \"template\": {\n    \"id\": \"template-id\",\n    \"name\": \"Template Name\",\n    \"subject\": \"Email Subject\",\n    \"htmlBody\": \"<h1>Hello {name}</h1>\",\n    \"textBody\": \"Hello {name}\",\n    \"meta\": {},\n    \"createdAt\": \"2025-01-15T10:00:00Z\",\n    \"updatedAt\": \"2025-01-15T10:00:00Z\"\n  }\n}\n```\n\nWould you like me to help you create this template with some default content?"}
{"instruction": "View and manage RSVP data", "input": "List all RSVPs", "output": "I'll help you view RSVP data. Here's what I can show you:\n\n**RSVP Data Structure:**\n```json\n{\n  \"id\": \"rsvp-id\",\n  \"fullName\": \"John Doe\",\n  \"organization\": \"Company Name\",\n  \"email\": \"john@example.com\",\n  \"phone\": \"+1234567890\",\n  \"attendanceStatus\": \"CONFIRMED\",\n  \"attendeeCount\": 2,\n  \"dietaryPreference\": \"VEGETARIAN\",\n  \"dietaryOther\": \"No nuts\",\n  \"accessibilityNeeds\": \"Wheelchair access\",\n  \"referralSource\": \"WEBSITE\",\n  \"referralOther\": \"Google search\",\n  \"wantsResources\": true,\n  \"wantsAudit\": false,\n  \"learningGoal\": \"Learn about new technologies\",\n  \"createdAt\": \"2025-01-15T10:00:00Z\",\n  \"visitorId\": \"visitor-id\",\n  \"sessionId\": \"session-id\",\n  \"referrer\": \"https://example.com\",\n  \"eid\": \"event-id\",\n  \"utmSource\": \"google\",\n  \"utmMedium\": \"cpc\",\n  \"utmCampaign\": \"summer-event\",\n  \"utmTerm\": \"tech conference\",\n  \"utmContent\": \"banner-ad\",\n  \"userAgent\": \"Mozilla/5.0...\",\n  \"language\": \"en-US\",\n  \"tz\": \"America/Vancouver\",\n  \"country\": \"Canada\",\n  \"region\": \"BC\",\n  \"city\": \"Vancouver\",\n  \"ipHash\": \"hashed-ip\",\n  \"screenW\": 1920,\n  \"screenH\": 1080,\n  \"dpr\": 2.0,\n  \"platform\": \"MacIntel\",\n  \"device\": \"desktop\",\n  \"browser\": \"Chrome\",\n  \"meta\": \"additional data\"\n}\n```\n\n**Key Fields:**\n- `attendanceStatus` (string) - CONFIRMED, CANCELLED, etc.\n- `attendeeCount` (number) - Number of attendees\n- `dietaryPreference` (string) - Dietary requirements\n- `accessibilityNeeds` (string) - Accessibility requirements\n- `referralSource` (string) - How they found the event\n- `wantsResources` (boolean) - Wants additional resources\n- `wantsAudit` (boolean) - Wants audit information\n- `learningGoal` (string) - What they want to learn\n\n**Tracking Data:**\n- `visitorId` - Unique visitor identifier\n- `sessionId` - Session identifier\n- `referrer` - Referring URL\n- `utmSource`, `utmMedium`, `utmCampaign`, `utmTerm`, `utmContent` - UTM tracking\n- `userAgent` - Browser information\n- `language` - User language\n- `tz` - Timezone\n- `country`, `region`, `city` - Geographic data\n- `ipHash` - Hashed IP address\n- `screenW`, `screenH`, `dpr` - Screen information\n- `platform`, `device`, `browser` - Device information\n\n**Database Constraints:**\n- `email` field is unique\n- `id` is primary key (cuid)\n\n**API Endpoint:**\n```\nPOST /api/rsvp\n```\n\n**Security Features:**\n- CSRF protection\n- Rate limiting\n- Input validation\n- Test detection\n- Security logging\n\nLet me show you the RSVP data based on your request."}
{"instruction": "Create and manage audience groups", "input": "Create a group for premium members", "output": "I'll help you create a new audience group. Here's what I need:\n\n**Required Information:**\n1. **Group Name**: What should we call this group?\n2. **Description**: What does this group represent?\n\n**API Endpoint:**\n```\nPOST /api/admin/campaign/groups\n```\n\n**Request Body:**\n```json\n{\n  \"name\": \"Group Name\",\n  \"description\": \"Description of the group\",\n  \"color\": \"#10b981\",\n  \"criteria\": {\n    \"industry\": \"technology\",\n    \"engagement\": \"high\",\n    \"tags\": [\"vip\", \"premium\"]\n  },\n  \"meta\": {}\n}\n```\n\n**Required Fields:**\n- `name` (string) - Group name\n- `description` (string) - Group description\n- `criteria` (object) - Group criteria\n- `meta` (object) - Group metadata\n\n**Optional Fields:**\n- `color` (string) - Group color (default: \"#10b981\")\n\n**Response:**\n```json\n{\n  \"group\": {\n    \"id\": \"group-id\",\n    \"name\": \"Group Name\",\n    \"description\": \"Description\",\n    \"color\": \"#10b981\",\n    \"criteria\": {},\n    \"meta\": {},\n    \"createdAt\": \"2025-01-15T10:00:00Z\",\n    \"updatedAt\": \"2025-01-15T10:00:00Z\",\n    \"members\": []\n  }\n}\n```\n\n**Audience Member Structure:**\n```json\n{\n  \"id\": \"member-id\",\n  \"groupId\": \"group-id\",\n  \"businessId\": \"business-id\",\n  \"businessName\": \"Business Name\",\n  \"primaryEmail\": \"email@example.com\",\n  \"secondaryEmail\": \"secondary@example.com\",\n  \"tagsSnapshot\": [\"tag1\", \"tag2\"],\n  \"inviteToken\": \"token\",\n  \"meta\": {},\n  \"createdAt\": \"2025-01-15T10:00:00Z\",\n  \"unsubscribed\": false\n}\n```\n\n**Member Status:**\n- `unsubscribed` (boolean) - Whether member has unsubscribed\n\n**Database Constraints:**\n- Unique constraint on `[groupId, businessId]`\n- Indexes on `groupId` and `businessId`\n\nWould you like me to help you set up the group criteria?"}
{"instruction": "Create a new email campaign", "input": "Make a campaign for our premium members", "output": "I'll help you create a new campaign. Based on your request, here's what I need:\n\n**Required Information:**\n1. **Campaign Name**: What should we call this campaign?\n2. **Steps**: Campaign steps with templateId, groupId, and scheduling\n\n**API Endpoint:**\n```\nPOST /api/admin/campaign/campaigns\n```\n\n**Request Body:**\n```json\n{\n  \"name\": \"Campaign Name\",\n  \"description\": \"Optional description\",\n  \"status\": \"DRAFT\",\n  \"steps\": [\n    {\n      \"templateId\": \"template-id\",\n      \"groupId\": \"audience-group-id\",\n      \"sendAt\": \"2025-01-15T10:00:00Z\",\n      \"stepOrder\": 1\n    }\n  ]\n}\n```\n\n**Campaign Status Options:**\n- `DRAFT` - Not yet ready to send\n- `SCHEDULED` - Scheduled for future send\n- `SENDING` - Currently being sent\n- `PAUSED` - Temporarily paused\n- `COMPLETED` - Finished sending\n- `CANCELLED` - Cancelled\n\n**Required Fields:**\n- `name` (string) - Campaign name\n- `steps` (array) - Array of campaign steps\n\n**Step Object Required Fields:**\n- `templateId` (string) - Email template ID\n- `groupId` (string) - Audience group ID\n- `stepOrder` (number) - Order of execution\n\n**Optional Step Fields:**\n- `sendAt` (ISO date string) - When to send\n- `throttlePerMinute` (number) - Email sending rate\n- `timeZone` (string) - Timezone for scheduling\n\nWould you like me to help you set up the campaign steps?"}
{"instruction": "Explain system architecture and technical details", "input": "What are the environment variables?", "output": "I'll explain the technical architecture of the RSVP system:\n\n**System Architecture:**\n\n**Frontend:**\n- **Framework**: Next.js 14 with React\n- **Styling**: Tailwind CSS\n- **Animations**: Framer Motion\n- **State Management**: React hooks (useState, useEffect)\n- **Authentication**: Session-based with cookies\n\n**Backend:**\n- **Runtime**: Node.js\n- **Framework**: Next.js API routes\n- **Database**: PostgreSQL with Prisma ORM\n- **Email Service**: Resend API\n- **Vector Database**: Weaviate (for RAG)\n- **AI Integration**: Gemini 2.5 Flash\n\n**Database Models:**\n- `RSVP` - Event RSVP submissions\n- `Visit` - Website visit tracking\n- `CampaignTemplate` - Email templates\n- `Campaign` - Email campaigns\n- `AudienceGroup` - Audience segmentation\n- `AudienceMember` - Individual audience members\n- `CampaignSchedule` - Campaign scheduling\n- `CampaignSend` - Individual email sends\n\n**API Structure:**\n- `/api/rsvp` - RSVP form submission\n- `/api/admin/campaign/campaigns` - Campaign management\n- `/api/admin/campaign/schedules` - Schedule management\n- `/api/admin/campaign/templates` - Template management\n- `/api/admin/campaign/groups` - Audience group management\n- `/api/admin/campaign/send` - Email sending\n- `/api/admin/export` - Data export\n- `/api/unsubscribe` - Unsubscribe handling\n- `/api/l/[token]` - Link tracking\n- `/api/__pixel` - Email open tracking\n\n**Security Features:**\n- CSRF protection with origin/referer validation\n- Rate limiting with IP fingerprinting\n- Input validation with Zod schemas\n- Test detection to prevent spam\n- Security logging for monitoring\n- Secure headers with CSP\n\n**Environment Variables:**\n- `DATABASE_URL` - PostgreSQL connection\n- `RESEND_API_KEY` - Email service\n- `GEMINI_API_KEY` - AI service\n- `WEAVIATE_URL` - Vector database\n- `WEAVIATE_API_KEY` - Vector database auth\n- `CRON_SECRET` - Cron job authentication\n\n**File Structure:**\n```\nrsvp-app/\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 app/           # Next.js app router\n\u2502   \u2502   \u251c\u2500\u2500 api/       # API routes\n\u2502   \u2502   \u251c\u2500\u2500 admin/     # Admin panel\n\u2502   \u2502   \u2514\u2500\u2500 (public)/  # Public pages\n\u2502   \u251c\u2500\u2500 components/    # React components\n\u2502   \u251c\u2500\u2500 lib/          # Utilities and services\n\u2502   \u2514\u2500\u2500 prisma/       # Database schema\n\u251c\u2500\u2500 public/           # Static assets\n\u2514\u2500\u2500 docs/            # Documentation\n```\n\n**Deployment:**\n- **Platform**: Vercel (frontend)\n- **Database**: Neon (PostgreSQL)\n- **AI Service**: Railway (planned)\n- **Vector DB**: Weaviate Cloud\n\n**Email Delivery:**\n- Resend API for email sending\n- Throttling support (emails per minute)\n- Smart sending windows\n- Timezone support\n- Recurring campaigns\n- Link and open tracking\n\n**AI Assistant (Juniper):**\n- Conversational interface\n- Real-time execution display\n- Tool integration for database operations\n- Context awareness\n- Error handling and recovery\n- Pattern-matching system (to be replaced with fine-tuned SLM)\n\nThis architecture provides a scalable, secure, and maintainable system for RSVP management and email campaigns."}
{"instruction": "Create and manage email templates", "input": "Make a template for product announcements", "output": "I'll help you create a new email template. Here's what I need:\n\n**Required Information:**\n1. **Template Name**: What should we call this template?\n2. **Subject**: Email subject line\n3. **HTML Body**: Rich HTML content\n4. **Text Body**: Plain text version (optional)\n\n**API Endpoint:**\n```\nPOST /api/admin/campaign/templates\n```\n\n**Request Body:**\n```json\n{\n  \"name\": \"Template Name\",\n  \"subject\": \"Email Subject\",\n  \"htmlBody\": \"<h1>Hello {name}</h1><p>Content here</p>\",\n  \"textBody\": \"Hello {name}\\n\\nContent here\",\n  \"meta\": {},\n  \"greeting_title\": \"Welcome!\",\n  \"greeting_message\": \"Thank you for joining us\",\n  \"signature_name\": \"Your Name\",\n  \"signature_title\": \"Your Title\",\n  \"signature_company\": \"Your Company\",\n  \"signature_location\": \"Your Location\",\n  \"main_content_title\": \"Main Title\",\n  \"main_content_body\": \"Main content here\",\n  \"button_text\": \"Click Here\",\n  \"additional_info_title\": \"Additional Info\",\n  \"additional_info_body\": \"Additional details\",\n  \"closing_title\": \"Thank You\",\n  \"closing_message\": \"Best regards\"\n}\n```\n\n**Required Fields:**\n- `name` (string) - Template name\n- `subject` (string) - Email subject\n- `htmlBody` (string) - HTML content\n- `meta` (object) - Template metadata\n\n**Optional Fields:**\n- `textBody` (string) - Plain text version\n- `greeting_title` (string) - Greeting title\n- `greeting_message` (string) - Greeting message\n- `signature_name` (string) - Signature name\n- `signature_title` (string) - Signature title\n- `signature_company` (string) - Signature company\n- `signature_location` (string) - Signature location\n- `main_content_title` (string) - Main content title\n- `main_content_body` (string) - Main content body\n- `button_text` (string) - Button text\n- `additional_info_title` (string) - Additional info title\n- `additional_info_body` (string) - Additional info body\n- `closing_title` (string) - Closing title\n- `closing_message` (string) - Closing message\n\n**Template Variables:**\n- `{name}` - Recipient's name\n- `{email}` - Recipient's email\n- `{firstName}` - First name\n- `{lastName}` - Last name\n- `{unsubscribeUrl}` - Unsubscribe link\n\n**Response:**\n```json\n{\n  \"template\": {\n    \"id\": \"template-id\",\n    \"name\": \"Template Name\",\n    \"subject\": \"Email Subject\",\n    \"htmlBody\": \"<h1>Hello {name}</h1>\",\n    \"textBody\": \"Hello {name}\",\n    \"meta\": {},\n    \"createdAt\": \"2025-01-15T10:00:00Z\",\n    \"updatedAt\": \"2025-01-15T10:00:00Z\"\n  }\n}\n```\n\nWould you like me to help you create this template with some default content?"}
{"instruction": "Manage email campaigns", "input": "List my campaigns", "output": "I'll help you manage your campaigns. Here are the available actions:\n\n**List Campaigns:**\n```\nGET /api/admin/campaign/campaigns\n```\n\n**Response:**\n```json\n{\n  \"campaigns\": [\n    {\n      \"id\": \"campaign-id\",\n      \"name\": \"Campaign Name\",\n      \"description\": \"Description\",\n      \"status\": \"DRAFT\",\n      \"meta\": {},\n      \"createdAt\": \"2025-01-15T10:00:00Z\",\n      \"updatedAt\": \"2025-01-15T10:00:00Z\",\n      \"schedules\": []\n    }\n  ]\n}\n```\n\n**Get Campaign Details:**\n```\nGET /api/admin/campaign/campaigns/[id]\n```\n\n**Update Campaign:**\n```\nPUT /api/admin/campaign/campaigns\n```\n\n**Request Body:**\n```json\n{\n  \"id\": \"campaign-id\",\n  \"name\": \"Updated Name\",\n  \"description\": \"Updated description\",\n  \"status\": \"SCHEDULED\",\n  \"steps\": []\n}\n```\n\n**Delete Campaign:**\n```\nDELETE /api/admin/campaign/campaigns/[id]\n```\n\n**Campaign Status Values:**\n- `DRAFT` - Not yet ready\n- `SCHEDULED` - Scheduled to send\n- `SENDING` - Currently sending\n- `PAUSED` - Paused\n- `COMPLETED` - Finished\n- `CANCELLED` - Cancelled\n\nLet me execute the appropriate action for your request."}
{"instruction": "Explain system architecture and technical details", "input": "How does email delivery work?", "output": "I'll explain the technical architecture of the RSVP system:\n\n**System Architecture:**\n\n**Frontend:**\n- **Framework**: Next.js 14 with React\n- **Styling**: Tailwind CSS\n- **Animations**: Framer Motion\n- **State Management**: React hooks (useState, useEffect)\n- **Authentication**: Session-based with cookies\n\n**Backend:**\n- **Runtime**: Node.js\n- **Framework**: Next.js API routes\n- **Database**: PostgreSQL with Prisma ORM\n- **Email Service**: Resend API\n- **Vector Database**: Weaviate (for RAG)\n- **AI Integration**: Gemini 2.5 Flash\n\n**Database Models:**\n- `RSVP` - Event RSVP submissions\n- `Visit` - Website visit tracking\n- `CampaignTemplate` - Email templates\n- `Campaign` - Email campaigns\n- `AudienceGroup` - Audience segmentation\n- `AudienceMember` - Individual audience members\n- `CampaignSchedule` - Campaign scheduling\n- `CampaignSend` - Individual email sends\n\n**API Structure:**\n- `/api/rsvp` - RSVP form submission\n- `/api/admin/campaign/campaigns` - Campaign management\n- `/api/admin/campaign/schedules` - Schedule management\n- `/api/admin/campaign/templates` - Template management\n- `/api/admin/campaign/groups` - Audience group management\n- `/api/admin/campaign/send` - Email sending\n- `/api/admin/export` - Data export\n- `/api/unsubscribe` - Unsubscribe handling\n- `/api/l/[token]` - Link tracking\n- `/api/__pixel` - Email open tracking\n\n**Security Features:**\n- CSRF protection with origin/referer validation\n- Rate limiting with IP fingerprinting\n- Input validation with Zod schemas\n- Test detection to prevent spam\n- Security logging for monitoring\n- Secure headers with CSP\n\n**Environment Variables:**\n- `DATABASE_URL` - PostgreSQL connection\n- `RESEND_API_KEY` - Email service\n- `GEMINI_API_KEY` - AI service\n- `WEAVIATE_URL` - Vector database\n- `WEAVIATE_API_KEY` - Vector database auth\n- `CRON_SECRET` - Cron job authentication\n\n**File Structure:**\n```\nrsvp-app/\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 app/           # Next.js app router\n\u2502   \u2502   \u251c\u2500\u2500 api/       # API routes\n\u2502   \u2502   \u251c\u2500\u2500 admin/     # Admin panel\n\u2502   \u2502   \u2514\u2500\u2500 (public)/  # Public pages\n\u2502   \u251c\u2500\u2500 components/    # React components\n\u2502   \u251c\u2500\u2500 lib/          # Utilities and services\n\u2502   \u2514\u2500\u2500 prisma/       # Database schema\n\u251c\u2500\u2500 public/           # Static assets\n\u2514\u2500\u2500 docs/            # Documentation\n```\n\n**Deployment:**\n- **Platform**: Vercel (frontend)\n- **Database**: Neon (PostgreSQL)\n- **AI Service**: Railway (planned)\n- **Vector DB**: Weaviate Cloud\n\n**Email Delivery:**\n- Resend API for email sending\n- Throttling support (emails per minute)\n- Smart sending windows\n- Timezone support\n- Recurring campaigns\n- Link and open tracking\n\n**AI Assistant (Juniper):**\n- Conversational interface\n- Real-time execution display\n- Tool integration for database operations\n- Context awareness\n- Error handling and recovery\n- Pattern-matching system (to be replaced with fine-tuned SLM)\n\nThis architecture provides a scalable, secure, and maintainable system for RSVP management and email campaigns."}
{"instruction": "Manage email campaigns", "input": "Pause a campaign", "output": "I'll help you manage your campaigns. Here are the available actions:\n\n**List Campaigns:**\n```\nGET /api/admin/campaign/campaigns\n```\n\n**Response:**\n```json\n{\n  \"campaigns\": [\n    {\n      \"id\": \"campaign-id\",\n      \"name\": \"Campaign Name\",\n      \"description\": \"Description\",\n      \"status\": \"DRAFT\",\n      \"meta\": {},\n      \"createdAt\": \"2025-01-15T10:00:00Z\",\n      \"updatedAt\": \"2025-01-15T10:00:00Z\",\n      \"schedules\": []\n    }\n  ]\n}\n```\n\n**Get Campaign Details:**\n```\nGET /api/admin/campaign/campaigns/[id]\n```\n\n**Update Campaign:**\n```\nPUT /api/admin/campaign/campaigns\n```\n\n**Request Body:**\n```json\n{\n  \"id\": \"campaign-id\",\n  \"name\": \"Updated Name\",\n  \"description\": \"Updated description\",\n  \"status\": \"SCHEDULED\",\n  \"steps\": []\n}\n```\n\n**Delete Campaign:**\n```\nDELETE /api/admin/campaign/campaigns/[id]\n```\n\n**Campaign Status Values:**\n- `DRAFT` - Not yet ready\n- `SCHEDULED` - Scheduled to send\n- `SENDING` - Currently sending\n- `PAUSED` - Paused\n- `COMPLETED` - Finished\n- `CANCELLED` - Cancelled\n\nLet me execute the appropriate action for your request."}
{"instruction": "Create and manage audience groups", "input": "Make a group for high-value customers", "output": "I'll help you create a new audience group. Here's what I need:\n\n**Required Information:**\n1. **Group Name**: What should we call this group?\n2. **Description**: What does this group represent?\n\n**API Endpoint:**\n```\nPOST /api/admin/campaign/groups\n```\n\n**Request Body:**\n```json\n{\n  \"name\": \"Group Name\",\n  \"description\": \"Description of the group\",\n  \"color\": \"#10b981\",\n  \"criteria\": {\n    \"industry\": \"technology\",\n    \"engagement\": \"high\",\n    \"tags\": [\"vip\", \"premium\"]\n  },\n  \"meta\": {}\n}\n```\n\n**Required Fields:**\n- `name` (string) - Group name\n- `description` (string) - Group description\n- `criteria` (object) - Group criteria\n- `meta` (object) - Group metadata\n\n**Optional Fields:**\n- `color` (string) - Group color (default: \"#10b981\")\n\n**Response:**\n```json\n{\n  \"group\": {\n    \"id\": \"group-id\",\n    \"name\": \"Group Name\",\n    \"description\": \"Description\",\n    \"color\": \"#10b981\",\n    \"criteria\": {},\n    \"meta\": {},\n    \"createdAt\": \"2025-01-15T10:00:00Z\",\n    \"updatedAt\": \"2025-01-15T10:00:00Z\",\n    \"members\": []\n  }\n}\n```\n\n**Audience Member Structure:**\n```json\n{\n  \"id\": \"member-id\",\n  \"groupId\": \"group-id\",\n  \"businessId\": \"business-id\",\n  \"businessName\": \"Business Name\",\n  \"primaryEmail\": \"email@example.com\",\n  \"secondaryEmail\": \"secondary@example.com\",\n  \"tagsSnapshot\": [\"tag1\", \"tag2\"],\n  \"inviteToken\": \"token\",\n  \"meta\": {},\n  \"createdAt\": \"2025-01-15T10:00:00Z\",\n  \"unsubscribed\": false\n}\n```\n\n**Member Status:**\n- `unsubscribed` (boolean) - Whether member has unsubscribed\n\n**Database Constraints:**\n- Unique constraint on `[groupId, businessId]`\n- Indexes on `groupId` and `businessId`\n\nWould you like me to help you set up the group criteria?"}
{"instruction": "Create and manage campaign schedules", "input": "Schedule a campaign to send", "output": "I'll help you create a campaign schedule. Here's what I need:\n\n**Required Information:**\n1. **Schedule Name**: What should we call this schedule?\n2. **Template ID**: Which email template to use?\n3. **Group ID**: Which audience group to target?\n\n**API Endpoint:**\n```\nPOST /api/admin/campaign/schedules\n```\n\n**Request Body:**\n```json\n{\n  \"name\": \"Schedule Name\",\n  \"templateId\": \"template-id\",\n  \"groupId\": \"audience-group-id\",\n  \"campaignId\": \"campaign-id\",\n  \"sendAt\": \"2025-01-15T10:00:00Z\",\n  \"throttlePerMinute\": 60,\n  \"repeatIntervalMins\": null,\n  \"stepOrder\": 1,\n  \"smartWindowStart\": \"2025-01-15T09:00:00Z\",\n  \"smartWindowEnd\": \"2025-01-15T17:00:00Z\",\n  \"timeZone\": \"America/Vancouver\",\n  \"status\": \"DRAFT\"\n}\n```\n\n**Required Fields:**\n- `name` (string) - Schedule name\n- `templateId` (string) - Email template ID\n- `groupId` (string) - Audience group ID\n\n**Optional Fields:**\n- `campaignId` (string) - Associated campaign ID\n- `sendAt` (ISO date string) - When to send (null for immediate)\n- `throttlePerMinute` (number) - Email sending rate (default: 60)\n- `repeatIntervalMins` (number) - Recurring interval in minutes\n- `stepOrder` (number) - Order in multi-step campaign (default: 1)\n- `smartWindowStart` (ISO date string) - Smart sending window start\n- `smartWindowEnd` (ISO date string) - Smart sending window end\n- `timeZone` (string) - Timezone (default: \"America/Vancouver\")\n- `status` (string) - Schedule status\n\n**Schedule Status Options:**\n- `DRAFT` - Not yet ready\n- `SCHEDULED` - Scheduled to send\n- `SENDING` - Currently sending\n- `PAUSED` - Paused\n- `COMPLETED` - Finished\n- `CANCELLED` - Cancelled\n\n**Response:**\n```json\n{\n  \"schedule\": {\n    \"id\": \"schedule-id\",\n    \"name\": \"Schedule Name\",\n    \"templateId\": \"template-id\",\n    \"groupId\": \"audience-group-id\",\n    \"status\": \"DRAFT\",\n    \"sendAt\": \"2025-01-15T10:00:00Z\",\n    \"timeZone\": \"America/Vancouver\",\n    \"throttlePerMinute\": 60,\n    \"createdAt\": \"2025-01-15T10:00:00Z\",\n    \"updatedAt\": \"2025-01-15T10:00:00Z\"\n  }\n}\n```\n\nWould you like me to help you set up the schedule details?"}
{"instruction": "Create and manage audience groups", "input": "Create a group for VIP customers", "output": "I'll help you create a new audience group. Here's what I need:\n\n**Required Information:**\n1. **Group Name**: What should we call this group?\n2. **Description**: What does this group represent?\n\n**API Endpoint:**\n```\nPOST /api/admin/campaign/groups\n```\n\n**Request Body:**\n```json\n{\n  \"name\": \"Group Name\",\n  \"description\": \"Description of the group\",\n  \"color\": \"#10b981\",\n  \"criteria\": {\n    \"industry\": \"technology\",\n    \"engagement\": \"high\",\n    \"tags\": [\"vip\", \"premium\"]\n  },\n  \"meta\": {}\n}\n```\n\n**Required Fields:**\n- `name` (string) - Group name\n- `description` (string) - Group description\n- `criteria` (object) - Group criteria\n- `meta` (object) - Group metadata\n\n**Optional Fields:**\n- `color` (string) - Group color (default: \"#10b981\")\n\n**Response:**\n```json\n{\n  \"group\": {\n    \"id\": \"group-id\",\n    \"name\": \"Group Name\",\n    \"description\": \"Description\",\n    \"color\": \"#10b981\",\n    \"criteria\": {},\n    \"meta\": {},\n    \"createdAt\": \"2025-01-15T10:00:00Z\",\n    \"updatedAt\": \"2025-01-15T10:00:00Z\",\n    \"members\": []\n  }\n}\n```\n\n**Audience Member Structure:**\n```json\n{\n  \"id\": \"member-id\",\n  \"groupId\": \"group-id\",\n  \"businessId\": \"business-id\",\n  \"businessName\": \"Business Name\",\n  \"primaryEmail\": \"email@example.com\",\n  \"secondaryEmail\": \"secondary@example.com\",\n  \"tagsSnapshot\": [\"tag1\", \"tag2\"],\n  \"inviteToken\": \"token\",\n  \"meta\": {},\n  \"createdAt\": \"2025-01-15T10:00:00Z\",\n  \"unsubscribed\": false\n}\n```\n\n**Member Status:**\n- `unsubscribed` (boolean) - Whether member has unsubscribed\n\n**Database Constraints:**\n- Unique constraint on `[groupId, businessId]`\n- Indexes on `groupId` and `businessId`\n\nWould you like me to help you set up the group criteria?"}
{"instruction": "Create a new email campaign", "input": "I need a campaign for our beta testers", "output": "I'll help you create a new campaign. Based on your request, here's what I need:\n\n**Required Information:**\n1. **Campaign Name**: What should we call this campaign?\n2. **Steps**: Campaign steps with templateId, groupId, and scheduling\n\n**API Endpoint:**\n```\nPOST /api/admin/campaign/campaigns\n```\n\n**Request Body:**\n```json\n{\n  \"name\": \"Campaign Name\",\n  \"description\": \"Optional description\",\n  \"status\": \"DRAFT\",\n  \"steps\": [\n    {\n      \"templateId\": \"template-id\",\n      \"groupId\": \"audience-group-id\",\n      \"sendAt\": \"2025-01-15T10:00:00Z\",\n      \"stepOrder\": 1\n    }\n  ]\n}\n```\n\n**Campaign Status Options:**\n- `DRAFT` - Not yet ready to send\n- `SCHEDULED` - Scheduled for future send\n- `SENDING` - Currently being sent\n- `PAUSED` - Temporarily paused\n- `COMPLETED` - Finished sending\n- `CANCELLED` - Cancelled\n\n**Required Fields:**\n- `name` (string) - Campaign name\n- `steps` (array) - Array of campaign steps\n\n**Step Object Required Fields:**\n- `templateId` (string) - Email template ID\n- `groupId` (string) - Audience group ID\n- `stepOrder` (number) - Order of execution\n\n**Optional Step Fields:**\n- `sendAt` (ISO date string) - When to send\n- `throttlePerMinute` (number) - Email sending rate\n- `timeZone` (string) - Timezone for scheduling\n\nWould you like me to help you set up the campaign steps?"}
{"instruction": "Create and manage campaign schedules", "input": "Create a recurring schedule", "output": "I'll help you create a campaign schedule. Here's what I need:\n\n**Required Information:**\n1. **Schedule Name**: What should we call this schedule?\n2. **Template ID**: Which email template to use?\n3. **Group ID**: Which audience group to target?\n\n**API Endpoint:**\n```\nPOST /api/admin/campaign/schedules\n```\n\n**Request Body:**\n```json\n{\n  \"name\": \"Schedule Name\",\n  \"templateId\": \"template-id\",\n  \"groupId\": \"audience-group-id\",\n  \"campaignId\": \"campaign-id\",\n  \"sendAt\": \"2025-01-15T10:00:00Z\",\n  \"throttlePerMinute\": 60,\n  \"repeatIntervalMins\": null,\n  \"stepOrder\": 1,\n  \"smartWindowStart\": \"2025-01-15T09:00:00Z\",\n  \"smartWindowEnd\": \"2025-01-15T17:00:00Z\",\n  \"timeZone\": \"America/Vancouver\",\n  \"status\": \"DRAFT\"\n}\n```\n\n**Required Fields:**\n- `name` (string) - Schedule name\n- `templateId` (string) - Email template ID\n- `groupId` (string) - Audience group ID\n\n**Optional Fields:**\n- `campaignId` (string) - Associated campaign ID\n- `sendAt` (ISO date string) - When to send (null for immediate)\n- `throttlePerMinute` (number) - Email sending rate (default: 60)\n- `repeatIntervalMins` (number) - Recurring interval in minutes\n- `stepOrder` (number) - Order in multi-step campaign (default: 1)\n- `smartWindowStart` (ISO date string) - Smart sending window start\n- `smartWindowEnd` (ISO date string) - Smart sending window end\n- `timeZone` (string) - Timezone (default: \"America/Vancouver\")\n- `status` (string) - Schedule status\n\n**Schedule Status Options:**\n- `DRAFT` - Not yet ready\n- `SCHEDULED` - Scheduled to send\n- `SENDING` - Currently sending\n- `PAUSED` - Paused\n- `COMPLETED` - Finished\n- `CANCELLED` - Cancelled\n\n**Response:**\n```json\n{\n  \"schedule\": {\n    \"id\": \"schedule-id\",\n    \"name\": \"Schedule Name\",\n    \"templateId\": \"template-id\",\n    \"groupId\": \"audience-group-id\",\n    \"status\": \"DRAFT\",\n    \"sendAt\": \"2025-01-15T10:00:00Z\",\n    \"timeZone\": \"America/Vancouver\",\n    \"throttlePerMinute\": 60,\n    \"createdAt\": \"2025-01-15T10:00:00Z\",\n    \"updatedAt\": \"2025-01-15T10:00:00Z\"\n  }\n}\n```\n\nWould you like me to help you set up the schedule details?"}
{"instruction": "Create and manage audience groups", "input": "I want a group for beta testers", "output": "I'll help you create a new audience group. Here's what I need:\n\n**Required Information:**\n1. **Group Name**: What should we call this group?\n2. **Description**: What does this group represent?\n\n**API Endpoint:**\n```\nPOST /api/admin/campaign/groups\n```\n\n**Request Body:**\n```json\n{\n  \"name\": \"Group Name\",\n  \"description\": \"Description of the group\",\n  \"color\": \"#10b981\",\n  \"criteria\": {\n    \"industry\": \"technology\",\n    \"engagement\": \"high\",\n    \"tags\": [\"vip\", \"premium\"]\n  },\n  \"meta\": {}\n}\n```\n\n**Required Fields:**\n- `name` (string) - Group name\n- `description` (string) - Group description\n- `criteria` (object) - Group criteria\n- `meta` (object) - Group metadata\n\n**Optional Fields:**\n- `color` (string) - Group color (default: \"#10b981\")\n\n**Response:**\n```json\n{\n  \"group\": {\n    \"id\": \"group-id\",\n    \"name\": \"Group Name\",\n    \"description\": \"Description\",\n    \"color\": \"#10b981\",\n    \"criteria\": {},\n    \"meta\": {},\n    \"createdAt\": \"2025-01-15T10:00:00Z\",\n    \"updatedAt\": \"2025-01-15T10:00:00Z\",\n    \"members\": []\n  }\n}\n```\n\n**Audience Member Structure:**\n```json\n{\n  \"id\": \"member-id\",\n  \"groupId\": \"group-id\",\n  \"businessId\": \"business-id\",\n  \"businessName\": \"Business Name\",\n  \"primaryEmail\": \"email@example.com\",\n  \"secondaryEmail\": \"secondary@example.com\",\n  \"tagsSnapshot\": [\"tag1\", \"tag2\"],\n  \"inviteToken\": \"token\",\n  \"meta\": {},\n  \"createdAt\": \"2025-01-15T10:00:00Z\",\n  \"unsubscribed\": false\n}\n```\n\n**Member Status:**\n- `unsubscribed` (boolean) - Whether member has unsubscribed\n\n**Database Constraints:**\n- Unique constraint on `[groupId, businessId]`\n- Indexes on `groupId` and `businessId`\n\nWould you like me to help you set up the group criteria?"}
{"instruction": "Create a new email campaign", "input": "I want to create a campaign for VIP customers", "output": "I'll help you create a new campaign. Based on your request, here's what I need:\n\n**Required Information:**\n1. **Campaign Name**: What should we call this campaign?\n2. **Steps**: Campaign steps with templateId, groupId, and scheduling\n\n**API Endpoint:**\n```\nPOST /api/admin/campaign/campaigns\n```\n\n**Request Body:**\n```json\n{\n  \"name\": \"Campaign Name\",\n  \"description\": \"Optional description\",\n  \"status\": \"DRAFT\",\n  \"steps\": [\n    {\n      \"templateId\": \"template-id\",\n      \"groupId\": \"audience-group-id\",\n      \"sendAt\": \"2025-01-15T10:00:00Z\",\n      \"stepOrder\": 1\n    }\n  ]\n}\n```\n\n**Campaign Status Options:**\n- `DRAFT` - Not yet ready to send\n- `SCHEDULED` - Scheduled for future send\n- `SENDING` - Currently being sent\n- `PAUSED` - Temporarily paused\n- `COMPLETED` - Finished sending\n- `CANCELLED` - Cancelled\n\n**Required Fields:**\n- `name` (string) - Campaign name\n- `steps` (array) - Array of campaign steps\n\n**Step Object Required Fields:**\n- `templateId` (string) - Email template ID\n- `groupId` (string) - Audience group ID\n- `stepOrder` (number) - Order of execution\n\n**Optional Step Fields:**\n- `sendAt` (ISO date string) - When to send\n- `throttlePerMinute` (number) - Email sending rate\n- `timeZone` (string) - Timezone for scheduling\n\nWould you like me to help you set up the campaign steps?"}
{"instruction": "Manage email campaigns", "input": "Update campaign status", "output": "I'll help you manage your campaigns. Here are the available actions:\n\n**List Campaigns:**\n```\nGET /api/admin/campaign/campaigns\n```\n\n**Response:**\n```json\n{\n  \"campaigns\": [\n    {\n      \"id\": \"campaign-id\",\n      \"name\": \"Campaign Name\",\n      \"description\": \"Description\",\n      \"status\": \"DRAFT\",\n      \"meta\": {},\n      \"createdAt\": \"2025-01-15T10:00:00Z\",\n      \"updatedAt\": \"2025-01-15T10:00:00Z\",\n      \"schedules\": []\n    }\n  ]\n}\n```\n\n**Get Campaign Details:**\n```\nGET /api/admin/campaign/campaigns/[id]\n```\n\n**Update Campaign:**\n```\nPUT /api/admin/campaign/campaigns\n```\n\n**Request Body:**\n```json\n{\n  \"id\": \"campaign-id\",\n  \"name\": \"Updated Name\",\n  \"description\": \"Updated description\",\n  \"status\": \"SCHEDULED\",\n  \"steps\": []\n}\n```\n\n**Delete Campaign:**\n```\nDELETE /api/admin/campaign/campaigns/[id]\n```\n\n**Campaign Status Values:**\n- `DRAFT` - Not yet ready\n- `SCHEDULED` - Scheduled to send\n- `SENDING` - Currently sending\n- `PAUSED` - Paused\n- `COMPLETED` - Finished\n- `CANCELLED` - Cancelled\n\nLet me execute the appropriate action for your request."}
{"instruction": "Create and manage email templates", "input": "Create a template for follow-up emails", "output": "I'll help you create a new email template. Here's what I need:\n\n**Required Information:**\n1. **Template Name**: What should we call this template?\n2. **Subject**: Email subject line\n3. **HTML Body**: Rich HTML content\n4. **Text Body**: Plain text version (optional)\n\n**API Endpoint:**\n```\nPOST /api/admin/campaign/templates\n```\n\n**Request Body:**\n```json\n{\n  \"name\": \"Template Name\",\n  \"subject\": \"Email Subject\",\n  \"htmlBody\": \"<h1>Hello {name}</h1><p>Content here</p>\",\n  \"textBody\": \"Hello {name}\\n\\nContent here\",\n  \"meta\": {},\n  \"greeting_title\": \"Welcome!\",\n  \"greeting_message\": \"Thank you for joining us\",\n  \"signature_name\": \"Your Name\",\n  \"signature_title\": \"Your Title\",\n  \"signature_company\": \"Your Company\",\n  \"signature_location\": \"Your Location\",\n  \"main_content_title\": \"Main Title\",\n  \"main_content_body\": \"Main content here\",\n  \"button_text\": \"Click Here\",\n  \"additional_info_title\": \"Additional Info\",\n  \"additional_info_body\": \"Additional details\",\n  \"closing_title\": \"Thank You\",\n  \"closing_message\": \"Best regards\"\n}\n```\n\n**Required Fields:**\n- `name` (string) - Template name\n- `subject` (string) - Email subject\n- `htmlBody` (string) - HTML content\n- `meta` (object) - Template metadata\n\n**Optional Fields:**\n- `textBody` (string) - Plain text version\n- `greeting_title` (string) - Greeting title\n- `greeting_message` (string) - Greeting message\n- `signature_name` (string) - Signature name\n- `signature_title` (string) - Signature title\n- `signature_company` (string) - Signature company\n- `signature_location` (string) - Signature location\n- `main_content_title` (string) - Main content title\n- `main_content_body` (string) - Main content body\n- `button_text` (string) - Button text\n- `additional_info_title` (string) - Additional info title\n- `additional_info_body` (string) - Additional info body\n- `closing_title` (string) - Closing title\n- `closing_message` (string) - Closing message\n\n**Template Variables:**\n- `{name}` - Recipient's name\n- `{email}` - Recipient's email\n- `{firstName}` - First name\n- `{lastName}` - Last name\n- `{unsubscribeUrl}` - Unsubscribe link\n\n**Response:**\n```json\n{\n  \"template\": {\n    \"id\": \"template-id\",\n    \"name\": \"Template Name\",\n    \"subject\": \"Email Subject\",\n    \"htmlBody\": \"<h1>Hello {name}</h1>\",\n    \"textBody\": \"Hello {name}\",\n    \"meta\": {},\n    \"createdAt\": \"2025-01-15T10:00:00Z\",\n    \"updatedAt\": \"2025-01-15T10:00:00Z\"\n  }\n}\n```\n\nWould you like me to help you create this template with some default content?"}
{"instruction": "Create and manage audience groups", "input": "Create a group for new subscribers", "output": "I'll help you create a new audience group. Here's what I need:\n\n**Required Information:**\n1. **Group Name**: What should we call this group?\n2. **Description**: What does this group represent?\n\n**API Endpoint:**\n```\nPOST /api/admin/campaign/groups\n```\n\n**Request Body:**\n```json\n{\n  \"name\": \"Group Name\",\n  \"description\": \"Description of the group\",\n  \"color\": \"#10b981\",\n  \"criteria\": {\n    \"industry\": \"technology\",\n    \"engagement\": \"high\",\n    \"tags\": [\"vip\", \"premium\"]\n  },\n  \"meta\": {}\n}\n```\n\n**Required Fields:**\n- `name` (string) - Group name\n- `description` (string) - Group description\n- `criteria` (object) - Group criteria\n- `meta` (object) - Group metadata\n\n**Optional Fields:**\n- `color` (string) - Group color (default: \"#10b981\")\n\n**Response:**\n```json\n{\n  \"group\": {\n    \"id\": \"group-id\",\n    \"name\": \"Group Name\",\n    \"description\": \"Description\",\n    \"color\": \"#10b981\",\n    \"criteria\": {},\n    \"meta\": {},\n    \"createdAt\": \"2025-01-15T10:00:00Z\",\n    \"updatedAt\": \"2025-01-15T10:00:00Z\",\n    \"members\": []\n  }\n}\n```\n\n**Audience Member Structure:**\n```json\n{\n  \"id\": \"member-id\",\n  \"groupId\": \"group-id\",\n  \"businessId\": \"business-id\",\n  \"businessName\": \"Business Name\",\n  \"primaryEmail\": \"email@example.com\",\n  \"secondaryEmail\": \"secondary@example.com\",\n  \"tagsSnapshot\": [\"tag1\", \"tag2\"],\n  \"inviteToken\": \"token\",\n  \"meta\": {},\n  \"createdAt\": \"2025-01-15T10:00:00Z\",\n  \"unsubscribed\": false\n}\n```\n\n**Member Status:**\n- `unsubscribed` (boolean) - Whether member has unsubscribed\n\n**Database Constraints:**\n- Unique constraint on `[groupId, businessId]`\n- Indexes on `groupId` and `businessId`\n\nWould you like me to help you set up the group criteria?"}
{"instruction": "View and manage RSVP data", "input": "Export RSVP data", "output": "I'll help you view RSVP data. Here's what I can show you:\n\n**RSVP Data Structure:**\n```json\n{\n  \"id\": \"rsvp-id\",\n  \"fullName\": \"John Doe\",\n  \"organization\": \"Company Name\",\n  \"email\": \"john@example.com\",\n  \"phone\": \"+1234567890\",\n  \"attendanceStatus\": \"CONFIRMED\",\n  \"attendeeCount\": 2,\n  \"dietaryPreference\": \"VEGETARIAN\",\n  \"dietaryOther\": \"No nuts\",\n  \"accessibilityNeeds\": \"Wheelchair access\",\n  \"referralSource\": \"WEBSITE\",\n  \"referralOther\": \"Google search\",\n  \"wantsResources\": true,\n  \"wantsAudit\": false,\n  \"learningGoal\": \"Learn about new technologies\",\n  \"createdAt\": \"2025-01-15T10:00:00Z\",\n  \"visitorId\": \"visitor-id\",\n  \"sessionId\": \"session-id\",\n  \"referrer\": \"https://example.com\",\n  \"eid\": \"event-id\",\n  \"utmSource\": \"google\",\n  \"utmMedium\": \"cpc\",\n  \"utmCampaign\": \"summer-event\",\n  \"utmTerm\": \"tech conference\",\n  \"utmContent\": \"banner-ad\",\n  \"userAgent\": \"Mozilla/5.0...\",\n  \"language\": \"en-US\",\n  \"tz\": \"America/Vancouver\",\n  \"country\": \"Canada\",\n  \"region\": \"BC\",\n  \"city\": \"Vancouver\",\n  \"ipHash\": \"hashed-ip\",\n  \"screenW\": 1920,\n  \"screenH\": 1080,\n  \"dpr\": 2.0,\n  \"platform\": \"MacIntel\",\n  \"device\": \"desktop\",\n  \"browser\": \"Chrome\",\n  \"meta\": \"additional data\"\n}\n```\n\n**Key Fields:**\n- `attendanceStatus` (string) - CONFIRMED, CANCELLED, etc.\n- `attendeeCount` (number) - Number of attendees\n- `dietaryPreference` (string) - Dietary requirements\n- `accessibilityNeeds` (string) - Accessibility requirements\n- `referralSource` (string) - How they found the event\n- `wantsResources` (boolean) - Wants additional resources\n- `wantsAudit` (boolean) - Wants audit information\n- `learningGoal` (string) - What they want to learn\n\n**Tracking Data:**\n- `visitorId` - Unique visitor identifier\n- `sessionId` - Session identifier\n- `referrer` - Referring URL\n- `utmSource`, `utmMedium`, `utmCampaign`, `utmTerm`, `utmContent` - UTM tracking\n- `userAgent` - Browser information\n- `language` - User language\n- `tz` - Timezone\n- `country`, `region`, `city` - Geographic data\n- `ipHash` - Hashed IP address\n- `screenW`, `screenH`, `dpr` - Screen information\n- `platform`, `device`, `browser` - Device information\n\n**Database Constraints:**\n- `email` field is unique\n- `id` is primary key (cuid)\n\n**API Endpoint:**\n```\nPOST /api/rsvp\n```\n\n**Security Features:**\n- CSRF protection\n- Rate limiting\n- Input validation\n- Test detection\n- Security logging\n\nLet me show you the RSVP data based on your request."}
{"instruction": "View analytics and generate reports", "input": "Show me campaign analytics", "output": "I'll help you analyze your email performance. Here's what I can show you:\n\n**Campaign Analytics:**\n\n**CampaignSend Status Tracking:**\n```json\n{\n  \"id\": \"send-id\",\n  \"scheduleId\": \"schedule-id\",\n  \"groupId\": \"group-id\",\n  \"templateId\": \"template-id\",\n  \"businessId\": \"business-id\",\n  \"businessName\": \"Business Name\",\n  \"email\": \"email@example.com\",\n  \"inviteToken\": \"token\",\n  \"inviteLink\": \"https://example.com/l/token\",\n  \"resendMessageId\": \"resend-message-id\",\n  \"status\": \"SENT\",\n  \"error\": null,\n  \"meta\": {},\n  \"sentAt\": \"2025-01-15T10:00:00Z\",\n  \"openedAt\": \"2025-01-15T10:05:00Z\",\n  \"visitedAt\": \"2025-01-15T10:10:00Z\"\n}\n```\n\n**CampaignSend Status Values:**\n- `PENDING` - Not yet sent\n- `SENDING` - Currently being sent\n- `SENT` - Successfully sent\n- `FAILED` - Failed to send\n- `SKIPPED` - Skipped (e.g., unsubscribed)\n\n**Key Metrics:**\n- **Sent Count**: Total emails sent\n- **Open Rate**: Percentage of emails opened (openedAt not null)\n- **Click Rate**: Percentage of emails clicked (visitedAt not null)\n- **Bounce Rate**: Percentage of failed sends\n- **Unsubscribe Rate**: Percentage of unsubscribed members\n\n**Visit Tracking:**\n```json\n{\n  \"id\": \"visit-id\",\n  \"createdAt\": \"2025-01-15T10:00:00Z\",\n  \"visitorId\": \"visitor-id\",\n  \"sessionId\": \"session-id\",\n  \"path\": \"/event-page\",\n  \"query\": \"?utm_source=email\",\n  \"referrer\": \"https://example.com\",\n  \"eid\": \"event-id\",\n  \"utmSource\": \"email\",\n  \"utmMedium\": \"newsletter\",\n  \"utmCampaign\": \"summer-event\",\n  \"userAgent\": \"Mozilla/5.0...\",\n  \"language\": \"en-US\",\n  \"country\": \"Canada\",\n  \"region\": \"BC\",\n  \"city\": \"Vancouver\",\n  \"timeOnPageMs\": 30000,\n  \"scrollDepth\": 75\n}\n```\n\n**Analytics Endpoints:**\n- `GET /api/admin/campaign/dashboard` - Dashboard overview\n- `GET /api/admin/export` - Export data\n- `GET /api/l/[token]` - Track link clicks\n- `GET /api/__pixel` - Track email opens\n\n**Export Options:**\n- CSV format for RSVP data\n- JSON format for campaign data\n- Filtered by date range\n- Filtered by campaign/group\n\n**Performance Tracking:**\n- Email delivery rates\n- Open and click tracking\n- Geographic distribution\n- Device and browser analytics\n- Time-based performance\n- A/B testing results\n\nLet me generate the appropriate analytics report for your request."}
{"instruction": "Create and manage campaign schedules", "input": "Set up smart sending window", "output": "I'll help you create a campaign schedule. Here's what I need:\n\n**Required Information:**\n1. **Schedule Name**: What should we call this schedule?\n2. **Template ID**: Which email template to use?\n3. **Group ID**: Which audience group to target?\n\n**API Endpoint:**\n```\nPOST /api/admin/campaign/schedules\n```\n\n**Request Body:**\n```json\n{\n  \"name\": \"Schedule Name\",\n  \"templateId\": \"template-id\",\n  \"groupId\": \"audience-group-id\",\n  \"campaignId\": \"campaign-id\",\n  \"sendAt\": \"2025-01-15T10:00:00Z\",\n  \"throttlePerMinute\": 60,\n  \"repeatIntervalMins\": null,\n  \"stepOrder\": 1,\n  \"smartWindowStart\": \"2025-01-15T09:00:00Z\",\n  \"smartWindowEnd\": \"2025-01-15T17:00:00Z\",\n  \"timeZone\": \"America/Vancouver\",\n  \"status\": \"DRAFT\"\n}\n```\n\n**Required Fields:**\n- `name` (string) - Schedule name\n- `templateId` (string) - Email template ID\n- `groupId` (string) - Audience group ID\n\n**Optional Fields:**\n- `campaignId` (string) - Associated campaign ID\n- `sendAt` (ISO date string) - When to send (null for immediate)\n- `throttlePerMinute` (number) - Email sending rate (default: 60)\n- `repeatIntervalMins` (number) - Recurring interval in minutes\n- `stepOrder` (number) - Order in multi-step campaign (default: 1)\n- `smartWindowStart` (ISO date string) - Smart sending window start\n- `smartWindowEnd` (ISO date string) - Smart sending window end\n- `timeZone` (string) - Timezone (default: \"America/Vancouver\")\n- `status` (string) - Schedule status\n\n**Schedule Status Options:**\n- `DRAFT` - Not yet ready\n- `SCHEDULED` - Scheduled to send\n- `SENDING` - Currently sending\n- `PAUSED` - Paused\n- `COMPLETED` - Finished\n- `CANCELLED` - Cancelled\n\n**Response:**\n```json\n{\n  \"schedule\": {\n    \"id\": \"schedule-id\",\n    \"name\": \"Schedule Name\",\n    \"templateId\": \"template-id\",\n    \"groupId\": \"audience-group-id\",\n    \"status\": \"DRAFT\",\n    \"sendAt\": \"2025-01-15T10:00:00Z\",\n    \"timeZone\": \"America/Vancouver\",\n    \"throttlePerMinute\": 60,\n    \"createdAt\": \"2025-01-15T10:00:00Z\",\n    \"updatedAt\": \"2025-01-15T10:00:00Z\"\n  }\n}\n```\n\nWould you like me to help you set up the schedule details?"}
{"instruction": "Create and manage email templates", "input": "Create a template for survey requests", "output": "I'll help you create a new email template. Here's what I need:\n\n**Required Information:**\n1. **Template Name**: What should we call this template?\n2. **Subject**: Email subject line\n3. **HTML Body**: Rich HTML content\n4. **Text Body**: Plain text version (optional)\n\n**API Endpoint:**\n```\nPOST /api/admin/campaign/templates\n```\n\n**Request Body:**\n```json\n{\n  \"name\": \"Template Name\",\n  \"subject\": \"Email Subject\",\n  \"htmlBody\": \"<h1>Hello {name}</h1><p>Content here</p>\",\n  \"textBody\": \"Hello {name}\\n\\nContent here\",\n  \"meta\": {},\n  \"greeting_title\": \"Welcome!\",\n  \"greeting_message\": \"Thank you for joining us\",\n  \"signature_name\": \"Your Name\",\n  \"signature_title\": \"Your Title\",\n  \"signature_company\": \"Your Company\",\n  \"signature_location\": \"Your Location\",\n  \"main_content_title\": \"Main Title\",\n  \"main_content_body\": \"Main content here\",\n  \"button_text\": \"Click Here\",\n  \"additional_info_title\": \"Additional Info\",\n  \"additional_info_body\": \"Additional details\",\n  \"closing_title\": \"Thank You\",\n  \"closing_message\": \"Best regards\"\n}\n```\n\n**Required Fields:**\n- `name` (string) - Template name\n- `subject` (string) - Email subject\n- `htmlBody` (string) - HTML content\n- `meta` (object) - Template metadata\n\n**Optional Fields:**\n- `textBody` (string) - Plain text version\n- `greeting_title` (string) - Greeting title\n- `greeting_message` (string) - Greeting message\n- `signature_name` (string) - Signature name\n- `signature_title` (string) - Signature title\n- `signature_company` (string) - Signature company\n- `signature_location` (string) - Signature location\n- `main_content_title` (string) - Main content title\n- `main_content_body` (string) - Main content body\n- `button_text` (string) - Button text\n- `additional_info_title` (string) - Additional info title\n- `additional_info_body` (string) - Additional info body\n- `closing_title` (string) - Closing title\n- `closing_message` (string) - Closing message\n\n**Template Variables:**\n- `{name}` - Recipient's name\n- `{email}` - Recipient's email\n- `{firstName}` - First name\n- `{lastName}` - Last name\n- `{unsubscribeUrl}` - Unsubscribe link\n\n**Response:**\n```json\n{\n  \"template\": {\n    \"id\": \"template-id\",\n    \"name\": \"Template Name\",\n    \"subject\": \"Email Subject\",\n    \"htmlBody\": \"<h1>Hello {name}</h1>\",\n    \"textBody\": \"Hello {name}\",\n    \"meta\": {},\n    \"createdAt\": \"2025-01-15T10:00:00Z\",\n    \"updatedAt\": \"2025-01-15T10:00:00Z\"\n  }\n}\n```\n\nWould you like me to help you create this template with some default content?"}
{"instruction": "Explain system architecture and technical details", "input": "What technologies are used?", "output": "I'll explain the technical architecture of the RSVP system:\n\n**System Architecture:**\n\n**Frontend:**\n- **Framework**: Next.js 14 with React\n- **Styling**: Tailwind CSS\n- **Animations**: Framer Motion\n- **State Management**: React hooks (useState, useEffect)\n- **Authentication**: Session-based with cookies\n\n**Backend:**\n- **Runtime**: Node.js\n- **Framework**: Next.js API routes\n- **Database**: PostgreSQL with Prisma ORM\n- **Email Service**: Resend API\n- **Vector Database**: Weaviate (for RAG)\n- **AI Integration**: Gemini 2.5 Flash\n\n**Database Models:**\n- `RSVP` - Event RSVP submissions\n- `Visit` - Website visit tracking\n- `CampaignTemplate` - Email templates\n- `Campaign` - Email campaigns\n- `AudienceGroup` - Audience segmentation\n- `AudienceMember` - Individual audience members\n- `CampaignSchedule` - Campaign scheduling\n- `CampaignSend` - Individual email sends\n\n**API Structure:**\n- `/api/rsvp` - RSVP form submission\n- `/api/admin/campaign/campaigns` - Campaign management\n- `/api/admin/campaign/schedules` - Schedule management\n- `/api/admin/campaign/templates` - Template management\n- `/api/admin/campaign/groups` - Audience group management\n- `/api/admin/campaign/send` - Email sending\n- `/api/admin/export` - Data export\n- `/api/unsubscribe` - Unsubscribe handling\n- `/api/l/[token]` - Link tracking\n- `/api/__pixel` - Email open tracking\n\n**Security Features:**\n- CSRF protection with origin/referer validation\n- Rate limiting with IP fingerprinting\n- Input validation with Zod schemas\n- Test detection to prevent spam\n- Security logging for monitoring\n- Secure headers with CSP\n\n**Environment Variables:**\n- `DATABASE_URL` - PostgreSQL connection\n- `RESEND_API_KEY` - Email service\n- `GEMINI_API_KEY` - AI service\n- `WEAVIATE_URL` - Vector database\n- `WEAVIATE_API_KEY` - Vector database auth\n- `CRON_SECRET` - Cron job authentication\n\n**File Structure:**\n```\nrsvp-app/\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 app/           # Next.js app router\n\u2502   \u2502   \u251c\u2500\u2500 api/       # API routes\n\u2502   \u2502   \u251c\u2500\u2500 admin/     # Admin panel\n\u2502   \u2502   \u2514\u2500\u2500 (public)/  # Public pages\n\u2502   \u251c\u2500\u2500 components/    # React components\n\u2502   \u251c\u2500\u2500 lib/          # Utilities and services\n\u2502   \u2514\u2500\u2500 prisma/       # Database schema\n\u251c\u2500\u2500 public/           # Static assets\n\u2514\u2500\u2500 docs/            # Documentation\n```\n\n**Deployment:**\n- **Platform**: Vercel (frontend)\n- **Database**: Neon (PostgreSQL)\n- **AI Service**: Railway (planned)\n- **Vector DB**: Weaviate Cloud\n\n**Email Delivery:**\n- Resend API for email sending\n- Throttling support (emails per minute)\n- Smart sending windows\n- Timezone support\n- Recurring campaigns\n- Link and open tracking\n\n**AI Assistant (Juniper):**\n- Conversational interface\n- Real-time execution display\n- Tool integration for database operations\n- Context awareness\n- Error handling and recovery\n- Pattern-matching system (to be replaced with fine-tuned SLM)\n\nThis architecture provides a scalable, secure, and maintainable system for RSVP management and email campaigns."}
{"instruction": "Create a new email campaign", "input": "Make a campaign for the tech conference", "output": "I'll help you create a new campaign. Based on your request, here's what I need:\n\n**Required Information:**\n1. **Campaign Name**: What should we call this campaign?\n2. **Steps**: Campaign steps with templateId, groupId, and scheduling\n\n**API Endpoint:**\n```\nPOST /api/admin/campaign/campaigns\n```\n\n**Request Body:**\n```json\n{\n  \"name\": \"Campaign Name\",\n  \"description\": \"Optional description\",\n  \"status\": \"DRAFT\",\n  \"steps\": [\n    {\n      \"templateId\": \"template-id\",\n      \"groupId\": \"audience-group-id\",\n      \"sendAt\": \"2025-01-15T10:00:00Z\",\n      \"stepOrder\": 1\n    }\n  ]\n}\n```\n\n**Campaign Status Options:**\n- `DRAFT` - Not yet ready to send\n- `SCHEDULED` - Scheduled for future send\n- `SENDING` - Currently being sent\n- `PAUSED` - Temporarily paused\n- `COMPLETED` - Finished sending\n- `CANCELLED` - Cancelled\n\n**Required Fields:**\n- `name` (string) - Campaign name\n- `steps` (array) - Array of campaign steps\n\n**Step Object Required Fields:**\n- `templateId` (string) - Email template ID\n- `groupId` (string) - Audience group ID\n- `stepOrder` (number) - Order of execution\n\n**Optional Step Fields:**\n- `sendAt` (ISO date string) - When to send\n- `throttlePerMinute` (number) - Email sending rate\n- `timeZone` (string) - Timezone for scheduling\n\nWould you like me to help you set up the campaign steps?"}
{"instruction": "Create a new email campaign", "input": "Create a campaign for the product launch", "output": "I'll help you create a new campaign. Based on your request, here's what I need:\n\n**Required Information:**\n1. **Campaign Name**: What should we call this campaign?\n2. **Steps**: Campaign steps with templateId, groupId, and scheduling\n\n**API Endpoint:**\n```\nPOST /api/admin/campaign/campaigns\n```\n\n**Request Body:**\n```json\n{\n  \"name\": \"Campaign Name\",\n  \"description\": \"Optional description\",\n  \"status\": \"DRAFT\",\n  \"steps\": [\n    {\n      \"templateId\": \"template-id\",\n      \"groupId\": \"audience-group-id\",\n      \"sendAt\": \"2025-01-15T10:00:00Z\",\n      \"stepOrder\": 1\n    }\n  ]\n}\n```\n\n**Campaign Status Options:**\n- `DRAFT` - Not yet ready to send\n- `SCHEDULED` - Scheduled for future send\n- `SENDING` - Currently being sent\n- `PAUSED` - Temporarily paused\n- `COMPLETED` - Finished sending\n- `CANCELLED` - Cancelled\n\n**Required Fields:**\n- `name` (string) - Campaign name\n- `steps` (array) - Array of campaign steps\n\n**Step Object Required Fields:**\n- `templateId` (string) - Email template ID\n- `groupId` (string) - Audience group ID\n- `stepOrder` (number) - Order of execution\n\n**Optional Step Fields:**\n- `sendAt` (ISO date string) - When to send\n- `throttlePerMinute` (number) - Email sending rate\n- `timeZone` (string) - Timezone for scheduling\n\nWould you like me to help you set up the campaign steps?"}
{"instruction": "Manage email campaigns", "input": "What's the status of my campaigns?", "output": "I'll help you manage your campaigns. Here are the available actions:\n\n**List Campaigns:**\n```\nGET /api/admin/campaign/campaigns\n```\n\n**Response:**\n```json\n{\n  \"campaigns\": [\n    {\n      \"id\": \"campaign-id\",\n      \"name\": \"Campaign Name\",\n      \"description\": \"Description\",\n      \"status\": \"DRAFT\",\n      \"meta\": {},\n      \"createdAt\": \"2025-01-15T10:00:00Z\",\n      \"updatedAt\": \"2025-01-15T10:00:00Z\",\n      \"schedules\": []\n    }\n  ]\n}\n```\n\n**Get Campaign Details:**\n```\nGET /api/admin/campaign/campaigns/[id]\n```\n\n**Update Campaign:**\n```\nPUT /api/admin/campaign/campaigns\n```\n\n**Request Body:**\n```json\n{\n  \"id\": \"campaign-id\",\n  \"name\": \"Updated Name\",\n  \"description\": \"Updated description\",\n  \"status\": \"SCHEDULED\",\n  \"steps\": []\n}\n```\n\n**Delete Campaign:**\n```\nDELETE /api/admin/campaign/campaigns/[id]\n```\n\n**Campaign Status Values:**\n- `DRAFT` - Not yet ready\n- `SCHEDULED` - Scheduled to send\n- `SENDING` - Currently sending\n- `PAUSED` - Paused\n- `COMPLETED` - Finished\n- `CANCELLED` - Cancelled\n\nLet me execute the appropriate action for your request."}
